"use strict";(self.webpackChunkdtax=self.webpackChunkdtax||[]).push([[889],{2889:(mn,K,c)=>{c.r(K),c.d(K,{FinanceModule:()=>sn});var f=c(8583),e=c(7716),C=c(264);const ve=function(){return["./journaux"]},ee=function(){return["./discharging"]};let te=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compability"]],decls:92,vars:19,consts:[[1,"row"],[1,"col-md-3","p-4","position-fixe","az-content-left-components"],[1,"component-item"],[1,"flex-column","justify-content-center","d-flex"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-icon"],[1,"flex-row","justify-content-center","d-flex"],[1,"position-relative","wrap-stat-sum"],[1,"stat-sum-title"],[1,"w-100","d-flex","flex-column","align-content-end","align-items-end"],[1,"stat-sum-val"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column"],["href","",1,"btn","btn-purple","mb-2"],[1,"fa","fa-print"],["href","",1,"btn","btn-purple"],[1,"fa","fa-envelope"],[1,"col-md-9","offset-"],[1,"az-content-breadcrumb"],[1,"content"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"routerLink"],[1,"ht-40"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"strong",5),e._uU(6,"Taux du jour"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"strong"),e._uU(9),e.ALo(10,"number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",3),e.TgZ(12,"div",4),e.TgZ(13,"strong",5),e._uU(14,"Totaux enregistr\xe9s"),e.qZA(),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"strong"),e._uU(17),e.ALo(18,"number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",7),e.TgZ(20,"div",8),e.TgZ(21,"p"),e._uU(22," Cash"),e.qZA(),e.qZA(),e.TgZ(23,"div",9),e.TgZ(24,"div",10),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"div",10),e._uU(28),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",7),e.TgZ(30,"div",8),e.TgZ(31,"p"),e._uU(32," Mobile money"),e.qZA(),e.qZA(),e.TgZ(33,"div",9),e.TgZ(34,"div",10),e._uU(35,"0.00$"),e.qZA(),e.TgZ(36,"div",10),e._uU(37,"1"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",7),e.TgZ(39,"div",8),e.TgZ(40,"p"),e._uU(41,"Banque"),e.qZA(),e.qZA(),e.TgZ(42,"div",9),e.TgZ(43,"div",10),e._uU(44,"0.00$"),e.qZA(),e.TgZ(45,"div",10),e._uU(46,"1"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",7),e.TgZ(48,"div",8),e.TgZ(49,"p"),e._uU(50,"Annul\xe9e"),e.qZA(),e.qZA(),e.TgZ(51,"div",9),e.TgZ(52,"div",10),e._uU(53,"0.00$"),e.qZA(),e.TgZ(54,"div",10),e._uU(55,"1"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",7),e.TgZ(57,"div",8),e.TgZ(58,"p"),e._uU(59,"En attente"),e.qZA(),e.qZA(),e.TgZ(60,"div",9),e.TgZ(61,"div",10),e._uU(62,"0.00$"),e.qZA(),e.TgZ(63,"div",10),e._uU(64,"1"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"p"),e._uU(66,"\xa0"),e.qZA(),e.TgZ(67,"div",11),e.TgZ(68,"a",12),e._UZ(69,"i",13),e._uU(70," Impression rapport"),e.qZA(),e.TgZ(71,"a",14),e._UZ(72,"i",15),e._uU(73," Export rapport"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"div",16),e.TgZ(75,"div",17),e.TgZ(76,"span"),e._uU(77,"Finance"),e.qZA(),e.TgZ(78,"span"),e._uU(79,"Paiements"),e.qZA(),e.qZA(),e.TgZ(80,"div",18),e.TgZ(81,"div",19),e.TgZ(82,"nav",20),e.TgZ(83,"a",21),e._uU(84,"Journaux "),e.qZA(),e.TgZ(85,"a",21),e._uU(86,"Apurement"),e.qZA(),e.TgZ(87,"a",21),e._uU(88,"Apurement"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(89,"div"),e._UZ(90,"router-outlet"),e.qZA(),e.qZA(),e._UZ(91,"div",22),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.hij("",e.xi3(10,7,2e3,".2-2")," CDF"),e.xp6(8),e.hij("",e.xi3(18,10,2e3,".2-2")," CDF"),e.xp6(8),e.hij("",e.xi3(26,13,0,".2-2"),"$"),e.xp6(3),e.Oqu(0),e.xp6(55),e.Q6J("routerLink",e.DdM(16,ve)),e.xp6(2),e.Q6J("routerLink",e.DdM(17,ee)),e.xp6(2),e.Q6J("routerLink",e.DdM(18,ee)))},directives:[C.yS,C.Od,C.lC],pipes:[f.JJ],styles:[""]}),a})(),_e=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-banks"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"banks works!"),e.qZA())},styles:[""]}),a})(),Ae=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-finances"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[C.lC],styles:[""]}),a})();var $=c(6763),s=c(3679),Z=c(2238),b=c(6738),v=c(473),m=c(2340),S=c(4324),Q=c(2522),R=c(6627);function Te(a,u){if(1&a&&(e.TgZ(0,"div",12),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",13),e._uU(5),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(null==t.error?null:t.error.error),e.xp6(3),e.hij(" ",null==t.error?null:t.error.description," ")}}function xe(a,u){if(1&a&&(e.ynx(0),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e.BQk()),2&a){const t=e.oxw();e.xp6(2),e.lnq(" ",null==t.item||null==t.item.createdBy?null:t.item.createdBy.nom," ",null==t.item||null==t.item.createdBy?null:t.item.createdBy.prenom," (",null==t.item||null==t.item.createdBy?null:t.item.createdBy.phone,")")}}function qe(a,u){if(1&a&&(e.ynx(0),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e.BQk()),2&a){const t=e.oxw();e.xp6(2),e.hij(" ",null==t.item?null:t.item.executor," ")}}function Ce(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.item||null==t.item.ordonnancement?null:t.item.ordonnancement.refDoc,"")}}function be(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.item||null==t.item.taxation?null:t.item.taxation.refDoc,"")}}function Ue(a,u){1&a&&(e.TgZ(0,"button",14),e._UZ(1,"i",15),e._uU(2," Annuler "),e.qZA())}function Ne(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.print(i.item)}),e._UZ(1,"i",17),e._uU(2," Imprimer "),e.qZA()}}let ye=(()=>{class a{constructor(t,n,i){this.data=t,this.dialog=n,this.printMan=i,this.hasError=!1,this.showPrint=!0}ngOnInit(){this.item=this.data.data}onClose(){this.dialog.close()}print(t){t&&this.printMan.printPaymentFactureDuplicata(t,t.ordonnancement)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Z.WI),e.Y36(Z.so),e.Y36(S.$))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payment-detail"]],decls:80,vars:42,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],[1,"h-100"],["class","alert alert-danger ",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"mb-3","font-weight-bold"],[4,"ngIf"],[1,"fa","fa-clock"],["class","btn btn-indigo btn-with-icon ","type","button",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","button",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],["type","button",1,"btn","btn-indigo","btn-with-icon"],[1,"fa","fa-refresh"],["type","button",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"fa","fa-print"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"h1",0),e.TgZ(2,"mat-toolbar-row"),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",1),e.NdJ("click",function(){return n.onClose()}),e._uU(6," close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-content",2),e.YNc(8,Te,6,2,"div",3),e.TgZ(9,"div",4),e.TgZ(10,"div",5),e.TgZ(11,"div",6),e._UZ(12,"div",7),e.TgZ(13,"div"),e._uU(14," Montant : "),e.TgZ(15,"strong"),e._uU(16),e.ALo(17,"number"),e.ALo(18,"number"),e.qZA(),e.qZA(),e.TgZ(19,"div"),e._uU(20," Devise de paiement : "),e.TgZ(21,"strong"),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div"),e._uU(24," Date valeur : "),e.TgZ(25,"strong"),e._uU(26),e.ALo(27,"date"),e.qZA(),e.qZA(),e.TgZ(28,"div"),e._uU(29," Date op\xe9ration : "),e.TgZ(30,"strong"),e._uU(31),e.ALo(32,"date"),e.qZA(),e.qZA(),e.TgZ(33,"div"),e._uU(34," Payeur : "),e.TgZ(35,"strong"),e._uU(36),e.qZA(),e.qZA(),e.TgZ(37,"div"),e._uU(38," Mode : "),e.TgZ(39,"strong"),e._uU(40),e.qZA(),e.qZA(),e.TgZ(41,"div"),e._uU(42,"Operateur : "),e.TgZ(43,"strong"),e._uU(44),e.qZA(),e.qZA(),e.TgZ(45,"div"),e._uU(46,"Utilisateur : "),e.YNc(47,xe,3,3,"ng-container",8),e.YNc(48,qe,3,1,"ng-container",8),e.qZA(),e.TgZ(49,"div"),e._uU(50,"Destination : "),e.TgZ(51,"strong"),e._uU(52),e.qZA(),e.qZA(),e.TgZ(53,"div"),e._uU(54,"Statut : "),e.TgZ(55,"strong"),e._uU(56),e.qZA(),e.qZA(),e.TgZ(57,"div"),e._uU(58,"Motif : "),e.TgZ(59,"strong"),e._uU(60),e.qZA(),e.qZA(),e.TgZ(61,"div"),e._uU(62,"Ref : "),e.YNc(63,Ce,2,1,"strong",8),e.YNc(64,be,2,1,"strong",8),e.qZA(),e.TgZ(65,"div"),e._uU(66," Taux du jour : "),e.TgZ(67,"strong"),e._uU(68),e.ALo(69,"number"),e.ALo(70,"number"),e.qZA(),e.qZA(),e.TgZ(71,"div"),e._uU(72,"Observation : "),e.TgZ(73,"strong"),e._UZ(74,"i",9),e._uU(75),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"mat-dialog-actions"),e.YNc(77,Ue,3,0,"button",10),e._uU(78,"\xa0 "),e.YNc(79,Ne,3,0,"button",11),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",n.data.title," "),e.xp6(4),e.Q6J("ngIf",1==n.hasError),e.xp6(8),e.AsE(" ",e.xi3(17,24,null==n.item?null:n.item.amount,".2-2"),"$ | ",e.xi3(18,27,null==n.item?null:n.item.amountCdf,".2-2")," CDF"),e.xp6(6),e.hij(" ",null==n.item?null:n.item.devise,"$ "),e.xp6(4),e.hij(" ",e.xi3(27,30,null==n.item?null:n.item.dateValue,"medium")," CDF"),e.xp6(5),e.hij(" ",e.xi3(32,33,null==n.item?null:n.item.dateOperation,"medium"),"$"),e.xp6(5),e.AsE(" ",null==n.item?null:n.item.payer," | ",null==n.item?null:n.item.payerAccount,""),e.xp6(4),e.hij(" ",null==n.item?null:n.item.mode,""),e.xp6(4),e.hij(" ",null==n.item||null==n.item.operateur?null:n.item.operateur.denomination,""),e.xp6(3),e.Q6J("ngIf",null==n.item?null:n.item.createdBy),e.xp6(1),e.Q6J("ngIf",!(null!=n.item&&n.item.createdBy)),e.xp6(4),e.AsE(" ",null==n.item||null==n.item.accountTo?null:n.item.accountTo.num," (",null==n.item||null==n.item.accountTo?null:n.item.accountTo.devise,")"),e.xp6(4),e.hij(" ",null==n.item?null:n.item.status,""),e.xp6(4),e.hij(" ",null==n.item?null:n.item.motif,""),e.xp6(3),e.Q6J("ngIf",null!=(null==n.item?null:n.item.ordonnancement)),e.xp6(1),e.Q6J("ngIf",null!=(null==n.item?null:n.item.ordonnancement)),e.xp6(4),e.AsE("",e.xi3(69,36,1,".2-2")," $ = ",e.xi3(70,39,null==n.item?null:n.item.taux,".2-2")," CDF "),e.xp6(7),e.hij(" ",null==n.item?null:n.item.obs,""),e.xp6(2),e.Q6J("ngIf","CANCEL"!=(null==n.item?null:n.item.status)),e.xp6(2),e.Q6J("ngIf",n.showPrint))},directives:[Z.uh,Q.rD,R.Hw,Z.xY,f.O5,Z.H8],pipes:[f.JJ,f.uU],styles:[""]}),a})();var M=c(5917),De=c(2298),Pe=c(8307),ne=c(9761),ie=c(3190),Ie=c(197),Ee=c(5304),Se=c(7546),ae=c(6461),w=c(5647),B=c(877),F=c(8548),j=c(9731),_=c(9949),A=c(3356),O=c(5704),oe=c(6623),re=c(5733),Me=c(8380);class H{constructor(){this.devise=y.CDF,this.amount=0,this.obs="",this.payer="",this.noteCode="",this.payerAccount="",this.taux=0}}class se extends H{constructor(){super(...arguments),this.mode=U.MOBILE}}class le extends H{constructor(){super(...arguments),this.mode=U.CASH}}class we extends H{constructor(){super(...arguments),this.mode=U.CREDIT_CARD}}var y=(()=>{return(a=y||(y={})).CDF="CDF",a.USD="USD",y;var a})(),U=(()=>{return(a=U||(U={})).MOBILE="MOBILE",a.CASH="CASH",a.BANK="BANK",a.CREDIT_CARD="CREDIT_CARD",a.PAYPAL="PAYPAL",U;var a})(),N=(()=>{return(a=N||(N={})).PENDING="PENDING",a.CANCEL="CANCEL",a.VALIDED="VALIDED",N;var a})();class Fe{constructor(){this.PayType="vodacom",this.Amount="550",this.Currency=y.CDF,this.Telephone="0822385571",this.MerchantID="6acf06e2174d44dfa21407c155e1e174",this.MerchantPassword="cf46e65f0cf84266b1fe58f84d44b9b1",this.Language="fr",this.Reference="00038484",this.Accepturl="http://localhost",this.Cancelurl="http://localhost",this.Declineurl="http://localhost",this.NotifyURL="http://localhost"}}var ue=c(1841),D=c(1293),ce=c(193),z=c(8939),de=c(5466),Oe=c(1397),ge=c(4570),P=c(7538),Je=c(5430),Ye=c(2596),Le=c(3071),ke=c(1533),$e=c(9630),he=c(1602),J=c(7832),Y=c(2613),x=c(8295),L=c(9983),V=c(1554),X=c(2458),I=c(7441);const Qe=["stepper"],Re=["canvas"],Be=["inputRole"];function je(a,u){if(1&a&&(e.TgZ(0,"div",38),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",39),e._uU(5),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(null==t.erro?null:t.erro.error),e.xp6(3),e.hij(" ",null==t.erro?null:t.erro.description," ")}}function He(a,u){1&a&&e._uU(0,"Mode de payment ")}function ze(a,u){1&a&&e._uU(0,"Info sur le paiement")}function Ve(a,u){if(1&a&&(e.ynx(0),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.contribuable," ",t.prenom," "),e.xp6(2),e.hij("(",t.nuc,") "),e.xp6(1),e.hij("| ",t.type," ")}}function Xe(a,u){if(1&a&&(e.ynx(0),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.raisonSociale," "),e.xp6(2),e.hij("(",t.nuc,") "),e.xp6(1),e.hij("|| ",t.type," ")}}function Ge(a,u){if(1&a&&(e.TgZ(0,"mat-option",40),e.TgZ(1,"div",41),e.TgZ(2,"div",42),e._UZ(3,"img",43),e.qZA(),e.TgZ(4,"div",44),e.YNc(5,Ve,5,4,"ng-container",34),e.YNc(6,Xe,5,3,"ng-container",34),e.qZA(),e.qZA(),e.qZA()),2&a){const t=u.$implicit,n=e.oxw();e.Q6J("value",t),e.xp6(3),e.Q6J("src",n.imgPath+""+t.profile+"."+t.profileExt,e.LSH),e.xp6(2),e.Q6J("ngIf","P"==t.type),e.xp6(1),e.Q6J("ngIf","M"==t.type)}}function We(a,u){if(1&a&&(e.ynx(0),e._UZ(1,"img",49,50),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.imgPath+""+(null==t.selectedNote?null:t.selectedNote.profile)+"."+(null==t.selectedNote?null:t.selectedNote.profileExt),e.LSH)}}function Ke(a,u){1&a&&(e.ynx(0),e._UZ(1,"img",51),e.BQk())}function et(a,u){if(1&a&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.AsE("",null==t.selectedNote?null:t.selectedNote.contribuable," ",null==t.selectedNote?null:t.selectedNote.prenom," (P)")}}function tt(a,u){if(1&a&&(e.TgZ(0,"h2"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij("",null==t.selectedNote?null:t.selectedNote.raisonSociale," "),e.xp6(2),e.hij(" ",null==t.selectedNote?null:t.selectedNote.contribuable," (M) ")}}function nt(a,u){if(1&a&&(e.TgZ(0,"div",45),e.TgZ(1,"div",46),e.TgZ(2,"div",47),e.YNc(3,We,3,1,"ng-container",34),e.YNc(4,Ke,2,0,"ng-container",34),e.qZA(),e.TgZ(5,"div"),e.YNc(6,et,2,2,"h2",34),e.YNc(7,tt,4,2,"h2",34),e.TgZ(8,"h3"),e._UZ(9,"i",48),e._uU(10),e.qZA(),e.TgZ(11,"p"),e.TgZ(12,"strong"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"p"),e.TgZ(15,"strong"),e._uU(16),e.ALo(17,"number"),e.ALo(18,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",null!=t.selectedNote),e.xp6(1),e.Q6J("ngIf",!(null!=t.selectedImage&&null!=t.selectedImage.data)),e.xp6(2),e.Q6J("ngIf","P"==(null==t.selectedNote?null:t.selectedNote.type)),e.xp6(1),e.Q6J("ngIf","M"==(null==t.selectedNote?null:t.selectedNote.type)),e.xp6(3),e.hij(" ",null==t.selectedNote?null:t.selectedNote.nuc,""),e.xp6(3),e.hij(" Acte : ",null==t.selectedNote?null:t.selectedNote.acte,""),e.xp6(3),e.AsE(" Montant : ",e.xi3(17,8,null==t.selectedNote?null:t.selectedNote.amount,".2-2"),"USD | ",e.xi3(18,11,null==t.selectedNote?null:t.selectedNote.amountCdf,".2-2"),"CDF ")}}function it(a,u){if(1&a&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&a){const t=u.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.num,"(",t.devise,") ")}}function at(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"form",22),e.TgZ(1,"div",52),e.TgZ(2,"div",53),e.TgZ(3,"div"),e._uU(4,"Nous acceptions : "),e.qZA(),e._UZ(5,"img",54),e.qZA(),e.TgZ(6,"div",32),e.TgZ(7,"div",7),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",55),e.TgZ(10,"mat-label"),e._uU(11,"Num\xe9ro de phone mobile "),e.qZA(),e.TgZ(12,"input",56),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dMobile.payerAccount=i}),e.qZA(),e.TgZ(13,"mat-icon",57),e._uU(14,"phone"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",7),e.TgZ(16,"div",58),e.TgZ(17,"mat-form-field",55),e.TgZ(18,"mat-label"),e._uU(19,"Montant"),e.qZA(),e.TgZ(20,"input",59),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dMobile.amount=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",60),e.TgZ(22,"mat-form-field",55),e.TgZ(23,"mat-label"),e._uU(24,"Devise"),e.qZA(),e.TgZ(25,"mat-select",61),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dMobile.devise=i})("valueChange",function(i){return e.CHM(t),e.oxw().onDeviseChanged(i)}),e.TgZ(26,"mat-option",62),e._uU(27,"CDF"),e.qZA(),e.TgZ(28,"mat-option",63),e._uU(29,"USD"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",7),e.TgZ(31,"div",6),e.TgZ(32,"mat-form-field",55),e.TgZ(33,"mat-label"),e._uU(34,"Num\xe9ro destinataire "),e.qZA(),e.TgZ(35,"mat-select",64),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dMobile.accountTo=i}),e.YNc(36,it,2,3,"mat-option",27),e.qZA(),e.TgZ(37,"mat-icon",57),e._uU(38,"phone"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.formMobile),e.xp6(12),e.Q6J("ngModel",t.dMobile.payerAccount),e.xp6(8),e.Q6J("ngModel",t.dMobile.amount),e.xp6(5),e.Q6J("ngModel",t.dMobile.devise),e.xp6(10),e.Q6J("ngModel",t.dMobile.accountTo),e.xp6(1),e.Q6J("ngForOf",t.getAccountFilter("MOBILE"))}}function ot(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"form",22),e.TgZ(1,"div",7),e.TgZ(2,"div",32),e.TgZ(3,"div",7),e.TgZ(4,"div",6),e.TgZ(5,"div",7),e.TgZ(6,"div",58),e.TgZ(7,"mat-form-field",55),e.TgZ(8,"mat-label"),e._uU(9,"Montant"),e.qZA(),e.TgZ(10,"input",65),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCash.amount=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",60),e.TgZ(12,"mat-form-field",55),e.TgZ(13,"mat-label"),e._uU(14,"Devise"),e.qZA(),e.TgZ(15,"mat-select",61),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCash.devise=i})("valueChange",function(i){return e.CHM(t),e.oxw().onDeviseChanged(i)}),e.TgZ(16,"mat-option",62),e._uU(17,"CDF"),e.qZA(),e.TgZ(18,"mat-option",63),e._uU(19,"USD"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"mat-form-field",55),e.TgZ(22,"mat-label"),e._uU(23,"Payeur"),e.qZA(),e.TgZ(24,"input",66),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCash.payer=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",6),e.TgZ(26,"mat-form-field",55),e.TgZ(27,"mat-label"),e._uU(28,"Observation"),e.qZA(),e.TgZ(29,"textarea",67),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCash.obs=i}),e._uU(30,"  "),e.qZA(),e.TgZ(31,"mat-icon",57),e._uU(32,"credit_card"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",32),e.TgZ(34,"div",7),e.TgZ(35,"div",53),e._UZ(36,"img",68),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.formCash),e.xp6(10),e.Q6J("ngModel",t.dCash.amount),e.xp6(5),e.Q6J("ngModel",t.dCash.devise),e.xp6(9),e.Q6J("ngModel",t.dCash.payer),e.xp6(5),e.Q6J("ngModel",t.dCash.obs)}}function rt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"form",22),e.TgZ(1,"div",7),e.TgZ(2,"div",32),e.TgZ(3,"div",7),e.TgZ(4,"div",58),e.TgZ(5,"mat-form-field",55),e.TgZ(6,"mat-label"),e._uU(7,"Montant"),e.qZA(),e.TgZ(8,"input",65),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCreditCard.amount=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",60),e.TgZ(10,"mat-form-field",55),e.TgZ(11,"mat-label"),e._uU(12,"Devise"),e.qZA(),e.TgZ(13,"mat-select",61),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCreditCard.devise=i})("valueChange",function(i){return e.CHM(t),e.oxw().onDeviseChanged(i)}),e.TgZ(14,"mat-option",62),e._uU(15,"CDF"),e.qZA(),e.TgZ(16,"mat-option",63),e._uU(17,"USD"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"mat-form-field",55),e.TgZ(20,"mat-label"),e._uU(21,"Num\xe9ro account"),e.qZA(),e.TgZ(22,"input",69),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCreditCard.payer=i}),e.qZA(),e.TgZ(23,"mat-icon",57),e._uU(24,"credit_card"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",70),e.TgZ(26,"mat-form-field",55),e.TgZ(27,"mat-label"),e._uU(28,"Date d'expiration"),e.qZA(),e.TgZ(29,"input",71),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCreditCard.expiredAt=i}),e.qZA(),e.TgZ(30,"mat-icon",57),e._uU(31,"date_range"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",72),e.TgZ(33,"mat-form-field",55),e.TgZ(34,"mat-label"),e._uU(35,"CVC"),e.qZA(),e.TgZ(36,"input",73),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dCreditCard.cvc=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",6),e.TgZ(38,"mat-form-field",55),e.TgZ(39,"mat-label"),e._uU(40,"Noms du Propri\xe9taire"),e.qZA(),e.TgZ(41,"input",66),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dMobile.payer=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",32),e.TgZ(43,"div",7),e.TgZ(44,"div",53),e.TgZ(45,"p"),e._uU(46,"Payment cash: "),e.qZA(),e._UZ(47,"img",74),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.formCreditCard),e.xp6(8),e.Q6J("ngModel",t.dCreditCard.amount),e.xp6(5),e.Q6J("ngModel",t.dCreditCard.devise),e.xp6(9),e.Q6J("ngModel",t.dCreditCard.payer),e.xp6(7),e.Q6J("ngModel",t.dCreditCard.expiredAt),e.xp6(7),e.Q6J("ngModel",t.dCreditCard.cvc),e.xp6(5),e.Q6J("ngModel",t.dMobile.payer)}}function st(a,u){1&a&&e._uU(0,"Recapitulatif ")}function lt(a,u){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(t.dMobile.payer)}}function ut(a,u){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.hij("",t.dCash.payer," ")}}function ct(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",t.dMobile.amount," ")}}function dt(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",t.dCash.amount," ")}}function gt(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",t.dCreditCard.amount," ")}}function ht(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",t.dMobile.devise," ")}}function mt(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",t.dCash.devise," ")}}function pt(a,u){if(1&a&&(e.TgZ(0,"strong"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",t.dCreditCard.devise," ")}}function Zt(a,u){1&a&&e._uU(0,"Finalisation")}function ft(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",77),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).print()}),e.TgZ(1,"a",78),e._UZ(2,"i",81),e._uU(3," Impriner"),e.qZA(),e.qZA()}}function vt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",75),e.TgZ(2,"mat-icon",76),e._uU(3,"check_circle_outline"),e.qZA(),e.TgZ(4,"div",75),e.TgZ(5,"h1"),e._uU(6,"Success"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Operation reussie avec success"),e.qZA(),e.TgZ(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12,"Votre paiement est effectu\xe9 avec success. Veuillez imprimer le recu. "),e.qZA(),e.TgZ(13,"h2"),e._uU(14),e.qZA(),e.TgZ(15,"div",7),e.TgZ(16,"div",77),e.NdJ("click",function(){return e.CHM(t),e.oxw().onView()}),e.TgZ(17,"a",78),e._uU(18,"Voir d\xe9tail"),e.qZA(),e.qZA(),e.YNc(19,ft,4,0,"div",79),e.TgZ(20,"div",77),e.NdJ("click",function(){return e.CHM(t),e.oxw().init()}),e.TgZ(21,"a",80),e._uU(22,"Nouveau paiement"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(10),e.Oqu(t.refDoc),e.xp6(4),e.Oqu(t.refDoc),e.xp6(5),e.Q6J("ngIf",1==t.couldPrint)}}function _t(a,u){if(1&a&&(e.TgZ(0,"div",6),e.TgZ(1,"div",75),e.TgZ(2,"mat-icon",82),e._uU(3,"block"),e.qZA(),e.TgZ(4,"div",75),e.TgZ(5,"h1"),e._uU(6,"Erreur"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Operation \xe9chou\xe9e "),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(10),e.hij(" ",null==t.erro?null:t.erro.description," ")}}function At(a,u){1&a&&(e.TgZ(0,"div",6),e.TgZ(1,"div",75),e._UZ(2,"img",83),e.TgZ(3,"div",75),e.TgZ(4,"h1"),e._uU(5,"Patientez"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Operation en cours "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}function Tt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){return e.CHM(t),e.oxw().prev()}),e._UZ(1,"i",85),e._uU(2," Prev "),e.qZA()}}function xt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){return e.CHM(t),e.oxw().nexts()}),e._UZ(1,"i",86),e._uU(2),e.qZA()}if(2&a){const t=e.oxw();e.xp6(2),e.hij(" ",t.btnNextLabel," ")}}let qt=(()=>{class a{constructor(t,n,i,o,r,l,d,g,h,p,q,E,ln,un,cn,dn,gn,hn){this.http=t,this.ordServ=n,this.paymentService=i,this.pdfMan=o,this.configServ=r,this.appStor=l,this.cartSert=d,this.taxServ=g,this.auth=h,this.contSrv=p,this.configService=q,this.data=E,this.regionalService=ln,this.userServ=un,this.assietteConf=cn,this.agentMan=dn,this.dialogServ=gn,this.dialogMan=hn,this.selectModel="MOBILE",this.taxePrices=[],this.event=new e.vpe,this.imgPath="",this.waitingPayment="0",this.currentPage=0,this.refDoc="",this.separatorKeysCodes=[ae.K5,ae.OC],this.dCash=new le,this.dMobile=new se,this.dCreditCard=new we,this.hasError=!1,this.logoUrl="",this.couldSelectMultiRoles=!0,this.categories=[],this.dataf=new j.sw,this.moralOrPhysic=!1,this.isEnded=0,this.isShown=!1,this.couldSave=!0,this.isEditable=!1,this.couldBack=!1,this.btnNextLabel="Suivant",this.townOrTerritory=!0,this.secteurOrChefferie=!0,this.regies=[],this.prices=[],this.centers=[],this.provinces=[],this.countries=[],this.towns=[],this.communes=[],this.secteurs=[],this.actes=[],this.taxes=[],this.territoires=[],this.chefferies=[],this.roles=[],this.access=[w.P.WEB_ONLY,w.P.MOBILE_ONLY,w.P.API,w.P.ALL],this.selectedRoles=[],this.selectable=!0,this.removable=!0,this.errors=[],this.civilities=["CELIBATAIRE","MARIE","VEUF","DIVORCE"],this.typeIdentities=[F.c.ELECTOR,F.c.PASSPORT,F.c.DRIVING_CARD,F.c.OTHER],this.formeJuridiques=[],this.subs=[],this.properties=[],this.accounts=[],this.couldPrint=!1}next(t){let n=new A.QY;if(n.taxe=new O.sO,0==(t=t).status)return this.hasError=!0,void(this.erro=new _.D("Erreur de saisie","Veuillez s\xe9lectionner le bien correspondant pour cette declaration"));switch(n.taxe=t.prices[0],n.taxe.taxe={id:this.selectedNature.id},n.prices=t.taxe.prices,n.tax=t.taxe.taxe,n.montant=n.taxe.montant,t.nature){case"BAIL":n.bailContexts.push(t.data);break;case"VEHICULE ":n.bien=t.data}this.cartSert.items.length>0?(n.checked=!1,n.order=A.Mg.AUXILIARY):(n.checked=!0,n.order=A.Mg.PRINCIPAL),this.cartSert.addTaxe(n),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}error(t){}complete(){console.log("complete context")}ngOnDestroy(){this.subs=[]}ngOnInit(){var t,n,i,o,r,l,d;if(this.appStor.exist("taux")?(this.taux=this.appStor.getJson("taux"),this.cartSert.taux=this.taux):this.configServ.getCurrentTaux(null===(n=null===(t=this.auth.getSession().user)||void 0===t?void 0:t.regie)||void 0===n?void 0:n.id).subscribe(g=>{this.taux=g,this.cartSert.taux=this.taux}),this.selectedTaxer=this.cartSert.taxer,this.subs.push(this.event.subscribe(this)),this.acteForm=new s.NI,this.taxeForm=new s.NI,this.imgPath=m.N.imgPath,this.contribuableControl=new s.NI(""),this.contribuableControl.valueChanges.pipe((0,Pe.b)(g=>{}),(0,ne.O)(""),(0,ie.w)(g=>{var h,p;return g.length>2?this.ordServ.searchByfRgie(g,null===(p=null===(h=this.auth.getSession().user)||void 0===h?void 0:h.regie)||void 0===p?void 0:p.id).pipe((0,Ie.x)(()=>{})):(0,M.of)([])}),(0,Ee.K)(g=>"")).subscribe(g=>{this.notes=(0,M.of)(g)}),this.formMobile=new s.cw({phone:new s.NI("",[s.kI.required]),amount:new s.NI("",[s.kI.required]),devise:new s.NI("",[s.kI.required]),dest:new s.NI("",[s.kI.required])}),this.formCash=new s.cw({owner:new s.NI("",[s.kI.required]),amount:new s.NI("",[s.kI.required]),obs:new s.NI("",[]),devise:new s.NI("",[s.kI.required])}),this.formCreditCard=new s.cw({account:new s.NI("",[s.kI.required]),expiredAt:new s.NI("",[s.kI.required]),cvc:new s.NI("",[s.kI.required]),owner:new s.NI("",[s.kI.required]),devise:new s.NI("",[s.kI.required]),amount:new s.NI("",[s.kI.required])}),this.formPaypal=new s.cw({account:new s.NI("",[s.kI.required])}),this.regieFilter=new s.NI,this.formDoc=new s.cw({typeidentity:new s.NI("",[s.kI.required]),identity:new s.NI("",[s.kI.required]),rccm:new s.NI("",[]),idnational:new s.NI("",[]),numimpot:new s.NI("",[])}),this.dataf.typePersonne="P",this.form=new s.cw({nom:new s.NI("",[s.kI.required]),prenom:new s.NI("",[s.kI.required]),postnom:new s.NI("",[]),dateNaissance:new s.NI("",[]),sexe:new s.NI("",[]),civility:new s.NI("",[]),profesion:new s.NI("",[]),raisonSociale:new s.NI("",[]),nationality:new s.NI("",[s.kI.required]),forme:new s.NI("",[]),email:new s.NI("",[s.kI.email]),phone:new s.NI("",[s.kI.required])}),this.form=new s.cw({accountTo:new s.NI("",[s.kI.required]),devise:new s.NI("",[s.kI.required]),amount:new s.NI("",[s.kI.required]),payer:new s.NI("",[s.kI.required]),payerAccount:new s.NI("",[])}),this.adressForm=new s.cw({province:new s.NI("",[s.kI.required]),town:new s.NI,territoire:new s.NI,num:new s.NI,avenue:new s.NI,quartier:new s.NI,commune:new s.NI,secteur:new s.NI,fax:new s.NI,url:new s.NI,website:new s.NI,chefferie:new s.NI}),this.subs.push(this.configService.getForm().subscribe(g=>{this.formeJuridiques=g})),this.subs.push(this.regionalService.getCountries().subscribe(g=>{this.countries=g,this.subs.push(this.regionalService.getProvinces().subscribe(h=>{this.provinces=h}))})),this.data.action)switch(this.data.action){case"EDIT":{this.isEditable=!0;let g=this.data.data;this.dataf=this.data.data,this.dataf.agent=void 0,this.dataf.rccmDoc=void 0,this.dataf.numImpotDoc=void 0,this.dataf.idNationalDoc=void 0,this.dataf.identite=void 0,this.dataf.photo=void 0,(null===(i=g.adresse)||void 0===i?void 0:i.commune)?(this.dataf.adresse.idcom=g.adresse.commune.id,this.dataf.adresse.typeEmplacement=B.a.COMUNE):(null===(o=g.adresse)||void 0===o?void 0:o.secteur)?(this.dataf.adresse.idcom=g.adresse.secteur.id,this.dataf.adresse.typeEmplacement=B.a.SECTEUR):(null===(r=g.adresse)||void 0===r?void 0:r.chefferie)&&(this.dataf.adresse.idcom=g.adresse.chefferie.id,this.dataf.adresse.typeEmplacement=B.a.CHEFFERIE),this.dataf.adresse.province=null===(l=g.adresse)||void 0===l?void 0:l.province,this.dataf.nationality=g.nationality.id,this.dataf.formeJuridique=null===(d=g.formeJuridique)||void 0===d?void 0:d.id,this.moralOrPhysic="P"!=g.typePersonne}}}valid(){}nexts(){var t;if("1"==this.waitingPayment)return;if(-1===this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.erro=new _.D("Enregistrement en cours","Veuillez patienter, votre op\xe9ration est en cours"));this.hasError=!1;let n=null===(t=this.stepper)||void 0===t?void 0:t.selectedIndex;switch(this.btnNextLabel=1==n?"Enregistrer":"Suivant",this.hasError=!1,n){case 0:this.selectModel?(this.currentPage++,this.isShown=!0,this.couldBack=!0):(this.hasError=!0,this.isShown=!1,this.erro=new _.D("Erreur de saisie","Veuillez corriger certains champs"));break;case 1:if(this.selectModel){switch(this.selectModel){case"MOBILE":if(!this.formMobile.valid)return;break;case"CASH":if(!this.formCash.valid)return;break;case"CREDITCARD":if(!this.formCreditCard.valid)return}this.currentPage++,this.isShown=!0,this.couldBack=!0}else this.hasError=!0,this.isShown=!1,this.erro=new _.D("Erreur de saisie","Veuillez corriger certains champs");break;case 2:switch(this.selectModel){case"CASH":this.currentPage=3,this.couldBack=!1,this.couldSave=!1,this.hasError=!1,this.isEnded=-1,this.paymentService.initCashPayment(this.dCash).subscribe(i=>{this.isEnded=1,this.couldBack=!0,this.refDoc=i.code,this.successPayment=i},i=>{this.hasError=!0,this.isEnded=0,this.erro=new _.D("Erreur de serveur",i.error),this.couldBack=!0,this.couldSave=!1});break;case"MOBILE":this.currentPage=3,this.couldBack=!1,this.couldSave=!1,this.hasError=!1,this.isEnded=-1,new Fe,this.paymentService.initCashPayment(this.dMobile).subscribe(o=>{this.isEnded=1,this.couldBack=!0,this.refDoc=o.code,this.successPayment=o,o.status==N.PENDING&&(this.couldPrint=!0)},o=>{this.hasError=!0,this.isEnded=0,this.erro=new _.D("Erreur de serveur",o.error),this.couldBack=!0,this.couldSave=!1})}}this.stepper.selectedIndex=this.currentPage}prev(){var t,n,i,o;if(3==(null===(t=this.stepper)||void 0===t?void 0:t.selectedIndex)&&-1==this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.erro=new _.D("Enregistrement en cours","Veuillez patienter votre op\xe9ration est en cours"));if(this.hasError=!1,3==(null===(n=this.stepper)||void 0===n?void 0:n.selectedIndex)&&1==this.isEnded)return this.hasError=!0,this.isShown=!1,this.erro=new _.D("Enregistrement du nouvel acte","Veuillez enregistrer un nouvel acte si il y en a autres"),this.stepper.selectedIndex=0,this.currentPage=0,this.couldSave=!0,this.couldBack=!1,void(this.btnNextLabel="Suivant");this.hasError=!1,3==(null===(i=this.stepper)||void 0===i?void 0:i.selectedIndex)&&0==this.isEnded&&(this.couldBack=!0,this.couldSave=!0);let r=null===(o=this.stepper)||void 0===o?void 0:o.selectedIndex;this.btnNextLabel=3==r?"Enregistrer":"Suivant",this.currentPage=r,this.currentPage--,this.stepper.selectedIndex=this.currentPage}fileImageEvent(t){this.hasError=!1,t.target.files.length>0&&this.convertFile(t.target.files[0])}convertFile(t){const n=new De.t(1),i=new FileReader;return i.readAsDataURL(t),i.onload=o=>{try{let r=new Image;r.src=o.target.result,r.onload=l=>{var d;null===(d=this.ctx)||void 0===d||d.drawImage(r,0,0,120,120);let q=Me.b$.Base64Compile(this.canvas.nativeElement.toDataURL());this.selectedImage=new Se.$(q[0],q[1]),this.logoUrl=o.target.result}}catch(r){this.erro=new _.D,this.erro.error=r.message,this.erro.description="Veuillez s\xe9lectionner l'image qui reste le format",this.hasError=!0}},n}onView(){}init(){this.currentPage=0,this.couldPrint=!0,this.dMobile=new se,this.dCash=new le,this.stepper.selectedIndex=this.currentPage,this.dataf=new j.sw,this.cartSert.clear()}modelChanged(t){const i=new Date(Date.parse(t)).toLocaleString().split(" ");this.dataf.dateNaissance=i[0],console.log(i)}showTaxer(t){return t?"P"==t.type?t.refDoc+" "+t.contribuable+" "+t.prenom+"("+t.nuc+")":t.refDoc+" "+t.raisonSociale+"("+t.nuc+")":""}onContribuableChanged(t){}onSelectTaxer(t){this.selectedNote=t.option.value,this.dMobile.amount=this.selectedNote.amountCdf,this.dMobile.note=this.selectedNote.id,this.dMobile.noteCode=this.selectedNote.refDoc,this.dCash.note=this.selectedNote.id,this.dCash.noteCode=this.selectedNote.refDoc,this.dCash.taux=this.selectedNote.taux,this.dMobile.taux=this.selectedNote.taux,this.dMobile.payer="M"==this.selectedNote.type?this.selectedNote.raisonSociale:this.selectedNote.contribuable+" "+this.selectedNote.prenom,this.dCash.amount=this.selectedNote.amountCdf,this.dCash.payer="M"==this.selectedNote.type?this.selectedNote.raisonSociale:this.selectedNote.contribuable+" "+this.selectedNote.prenom,this.ordServ.getWhereToPay(this.selectedNote.id).subscribe(n=>{n&&n.length>0&&(this.accounts=n[n.length-1].accounts)})}onSecteurChanged(t){this.acteForm.setValue(""),this.taxeForm.setValue(""),t>0&&this.subs.push(this.taxServ.fetchActeOfSecteur(t).subscribe(n=>{this.actes=n},n=>{this.hasError=!0,this.erro=new _.D("Erreur de connexion","Erreur de connexion, impossible de charger les secteurs")}))}onActeChanged(t){this.taxeForm.setValue(""),t>0&&this.subs.push(this.taxServ.fetchTaxesOfActe(t).subscribe(n=>{this.taxes=n,0==n.length&&(this.hasError=!0,this.erro=new _.D("Info","Aucune nature acte configur\xe9"))},n=>{this.hasError=!0,this.erro=new _.D("Erreur de connexion","Erreur de connexion, impossible de charger les secteurs")}))}onNatureChange(t){this.taxes&&0!=this.taxes.length?(this.selectedNature=this.taxes.filter((o,r)=>o.id==t)[0],this.taxePrices.filter((o,r)=>{var l;return(null===(l=o.taxe)||void 0===l?void 0:l.id)==t}),this.cartSert.items.filter(o=>{var r,l;return(null===(l=null===(r=o.taxe)||void 0===r?void 0:r.taxe)||void 0===l?void 0:l.id)==t}).length>0?console.log("iiiiii"):this.subs.push(this.taxServ.getPricesOfTaxeOfRegie(t,this.auth.getSession().user.regie.id).subscribe(o=>{var r,l;if(this.prices=o,0==o.length)return this.hasError=!0,void(this.erro=new _.D("Aucune configuration des taux relative \xe0 cette nature d'acte","Aucune configuration des taux relative \xe0 cette nature d'acte"));if(this.hasError=!1,null===(r=this.selectedNature)||void 0===r?void 0:r.codeinterne)switch(null===(l=this.selectedNature)||void 0===l?void 0:l.codeinterne){case"0001":this.taxePrices.push({taxe:this.selectedNature,prices:o,contrainte:"FONCIER"});break;case"0002":this.taxePrices.push({taxe:this.selectedNature,prices:o,contrainte:"BAIL"});break;case"0003":case"0004":this.taxePrices.push({taxe:this.selectedNature,prices:o,contrainte:"VEHICULE"});break;default:this.taxePrices.push({taxe:this.selectedNature,prices:o})}else this.taxePrices.push({taxe:this.selectedNature,prices:o});this.taxePrices=[...new Set(this.taxePrices)]},o=>{this.hasError=!0,this.erro=new _.D("","Erreur de connexion, Imposible de charger les taux")}))):this.dialogServ.open({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Boite de dialog Avertissement",message:"Taxes pas t\xe9l\xe9charg\xe9es",action:"SHOW"}})}calcul(){var t;if(this.selectedNature)if(this.cartSert.isInit()){let n=this.taxePrices.filter((o,r)=>{var l,d;return(null===(l=o.taxe)||void 0===l?void 0:l.id)==(null===(d=this.selectedNature)||void 0===d?void 0:d.id)}),i=this.taxePrices.filter((o,r)=>{var l,d;return(null===(l=o.taxe)||void 0===l?void 0:l.id)==(null===(d=this.selectedNature)||void 0===d?void 0:d.id)}).map((o,r)=>r);if(n.length>0){let o=this.cartSert.items.filter(r=>{var l,d,g;return(null===(d=null===(l=r.taxe)||void 0===l?void 0:l.taxe)||void 0===d?void 0:d.id)==(null===(g=this.selectedNature)||void 0===g?void 0:g.id)});if(n[i[0]].contrainte)switch(n[i[0]].contrainte){case"BAIL":this.dialogMan.open(re.Z,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Context de bail",message:"Veuillez remplir le context de bail",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(r=>{r&&r.status&&(r.taxe=n[i[0]],r.index=i[0],r.prices=n[i[0]].prices,r.nature="VEHICULE",this.event.emit(r))});break;case"VEHICULE":this.dialogMan.open(oe.O,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"S\xe9lection du v\xe9hicule",message:"Veuillez s\xe9lectionner le v\xe9hiculer \xe0 taxer",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(r=>{r&&r.status&&(r.taxe=n[i[0]],r.index=i[0],r.nature="VEHICULE",r.prices=n[i[0]].prices,this.event.emit(r))})}else if(o.length>0)console.log("Cette taxe est d\xe9j\xe0 dans la carte");else if(i){let r=new A.QY;r.taxe=new O.sO,r.checked=!1,r.order=A.Mg.AUXILIARY,r.taxe=this.prices[i[0]],r.taxe.taxe={id:this.selectedNature.id},r.prices=n[i[0]].prices,r.tax=n[i[0]].taxe,r.montant=r.taxe.montant,this.cartSert.addTaxe(r),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}}else console.log("taxes non s\xe9lectionn\xe9e ou prices non t\xe9l\xe9charger")}else{let n=new j.k;n.id=null===(t=this.selectedTaxer)||void 0===t?void 0:t.id,this.cartSert.init(n),this.cartSert.taxer=this.selectedTaxer;let i=this.taxePrices.filter((o,r)=>{var l,d;return(null===(l=o.taxe)||void 0===l?void 0:l.id)==(null===(d=this.selectedNature)||void 0===d?void 0:d.id)});if(i.length>0){let o=this.taxePrices.filter((r,l)=>{var d,g;return(null===(d=r.taxe)||void 0===d?void 0:d.id)==(null===(g=this.selectedNature)||void 0===g?void 0:g.id)}).map((r,l)=>l);if(i[o[0]].contrainte)switch(i[o[0]].contrainte){case"BAIL":this.dialogMan.open(re.Z,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Context de bail",message:"Veuillez remplir le context de bail",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(l=>{l&&l.status&&(l.taxe=i[o[0]],l.nature="BAIL",l.index=o[0],l.prices=i[o[0]].prices,this.event.emit(l))});break;case"VEHICULE":this.dialogMan.open(oe.O,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"S\xe9lection du v\xe9hicule",message:"Veuillez s\xe9lectionner le v\xe9hiculer \xe0 taxer",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(l=>{l&&l.status&&(l.taxe=i[o[0]],l.index=o[0],l.nature="VEHICULE",l.prices=i[o[0]].prices,this.event.emit(l))});break;default:let r=new A.QY;r.taxe=new O.sO,r.checked=!0,r.order=A.Mg.PRINCIPAL,r.taxe=this.prices[0],r.taxe.taxe={id:this.selectedNature.id},r.prices=i[0].prices,r.tax=i[0].taxe,r.montant=r.taxe.montant,this.cartSert.addTaxe(r),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}else{let r=new A.QY;r.taxe=new O.sO,r.checked=!0,r.order=A.Mg.PRINCIPAL,r.taxe=this.prices[0],r.taxe.taxe={id:this.selectedNature.id},r.prices=i[0].prices,r.tax=i[0].taxe,r.montant=r.taxe.montant,this.cartSert.addTaxe(r),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}}else console.log("taxe non s\xe9lectionner")}else this.dialogServ.open({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Boite de dialog Avertissement",message:"Taxes pas t\xe9l\xe9charg\xe9es",action:"SHOW"}})}onItemTaxeRemoved(t){this.cartSert.items.splice(t,1)}onTaxeQteChanged(t){t&&(this.cartSert.items[t.index].qte=t.quantite>0?t.quantite:1)}onTaxeBaseChanged(t){t&&(this.cartSert.items[t.index].baseCalcul=t.quantite>0?t.quantite:0)}print(){this.pdfMan.generateDI()}onStatusItemChange(t,n){if(t.status){for(let i=0;i<this.cartSert.items.length;i++)this.cartSert._items[i].order=A.Mg.AUXILIARY,this.cartSert._items[i].checked=!1;this.cartSert._items[n].order=A.Mg.PRINCIPAL,this.cartSert._items[n].checked=!0}}modeChanged(t){console.log(t),this.selectModel=t.value}getAccountFilter(t){let n=[];return this.accounts.forEach(i=>{var o;(null===(o=i.banque)||void 0===o?void 0:o.category)==t&&n.push(i)}),n}onDeviseChanged(t){var n,i,o,r,l,d;this.dCash.devise=t,this.dMobile.devise=t,this.dCreditCard.devise=t,"CDF"==t?(this.dCash.amount=null===(n=this.selectedNote)||void 0===n?void 0:n.amountCdf,this.dMobile.amount=null===(i=this.selectedNote)||void 0===i?void 0:i.amountCdf,this.dCreditCard.amount=null===(o=this.selectedNote)||void 0===o?void 0:o.amountCdf):(this.dCash.amount=null===(r=this.selectedNote)||void 0===r?void 0:r.amount,this.dMobile.amount=null===(l=this.selectedNote)||void 0===l?void 0:l.amount,this.dCreditCard.amount=null===(d=this.selectedNote)||void 0===d?void 0:d.amount)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ue.eN),e.Y36(D.H),e.Y36(ce.t),e.Y36(S.$),e.Y36(z.E),e.Y36(de.I),e.Y36(Oe.b),e.Y36(ge.K),e.Y36(P.u),e.Y36(Je.l),e.Y36(z.E),e.Y36(Z.WI),e.Y36(Ye.N),e.Y36(Le.K),e.Y36(ke.f),e.Y36($e.t),e.Y36(he.x),e.Y36(Z.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payment-form-dialog"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Qe,5),e.Gf(Re,7),e.Gf(Be,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.stepper=i.first),e.iGM(i=e.CRH())&&(n.canvas=i.first),e.iGM(i=e.CRH())&&(n.inputRole=i.first)}},inputs:{selectModel:"selectModel",dataf:"dataf",townOrTerritory:"townOrTerritory",secteurOrChefferie:"secteurOrChefferie"},decls:123,vars:47,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon","matDialogClose","",1,"close-btn"],["class","alert alert-danger ",4,"ngIf"],["stepper",""],["label","Step 1"],["matStepLabel",""],[1,"col-md-12"],[1,"row"],[1,"alert","alert-info"],[1,"col-md-12","d-flex","flex-column","align-items-center","justify-content-center"],["aria-label","",3,"ngModel","ngModelChange","change"],["value","MOBILE","labelPosition","before"],[1,"fa","fa-mobile"],["value","CREDITCARD","labelPosition","before"],[1,"fa","fa-credit-card"],["value","BANK","labelPosition","before"],[1,"fa","fa-bank"],["value","PAYPAL","labelPosition","before"],[1,"fa","fa-paypal"],["value","CASH","labelPosition","before"],[1,"fa","fa-money"],["label","Step 2"],[3,"formGroup"],["appearance","standard"],["type","text","matInput","","placeholder","Recherche...","value","","autocomplete","off",3,"formControl","matAutocomplete"],[1,"single-autocomplete",3,"displayWith","optionSelected"],["autoSearchContribuable","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix",""],["class","col-md-12 justify-content-center d-flex text-center",4,"ngIf"],[3,"formGroup",4,"ngIf"],["label","Step 3"],[1,"col-md-6"],[1,"mg-y-10"],[4,"ngIf"],["label","Step 4"],["class","col-md-12 ",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","submit",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[3,"value"],[1,"row","m-3","p-2"],[2,"width","60px","height","60px"],[1,"logo",3,"src"],[1,"col"],[1,"col-md-12","justify-content-center","d-flex","text-center"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],[1,"warp-avatar","justify-content-center"],[1,"fa","fa-key"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],[1,"row","justify-content-center","d-flex","text-center","align-items-center"],[1,"col-md-12","d-flex","flex-column","content-justify-center","align-items-center","p-3"],["src","../assets/img/mobilemobile.png","alt","",2,"width","200px","height","70px"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","formControlName","phone","placeholder","Ex : 08XXXXXXXX",3,"ngModel","ngModelChange"],["matSuffix","",1,"mat-18"],[1,"col-md-9"],["type","text","matInput","","formControlName","amount","placeholder","Ex : 5000 ",3,"ngModel","ngModelChange"],[1,"col-md-3"],["matInput","","formControlName","devise","placeholder","",3,"ngModel","ngModelChange","valueChange"],["value","CDF"],["value","USD"],["matInput","","formControlName","dest","placeholder","",3,"ngModel","ngModelChange"],["type","number","matInput","","formControlName","amount","placeholder","Ex : 5000 ",3,"ngModel","ngModelChange"],["type","text","matInput","","formControlName","owner","placeholder","Ex : NOM PRENOM (POSTNOM)",3,"ngModel","ngModelChange"],["type","text","matInput","","formControlName","obs","placeholder","Ecrire une observation",3,"ngModel","ngModelChange"],["src","../assets/img/cash-payment.png","alt","",2,"width","200px","height","200px"],["type","text","matInput","","formControlName","account","placeholder","Ex : 08XXXXXXXX",3,"ngModel","ngModelChange"],[1,"col-md-8"],["type","text","matInput","","formControlName","expiredAt","placeholder","Ex : XX/XXXX",3,"ngModel","ngModelChange"],[1,"col-md-4"],["type","text","matInput","","formControlName","cvc","placeholder","Ex : 08XXXXXXXX",3,"ngModel","ngModelChange"],["src","../assets/img/creditcard-icon.jpg","alt","",2,"width","200px","height","40px"],[1,"d-flex","align-items-center","justify-content-center","flex-column"],[1,"successIcon"],[1,"mg-t-10","mg-md-t-0",3,"click"],[1,"btn","btn-primary","btn-rounded","btn-block"],["class"," mg-t-10 mg-md-t-0",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-rounded","btn-block"],[1,"fa","fa-print"],[1,"successIcon",2,"color","crimson"],["src","assets/img/loading.gif",1,"successIcon",2,"color","rgb(248, 232, 9)"],["type","submit",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"typcn","typcn-arrow-left"],[1,"typcn","typcn-arrow-right"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h1",0),e.TgZ(1,"mat-toolbar-row"),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",1),e._uU(5,"close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-content"),e.YNc(7,je,6,2,"div",2),e.TgZ(8,"div"),e.TgZ(9,"mat-stepper",null,3),e.TgZ(11,"mat-step",4),e.YNc(12,He,1,0,"ng-template",5),e.TgZ(13,"div",6),e.TgZ(14,"div",7),e.TgZ(15,"div",6),e.TgZ(16,"p",8),e._uU(17," Veuillez choisir le monde de paiement "),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"div",7),e.TgZ(20,"div",9),e.TgZ(21,"mat-radio-group",10),e.NdJ("ngModelChange",function(o){return n.selectModel=o})("change",function(o){return n.modeChanged(o)}),e.TgZ(22,"mat-radio-button",11),e._UZ(23,"i",12),e._uU(24," Mobile Money"),e.qZA(),e._uU(25,"\xa0\xa0\xa0\xa0 "),e.TgZ(26,"mat-radio-button",13),e._UZ(27,"i",14),e._uU(28," Carte de cr\xe9dit"),e.qZA(),e._uU(29,"\xa0\xa0\xa0\xa0 "),e.TgZ(30,"mat-radio-button",15),e._UZ(31,"i",16),e._uU(32," Banque"),e.qZA(),e._uU(33,"\xa0\xa0\xa0\xa0 "),e.TgZ(34,"mat-radio-button",17),e._UZ(35,"i",18),e._uU(36," PayPal"),e.qZA(),e._uU(37,"\xa0\xa0\xa0\xa0 "),e.TgZ(38,"mat-radio-button",19),e._UZ(39,"i",20),e._uU(40," Cash"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"mat-step",21),e.YNc(42,ze,1,0,"ng-template",5),e.TgZ(43,"form",22),e.TgZ(44,"div",7),e.TgZ(45,"div",6),e.TgZ(46,"div",7),e.TgZ(47,"div",6),e.TgZ(48,"mat-form-field",23),e._UZ(49,"input",24),e.TgZ(50,"mat-autocomplete",25,26),e.NdJ("optionSelected",function(o){return n.onSelectTaxer(o)}),e.YNc(52,Ge,7,4,"mat-option",27),e.ALo(53,"async"),e.qZA(),e.TgZ(54,"mat-icon",28),e._uU(55,"search"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(56,nt,19,14,"div",29),e.qZA(),e.qZA(),e.YNc(57,at,39,6,"form",30),e.YNc(58,ot,37,5,"form",30),e.YNc(59,rt,48,7,"form",30),e.qZA(),e.TgZ(60,"mat-step",31),e.YNc(61,st,1,0,"ng-template",5),e.TgZ(62,"div",7),e.TgZ(63,"div",6),e.TgZ(64,"div",7),e.TgZ(65,"div",32),e.TgZ(66,"h3"),e._uU(67,"Payeur "),e.qZA(),e._UZ(68,"hr",33),e.YNc(69,lt,3,1,"div",34),e.YNc(70,ut,3,1,"div",34),e.qZA(),e.TgZ(71,"div",32),e.TgZ(72,"h3"),e._uU(73,"D\xe9tail paiement "),e.qZA(),e._UZ(74,"hr",33),e.TgZ(75,"div"),e._uU(76,"Mode : "),e.TgZ(77,"strong"),e._uU(78),e.qZA(),e.qZA(),e.TgZ(79,"div"),e._uU(80,"Montant \xe0 payer "),e.YNc(81,ct,2,1,"strong",34),e.YNc(82,dt,2,1,"strong",34),e.YNc(83,gt,2,1,"strong",34),e.qZA(),e.TgZ(84,"div"),e._uU(85,"Devise de paiement "),e.YNc(86,ht,2,1,"strong",34),e.YNc(87,mt,2,1,"strong",34),e.YNc(88,pt,2,1,"strong",34),e.qZA(),e.TgZ(89,"div"),e._uU(90,"N\xb0Note : "),e.TgZ(91,"strong"),e._uU(92),e.qZA(),e.qZA(),e.TgZ(93,"div"),e._uU(94,"Acte : "),e.TgZ(95,"strong"),e._uU(96),e.qZA(),e.qZA(),e.TgZ(97,"div"),e._uU(98,"Ordonnateur : "),e.TgZ(99,"strong"),e._uU(100),e.qZA(),e.qZA(),e.TgZ(101,"div"),e._uU(102," Taux de la note : "),e.TgZ(103,"strong"),e._uU(104),e.ALo(105,"number"),e.ALo(106,"number"),e.qZA(),e.qZA(),e.TgZ(107,"div"),e._uU(108," Taux du jour : "),e.TgZ(109,"strong"),e._uU(110),e.ALo(111,"number"),e.ALo(112,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(113,"mat-step",35),e.YNc(114,Zt,1,0,"ng-template",5),e.TgZ(115,"div",7),e.YNc(116,vt,23,3,"div",36),e.YNc(117,_t,11,1,"div",36),e.YNc(118,At,8,0,"div",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(119,"mat-dialog-actions"),e.YNc(120,Tt,3,0,"button",37),e._uU(121,"\xa0\xa0 "),e.YNc(122,xt,3,1,"button",37),e.qZA()),2&t){const i=e.MAs(51);e.xp6(3),e.hij(" ",n.data.title," "),e.xp6(4),e.Q6J("ngIf",1==n.hasError),e.xp6(14),e.Q6J("ngModel",n.selectModel),e.xp6(22),e.Q6J("formGroup",n.formCreditCard),e.xp6(6),e.Q6J("formControl",n.contribuableControl)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",n.showTaxer),e.xp6(2),e.Q6J("ngForOf",e.lcZ(53,33,n.notes)),e.xp6(4),e.Q6J("ngIf",n.selectedNote),e.xp6(1),e.Q6J("ngIf","MOBILE"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CASH"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CREDITCARD"==n.selectModel),e.xp6(10),e.Q6J("ngIf","MOBILE"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CASH"==n.selectModel),e.xp6(8),e.hij(" ",n.selectModel,""),e.xp6(3),e.Q6J("ngIf","MOBILE"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CASH"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CREDITCARD"==n.selectModel),e.xp6(3),e.Q6J("ngIf","MOBILE"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CASH"==n.selectModel),e.xp6(1),e.Q6J("ngIf","CREDITCARD"==n.selectModel),e.xp6(4),e.hij(" ",null==n.selectedNote?null:n.selectedNote.refDoc,""),e.xp6(4),e.hij(" ",null==n.selectedNote?null:n.selectedNote.acte,""),e.xp6(4),e.hij(" ",null==n.selectedNote?null:n.selectedNote.agent,""),e.xp6(4),e.AsE(" ",e.xi3(105,35,null==n.selectedNote?null:n.selectedNote.amount,".2-2"),"$ | ",e.xi3(106,38,null==n.selectedNote?null:n.selectedNote.amountCdf,".2-2")," CDF"),e.xp6(6),e.AsE("",e.xi3(111,41,1,".2-2")," $ = ",e.xi3(112,44,null==n.taux?null:n.taux.amount,".2-2")," CDF "),e.xp6(6),e.Q6J("ngIf",1===n.isEnded),e.xp6(1),e.Q6J("ngIf",0===n.isEnded),e.xp6(1),e.Q6J("ngIf",-1===n.isEnded),e.xp6(2),e.Q6J("ngIf",1==n.isShown&&1==n.couldBack),e.xp6(2),e.Q6J("ngIf",n.couldSave)}},directives:[Z.uh,Q.rD,R.Hw,Z.ZT,Z.xY,f.O5,J.Vq,J.C0,J.VY,Y.VQ,s.JJ,s.On,Y.U0,s._Y,s.JL,s.sg,x.KE,L.Nt,s.Fj,V.ZL,s.oH,V.XC,f.sg,x.R9,Z.H8,X.ey,x.hX,s.u,I.gD,s.wV],pipes:[f.Ov,f.JJ],styles:[""]}),a})();var k=c(7539),T=c(3220),G=c(4457);function Ct(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).view(i)}),e.TgZ(1,"td",32),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"number"),e.ALo(9,"number"),e.qZA(),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.ALo(26,"date"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e.TgZ(30,"div",33),e.TgZ(31,"a",34),e._UZ(32,"i",35),e.qZA(),e._uU(33,"\xa0 "),e.TgZ(34,"a",34),e._UZ(35,"i",36),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw(),n=t.index,i=t.$implicit,o=e.oxw(2);e.xp6(2),e.hij(" ",n+1+o.currentPage*o.pp,""),e.xp6(2),e.Oqu(i.code),e.xp6(3),e.AsE(" ",e.xi3(8,13,i.amount,".2-2"),"$ | ",e.xi3(9,16,i.amountCdf,".2-2"),"CDF "),e.xp6(4),e.Oqu(i.devise),e.xp6(2),e.hij(" ",i.payer," "),e.xp6(2),e.Oqu(i.refNote),e.xp6(2),e.Oqu(i.account),e.xp6(2),e.Oqu(i.mode),e.xp6(2),e.Oqu(i.operation),e.xp6(2),e.Oqu(i.createdBy),e.xp6(2),e.Oqu(e.xi3(26,19,i.dateOperation,"medium")),e.xp6(3),e.Oqu(i.status)}}function bt(a,u){if(1&a&&(e.ynx(0),e.YNc(1,Ct,36,22,"tr",30),e.BQk()),2&a){const t=u.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.id!=(null==n.connectedUser?null:n.connectedUser.id))}}function Ut(a,u){if(1&a&&(e.TgZ(0,"div",27),e.TgZ(1,"table",28),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"REF"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"MONTANT"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Devise"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"PROV."),e.qZA(),e.TgZ(14,"th"),e._uU(15,"NOTE"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"DEST"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"MODE"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"OPERATEUR"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"EXEC."),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Date"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Statut"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"\xa0"),e.qZA(),e.qZA(),e._UZ(30,"tr"),e.qZA(),e.TgZ(31,"tbody"),e.YNc(32,bt,2,1,"ng-container",29),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(32),e.Q6J("ngForOf",null==t.itemsPager?null:t.itemsPager.content)}}function Nt(a,u){1&a&&(e.TgZ(0,"div",37),e.TgZ(1,"strong"),e._uU(2,"Aucune donn\xe9e n'est trouv\xe9e"),e.qZA(),e.qZA())}let yt=(()=>{class a{constructor(t,n,i,o,r,l){this.payService=t,this.rolesChecker=n,this.dialogManager=i,this.scheduleServ=o,this.auth=r,this.parent=l,this.p=0,this.pp=m.N.defautlPageSize,this.itemLength=0,this.currentPage=0,this.imgPath="",this.pattern="",this.subs=[]}ngOnInit(){var t,n,i;this.imgPath=m.N.imgPath,this.form=new s.cw({dateStart:new s.NI(new Date),dateEnd:new s.NI(new Date)}),this.dateStart=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.dateEnd=b(this.form.value.dateStart).format("YYYY-MM-DD"),(null===(t=this.auth.getSession().user)||void 0===t?void 0:t.centre)&&this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[v.e.ALL,v.e.READ])&&this.subs.push(this.payService.getOperationsOfCenterIns(null===(i=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.centre)||void 0===i?void 0:i.id,this.dateStart,this.dateEnd,0,m.N.defautlPageSize).subscribe(o=>{var r;this.itemsPager=o.pager,this.itemLength=null===(r=o.pager)||void 0===r?void 0:r.totalElements}))}openNewPaymentForm(){this.dialogConfig=new Z.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Initialiser un payment ",message:"",action:"NEW",data:null},this.dialogManager.open(qt,this.dialogConfig)}edit(t){}view(t){this.rolesChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[v.e.ALL,v.e.READ])&&this.payService.getPaymentDetail(t.id).subscribe(n=>{this.dialogConfig=new Z.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="cbg",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"Paiement d\xe9tail :"+t.code,title:"Paiement d\xe9tail :"+t.code,message:"",action:"VIEW",data:n},this.dialogManager.open(ye,this.dialogConfig).afterClosed().subscribe(i=>{})})}viewLiquidation(t){}dateRangeChange(t,n){var i,o,r,l;if(t.value.length>0&&n.value.length>0){let d=t.value.split("/")[2]+"-"+t.value.split("/")[0]+"-"+t.value.split("/")[1],g=n.value.split("/")[2]+"-"+n.value.split("/")[0]+"-"+n.value.split("/")[1];this.dateStart=d,this.dateEnd=g,(null===(o=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.centre)||void 0===o?void 0:o.id)&&this.subs.push(this.payService.getOperationsOfCenterIns(null===(l=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.centre)||void 0===l?void 0:l.id,d,g,0,m.N.defautlPageSize).subscribe(h=>{var p;this.container=h,this.itemLength=null===(p=null==h?void 0:h.pager)||void 0===p?void 0:p.totalElements,this.itemsPager=void 0,this.itemsPager=h.pager}))}else console.log("desordre")}dateRangeChanges(t){console.log(t.value,this.form.value.dateStart)}onPageChanged(t){}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ce.t),e.Y36(k.L),e.Y36(Z.uw),e.Y36(D.H),e.Y36(P.u),e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payment-journal"]],inputs:{itemsPager:"itemsPager"},decls:45,vars:8,consts:[[1,"az-content-label","mg-b-5","config-title"],[3,"formGroup"],[1,"row"],[1,"col-3"],[3,"rangePicker"],["matStartDate","","matInput","","placeholder","Start date","formControlName","dateStart"],["dateRangeStart",""],["matEndDate","","matInput","","placeholder","End date","formControlName","dateEnd",3,"dateChange"],["dateRangeEnd",""],["matSuffix","",3,"for"],["picker",""],[1,"col-2"],["value",""],["value","PENDING"],["value","VALIDATED"],["value","UNVALIDATED"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-indigo","btn-sm","btn-icon",3,"click"],[1,"typcn","typcn-plus-outline"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-y-30"],["class","table-responsive",4,"ngIf"],[1,"col-md-6"],["aria-label","Select page",3,"length","pageSize","hidePageSize","page"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["scope","row"],[1,"btn-group"],["type","button",1,""],[1,"fa","fa-trash"],[1,"fa","fa-edit"],["role","alert",1,"alert","alert-info"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"mat-form-field"),e.TgZ(6,"mat-label"),e._uU(7,"Filtrer par date"),e.qZA(),e.TgZ(8,"mat-date-range-input",4),e._UZ(9,"input",5,6),e.TgZ(11,"input",7,8),e.NdJ("dateChange",function(){e.CHM(i);const r=e.MAs(10),l=e.MAs(12);return n.dateRangeChange(r,l)}),e.qZA(),e.qZA(),e._UZ(13,"mat-datepicker-toggle",9),e._UZ(14,"mat-date-range-picker",null,10),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"mat-form-field"),e.TgZ(18,"mat-label"),e._uU(19,"Statut"),e.qZA(),e.TgZ(20,"mat-select"),e.TgZ(21,"mat-option"),e._uU(22,"None"),e.qZA(),e.TgZ(23,"mat-option",12),e._uU(24,"Tous"),e.qZA(),e.TgZ(25,"mat-option",13),e._uU(26,"EN ATTENTE"),e.qZA(),e.TgZ(27,"mat-option",14),e._uU(28,"VALIDE"),e.qZA(),e.TgZ(29,"mat-option",15),e._uU(30,"ANNULE"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",16),e.TgZ(32,"div",17),e.TgZ(33,"button",18),e.NdJ("click",function(){return n.openNewPaymentForm()}),e._UZ(34,"i",19),e.qZA(),e.TgZ(35,"button",20),e._UZ(36,"i",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(37,"hr",22),e.YNc(38,Ut,33,1,"div",23),e.TgZ(39,"div",2),e.TgZ(40,"div",24),e._uU(41," \xa0 "),e.qZA(),e.TgZ(42,"div",24),e.TgZ(43,"mat-paginator",25),e.NdJ("page",function(r){return n.onPageChanged(r)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(44,Nt,3,0,"div",26),e.qZA()}if(2&t){const i=e.MAs(15);e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("rangePicker",i),e.xp6(5),e.Q6J("for",i),e.xp6(25),e.Q6J("ngIf",0==(null==n.itemsPager?null:n.itemsPager.empty)),e.xp6(5),e.Q6J("length",n.itemLength)("pageSize",n.pp)("hidePageSize",!0),e.xp6(1),e.Q6J("ngIf",1==(null==n.itemsPager?null:n.itemsPager.empty))}},directives:[s._Y,s.JL,s.sg,x.KE,x.hX,T.wx,T.zY,L.Nt,s.Fj,s.JJ,s.u,T.By,T.nW,x.R9,T._g,I.gD,X.ey,f.O5,G.NW,f.sg],pipes:[f.JJ,f.uU],styles:[""]}),a})();var Dt=c(5396),Pt=c(6640),It=c(2533),Et=c(9532),St=c(1717),Mt=c(1846),wt=c(704),Ft=c(8409),Ot=c(8003);let me=(()=>{class a{constructor(t){this.http=t,this.path=m.N.baseApiUrl+"recettes/discharging"}print(t){return this.http.put(`${this.path}/${t}/print`,{})}discharge(t,n){return this.http.put(`${this.path}/${t}/discharge`,n)}liquidationTaxation(t,n){return this.http.put(`${this.path}/${t}/settle`,n)}getDoc(t){return this.http.get(`${this.path}/${t}`)}getOperations(t,n=m.N.defautlPageSize){return this.http.get(`${this.path}/paging?page=${t}&size=${n}`)}getOperationsIns(t,n,i,o=m.N.defautlPageSize){return this.http.get(`${this.path}/ins/${t}/${n}/paging?page=${i}&size=${o}`)}getOperationsInsByStatus(t,n,i,o,r=m.N.defautlPageSize){return this.http.get(`${this.path}/ins/${n}/${i}/by/status/${t}/paging?page=${o}&size=${r}`)}getOperationsOfOffice(t,n=0,i=m.N.defautlPageSize){return this.http.get(`${this.path}/offices/${t}?page=${n}&size=${i}`)}getOperationsOfOfficeByStatut(t,n,i=0,o=m.N.defautlPageSize){return this.http.get(`${this.path}/offices/${t}/by/status/${n}?page=${i}&size=${o}`)}getOperationsOfOfficeIns(t,n,i,o=0,r=m.N.defautlPageSize){return this.http.get(`${this.path}/offices/${t}/ins/${n}/${i}?page=${o}&size=${r}`)}getOperationsOfOfficeInsByStatus(t,n,i,o,r=0,l=m.N.defautlPageSize){return this.http.get(`${this.path}/offices/${t}/ins/${n}/${i}/by/status/${o}?page=${r}&size=${l}`)}getOperationsOfCenter(t,n=0,i=m.N.defautlPageSize){return this.http.get(`${this.path}/centers/${t}?page=${n}&size=${i}`)}getOperationsOfCenterByStatut(t,n,i=0,o=m.N.defautlPageSize){return this.http.get(`${this.path}/centers/${t}/by/status/${n}?page=${i}&size=${o}`)}getOperationsOfCenterIns(t,n,i,o=0,r=m.N.defautlPageSize){return this.http.get(`${this.path}/centers/${t}/ins/${n}/${i}?page=${o}&size=${r}`)}getOperationsOfCenterInsByStatus(t,n,i,o,r=0,l=m.N.defautlPageSize){return this.http.get(`${this.path}/centers/${t}/ins/${n}/${i}/by/status/${o}?page=${r}&size=${l}`)}getOperationsOfRgie(t,n=0,i=m.N.defautlPageSize){return this.http.get(`${this.path}/centers/${t}?page=${n}&size=${i}`)}searchByfRgie(t,n){return this.http.get(`${this.path}/regies/${n}/search?pattern=${t}`)}searchBureauPaging(t,n,i=0,o=m.N.defautlPageSize){return this.http.get(`${this.path}/offices/${t}/search/paging?page=${i}&size=${o}&pattern=${n}`)}searchBureau(t,n){return this.http.get(`${this.path}/offices/${t}/search?pattern=${n}`)}getOperationsOfRegieByStatut(t,n,i=0,o=m.N.defautlPageSize){return this.http.get(`${this.path}/regies/${t}/by/status/${n}?page=${i}&size=${o}`)}getOperationsOfRegieIns(t,n,i,o=0,r=m.N.defautlPageSize){return this.http.get(`${this.path}/regies/${t}/ins/${n}/${i}?page=${o}&size=${r}`)}getOperationsOfRegieInsByStatus(t,n,i,o,r=0,l=m.N.defautlPageSize){return this.http.get(`${this.path}/regies/${t}/ins/${n}/${i}/by/status/${o}?page=${r}&size=${l}`)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(ue.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Jt=["container"];function Yt(a,u){if(1&a&&(e.TgZ(0,"div",28),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",29),e._uU(5),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(null==t.error?null:t.error.error),e.xp6(3),e.hij(" ",null==t.error?null:t.error.description," ")}}function Lt(a,u){if(1&a&&(e.ynx(0),e._UZ(1,"img",30,31),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgPath+""+(null==t.taxation||null==t.taxation.contribuable?null:t.taxation.contribuable.photo)+"."+(null==t.taxation||null==t.taxation.contribuable||null==t.taxation.contribuable.photo?null:t.taxation.contribuable.photo.type),e.LSH)}}function kt(a,u){1&a&&(e.ynx(0),e._UZ(1,"img",32),e.BQk())}function $t(a,u){if(1&a&&(e.TgZ(0,"h4"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.AsE("",null==t.taxation||null==t.taxation.contribuable?null:t.taxation.contribuable.nom," ",null==t.taxation||null==t.taxation.contribuable?null:t.taxation.contribuable.prenom," (P)")}}function Qt(a,u){if(1&a&&(e.TgZ(0,"h4"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij("",null==t.taxation||null==t.taxation.contribuable?null:t.taxation.contribuable.raisonSociale," "),e.xp6(2),e.hij(" ",null==t.taxation||null==t.taxation.contribuable?null:t.taxation.contribuable.nom," (M) ")}}function Rt(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.print(i.taxation)}),e._UZ(1,"i",34),e._uU(2," Imprimer "),e.qZA()}}let Bt=(()=>{class a{constructor(t,n,i,o,r,l,d,g,h,p,q,E){this.dischargeServ=t,this.printService=n,this.taxConf=i,this.ordServ=o,this.auth=r,this.rolesChecker=l,this.data=d,this.dialog=g,this.dialogMan=h,this.dialogServ=p,this.componentFactoryResolver=q,this.cdr=E,this.hasError=!1,this.showPrint=!1,this.couldScheduled=!1,this.selectedAccounts=[],this.subs=[],this.couldApure=!1}ngOnInit(){this.data.data.id&&(this.taxation=this.data.data),this.rolesChecker.hasPermission(this.auth.getSession().user,"apurement",[v.e.ALL,v.e.PRINT])&&(this.showPrint=!0),this.rolesChecker.hasPermission(this.auth.getSession().user,"apurement",[v.e.ALL,v.e.WRITE])&&(this.couldApure=!0),this.couldApure=!0,this.showPrint=!0,this.subs.push(this.ordServ.getWhereToPay(this.data.data.id).subscribe(t=>{this.taxation.accounts=t}))}ngOnDestroy(){this.subs=[]}onClose(){this.dialog.close()}render(t){var n,i,o,r,l;this.container.clear(),this.container.remove();let d=null;switch(t){case"PENALITE":d=this.componentFactoryResolver.resolveComponentFactory(Ft.U),this.container.createComponent(d).instance.taxation=null===(n=this.taxation)||void 0===n?void 0:n.ordonnancement;break;case"PAIEMENT":d=this.componentFactoryResolver.resolveComponentFactory(wt.d),this.container.createComponent(d).instance.taxation=null===(i=this.taxation)||void 0===i?void 0:i.ordonnancement;break;case"ELEMENT":d=this.componentFactoryResolver.resolveComponentFactory(St.u),this.container.createComponent(d).instance.taxation=null===(o=this.taxation)||void 0===o?void 0:o.ordonnancement;break;case"OBSERVATION":d=this.componentFactoryResolver.resolveComponentFactory(Mt.Q),this.container.createComponent(d);break;case"PAYER":d=this.componentFactoryResolver.resolveComponentFactory(Ot.A),this.container.createComponent(d).instance.accounts=null===(l=null===(r=this.taxation)||void 0===r?void 0:r.ordonnancement)||void 0===l?void 0:l.accounts}}print(t){var n;if(this.rolesChecker.hasPermission(this.auth.getSession().user,"apurement",[v.e.ALL,v.e.PRINT]),t){let i={disableClose:!0,width:"400px",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Impression Quittance N\xb0"+(null!==(n=null==t?void 0:t.refDoc)&&void 0!==n?n:""),message:"Vous \xeates au point d'imprimer Le CPI",action:"PRINT"}};this.hasError=!1,this.dialogServ.open(i).confirm().subscribe(o=>{1==o.result&&this.dischargeServ.print(t.id).subscribe(r=>{this.printService.printQuittancee(r,t,t.ordonnancement)})})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(me),e.Y36(S.$),e.Y36(ge.K),e.Y36(D.H),e.Y36(P.u),e.Y36(k.L),e.Y36(Z.WI),e.Y36(Z.so),e.Y36(Z.uw),e.Y36(he.x),e.Y36(e._Vd),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-discharge-detail"]],viewQuery:function(t,n){if(1&t&&e.Gf(Jt,5,e.s_b),2&t){let i;e.iGM(i=e.CRH())&&(n.container=i.first)}},decls:149,vars:68,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],[1,"h-100"],["class","alert alert-danger ",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-3","border-right"],[1,"d-flex","flex-column","align-items-center"],[1,"mb-3","font-weight-bold"],[1,"warp-avatar"],[4,"ngIf"],[1,"fa","fa-key"],[1,"fa","fa-phone"],[1,"fa","fa-envelope"],[1,"col"],[1,"col-md-12","border-bottom"],[1,"fa","fa-clock"],[1,"col-md-12","border-bottom","font-weight-bold"],[1,"mb-3","mt-2"],[1,"col-md-12","font-weight-bold"],[1,"col-md-12"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"click"],["routerLinkActive","active","data-toggle","tab",1,"nav-link"],[2,"max-height","500px","overflow-y","auto"],["container",""],["class","btn btn-indigo btn-with-icon ","type","button",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],["type","button",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"fa","fa-print"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"h1",0),e.TgZ(2,"mat-toolbar-row"),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",1),e.NdJ("click",function(){return n.onClose()}),e._uU(6," close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-content",2),e.YNc(8,Yt,6,2,"div",3),e.TgZ(9,"div",4),e.TgZ(10,"div",5),e.TgZ(11,"div",6),e.TgZ(12,"div",7),e.TgZ(13,"div",8),e._uU(14,"Contribuable"),e.qZA(),e.TgZ(15,"div",9),e.YNc(16,Lt,3,1,"ng-container",10),e.YNc(17,kt,2,0,"ng-container",10),e.qZA(),e.TgZ(18,"div"),e.YNc(19,$t,2,2,"h4",10),e.YNc(20,Qt,4,2,"h4",10),e.TgZ(21,"p"),e.TgZ(22,"strong"),e._UZ(23,"i",11),e._uU(24),e.qZA(),e.qZA(),e.TgZ(25,"p"),e.TgZ(26,"strong"),e._UZ(27,"i",12),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"p"),e.TgZ(30,"strong"),e._UZ(31,"i",13),e._uU(32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"div",5),e.TgZ(35,"div",15),e.TgZ(36,"div",8),e._uU(37,"Calcul"),e.qZA(),e.TgZ(38,"div"),e._uU(39," Principal : "),e.TgZ(40,"strong"),e._uU(41),e.ALo(42,"number"),e.ALo(43,"number"),e.qZA(),e.qZA(),e.TgZ(44,"div"),e._uU(45," P\xe9nalit\xe9s : "),e.TgZ(46,"strong"),e._uU(47),e.ALo(48,"number"),e.ALo(49,"number"),e.qZA(),e.qZA(),e.TgZ(50,"div"),e._uU(51," Exonerations : "),e.TgZ(52,"strong"),e._uU(53),e.ALo(54,"number"),e.ALo(55,"number"),e.qZA(),e.qZA(),e.TgZ(56,"div"),e._uU(57," Total \xe0 payer : "),e.TgZ(58,"strong"),e._uU(59),e.ALo(60,"number"),e.ALo(61,"number"),e.qZA(),e.qZA(),e.TgZ(62,"div"),e._uU(63," Nbr. taxe : "),e.TgZ(64,"strong"),e._uU(65),e.qZA(),e.qZA(),e.TgZ(66,"div"),e._uU(67," Statut : "),e.TgZ(68,"strong"),e._uU(69),e.qZA(),e.qZA(),e.TgZ(70,"div"),e._uU(71," N\xb0 R\xe9f : "),e.TgZ(72,"strong"),e._uU(73),e.qZA(),e.qZA(),e.TgZ(74,"div"),e._uU(75," Taux du jour : "),e.TgZ(76,"strong"),e._uU(77),e.ALo(78,"number"),e.ALo(79,"number"),e.qZA(),e.qZA(),e.TgZ(80,"div"),e._uU(81," Date : "),e.TgZ(82,"strong"),e._UZ(83,"i",16),e._uU(84),e.ALo(85,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",17),e.TgZ(87,"div",18),e._uU(88,"Service de taxation"),e.qZA(),e.TgZ(89,"div"),e._uU(90," Bureau : "),e.TgZ(91,"strong"),e._uU(92),e.qZA(),e.qZA(),e.TgZ(93,"div"),e._uU(94," Centre : "),e.TgZ(95,"strong"),e._uU(96),e.qZA(),e.qZA(),e.TgZ(97,"div"),e._uU(98," Agent taxateur : "),e.TgZ(99,"strong"),e._uU(100),e.qZA(),e.qZA(),e.qZA(),e.TgZ(101,"div",19),e.TgZ(102,"div",18),e._uU(103,"Service d'ordonnancement"),e.qZA(),e.TgZ(104,"div"),e._uU(105," Bureau : "),e.TgZ(106,"strong"),e._uU(107),e.qZA(),e.qZA(),e.TgZ(108,"div"),e._uU(109," Centre : "),e.TgZ(110,"strong"),e._uU(111),e.qZA(),e.qZA(),e.TgZ(112,"div"),e._uU(113," Agent Ordonnateur : "),e.TgZ(114,"strong"),e._uU(115),e.qZA(),e.qZA(),e._UZ(116,"br"),e.qZA(),e.TgZ(117,"div",19),e.TgZ(118,"div",18),e._uU(119,"Service d'Apurement"),e.qZA(),e.TgZ(120,"div"),e._uU(121," Centre : "),e.TgZ(122,"strong"),e._uU(123),e.qZA(),e.qZA(),e.TgZ(124,"div"),e._uU(125," Agent Apureur : "),e.TgZ(126,"strong"),e._uU(127),e.qZA(),e.qZA(),e._UZ(128,"br"),e.qZA(),e.TgZ(129,"div",20),e.TgZ(130,"div",21),e.TgZ(131,"nav",22),e.TgZ(132,"a",23),e.NdJ("click",function(){return n.render("ELEMENT")}),e._uU(133,"Elements de taxations"),e.qZA(),e.TgZ(134,"a",23),e.NdJ("click",function(){return n.render("PENALITE")}),e._uU(135,"P\xe9nalit\xe9s"),e.qZA(),e.TgZ(136,"a",23),e.NdJ("click",function(){return n.render("PAIEMENT")}),e._uU(137,"Paiements"),e.qZA(),e.TgZ(138,"a",23),e.NdJ("click",function(){return n.render("PAYER")}),e._uU(139,"O\xf9 payer"),e.qZA(),e.TgZ(140,"a",23),e.NdJ("click",function(){return n.render("BUREAU")}),e._uU(141,"Observations"),e.qZA(),e.TgZ(142,"a",24),e._uU(143,"Bureaux"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(144,"div",25),e.GkF(145,null,26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(147,"mat-dialog-actions"),e.YNc(148,Rt,3,0,"button",27),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij(" ",n.data.title," "),e.xp6(4),e.Q6J("ngIf",1==n.hasError),e.xp6(8),e.Q6J("ngIf",null!=(null==n.taxation?null:n.taxation.contribuable)&&null!=(null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.photo)),e.xp6(1),e.Q6J("ngIf",null!=(null==n.taxation?null:n.taxation.contribuable)&&null==(null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.photo)),e.xp6(2),e.Q6J("ngIf","P"==(null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.typePersonne)),e.xp6(1),e.Q6J("ngIf","M"==(null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.typePersonne)),e.xp6(4),e.hij(" ",null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.nuc,""),e.xp6(4),e.hij(" ",null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.phone,""),e.xp6(4),e.hij(" ",null==n.taxation||null==n.taxation.contribuable?null:n.taxation.contribuable.email,""),e.xp6(9),e.AsE(" ",e.xi3(42,36,null==n.taxation?null:n.taxation.amount,".2-2"),"$ | ",e.xi3(43,39,null==n.taxation?null:n.taxation.amountCdf,".2-2")," CDF"),e.xp6(6),e.AsE(" ",e.xi3(48,42,null==n.taxation?null:n.taxation.penalities,".2-2"),"$ | ",e.xi3(49,45,n.taxation.penalities*n.taxation.AppliedTaux,".2-2")," CDF"),e.xp6(6),e.AsE(" ",e.xi3(54,48,null==n.taxation?null:n.taxation.exenorations,".2-2"),"$ | ",e.xi3(55,51,n.taxation.exenorations*n.taxation.AppliedTaux,".2-2")," CDF"),e.xp6(6),e.AsE(" ",e.xi3(60,54,null==n.taxation?null:n.taxation.amount,".2-2"),"$ | ",e.xi3(61,57,null==n.taxation?null:n.taxation.amountCdf,".2-2")," CDF"),e.xp6(6),e.hij(" ",null==n.taxation||null==n.taxation.taxation||null==n.taxation.taxation.items?null:n.taxation.taxation.items.length,""),e.xp6(4),e.hij(" ",null==n.taxation?null:n.taxation.statut,""),e.xp6(4),e.hij(" ",null==n.taxation?null:n.taxation.refDoc,""),e.xp6(4),e.AsE("",e.xi3(78,60,1,".2-2")," $ = ",e.xi3(79,63,null==n.taxation?null:n.taxation.AppliedTaux,".2-2")," CDF "),e.xp6(7),e.hij(" ",e.lcZ(85,66,null==n.taxation?null:n.taxation.createdAt),""),e.xp6(8),e.hij(" ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.liquidation||null==n.taxation.ordonnancement.liquidation.bureau?null:n.taxation.ordonnancement.liquidation.bureau.nom,""),e.xp6(4),e.AsE(" ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.liquidation||null==n.taxation.ordonnancement.liquidation.centre?null:n.taxation.ordonnancement.liquidation.centre.nom," (",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.liquidation||null==n.taxation.ordonnancement.liquidation.centre?null:n.taxation.ordonnancement.liquidation.centre.nature,") "),e.xp6(4),e.AsE(" ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.liquidation||null==n.taxation.ordonnancement.liquidation.agent?null:n.taxation.ordonnancement.liquidation.agent.nom," ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.liquidation||null==n.taxation.ordonnancement.liquidation.agent?null:n.taxation.ordonnancement.liquidation.agent.prenom," "),e.xp6(7),e.hij(" ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.bureau?null:n.taxation.ordonnancement.bureau.nom,""),e.xp6(4),e.hij(" ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.centre?null:n.taxation.ordonnancement.centre.nom," "),e.xp6(4),e.AsE(" ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.agent?null:n.taxation.ordonnancement.agent.nom," ",null==n.taxation||null==n.taxation.ordonnancement||null==n.taxation.ordonnancement.agent?null:n.taxation.ordonnancement.agent.prenom," "),e.xp6(8),e.hij(" ",null==n.taxation||null==n.taxation.centre?null:n.taxation.centre.nom," "),e.xp6(4),e.AsE(" ",null==n.taxation||null==n.taxation.agent?null:n.taxation.agent.nom," ",null==n.taxation||null==n.taxation.agent?null:n.taxation.agent.prenom," "),e.xp6(21),e.Q6J("ngIf",n.showPrint))},directives:[Z.uh,Q.rD,R.Hw,Z.xY,f.O5,C.Od,Z.H8],pipes:[f.JJ,f.uU],styles:[""]}),a})();var jt=c(4612),Ht=c(8002),pe=c(5758),W=c(1662);const zt=function(){return["./home"]},Vt=function(){return["./ordonnancement"]},Xt=function(){return["./discharging"]};let Ze=(()=>{class a{constructor(t,n,i,o,r,l){this.printManager=t,this.roleChecker=n,this.genConfig=i,this.auth=o,this.appStor=r,this.schedServ=l,this.stat=new W.a,this.statCancel=new W.a,this.statValid=new W.a,this.officeOrAgent="agent",this.subs=[],this.dateStart="",this.dateEnd=""}ngOnInit(){var t,n,i,o;this.appStor.exist("taux")?this.taux=this.appStor.getJson("taux"):(null===(n=null===(t=this.auth.getSession().user)||void 0===t?void 0:t.regie)||void 0===n?void 0:n.id)&&this.genConfig.getCurrentTaux(null===(o=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.regie)||void 0===o?void 0:o.id).subscribe(r=>{this.taux=r})}updateDates(t,n){this.dateStart=t,this.dateEnd=n}reportOfChanged(t){}printReport(){var t,n,i,o,r,l,d,g;let h="RAPPORT ";"agent"==this.officeOrAgent?this.roleChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[v.e.ALL,v.e.PRINT])&&(h+=" DES ORDONNANCEMENTS DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,pe.D)(this.schedServ.getReportOfAgentByStatut(null===(n=null===(t=this.auth.getSession())||void 0===t?void 0:t.user)||void 0===n?void 0:n.id,this.dateStart,this.dateEnd),this.schedServ.getReportOfAgent(null===(i=this.auth.getSession().user)||void 0===i?void 0:i.id,this.dateStart,this.dateEnd)).subscribe(p=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,p[0],p[1],this.auth.getSession().user,h)})):this.roleChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[v.e.ALL,v.e.PRINT])&&(h+=" DES ORDONNANCEMENTS DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,pe.D)(this.schedServ.getReportOfOfficeByStatut(null===(l=null===(r=null===(o=this.auth.getSession())||void 0===o?void 0:o.user)||void 0===r?void 0:r.bureau)||void 0===l?void 0:l.id,this.dateStart,this.dateEnd),this.schedServ.getTaxationsOfOfficeIns(null===(g=null===(d=this.auth.getSession().user)||void 0===d?void 0:d.bureau)||void 0===g?void 0:g.id,this.dateStart,this.dateEnd)).subscribe(p=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,p[0],p[1],this.auth.getSession().user,h)}))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(S.$),e.Y36(k.L),e.Y36(z.E),e.Y36(P.u),e.Y36(de.I),e.Y36(D.H))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-discharging-home"]],inputs:{stat:"stat",statCancel:"statCancel",statValid:"statValid",statLiq:"statLiq"},decls:64,vars:16,consts:[[1,"row"],[1,"col-md-3","p-4","position-fixe","az-content-left-components"],[1,"component-item"],[1,"flex-column","justify-content-center","d-flex"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-icon"],[1,"flex-row","justify-content-center","d-flex"],[1,"position-relative","wrap-stat-sum"],[1,"stat-sum-title"],[1,"w-100","d-flex","flex-column","align-content-end","align-items-end"],[1,"stat-sum-val"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column","mb-2"],["aria-label","Select an option",3,"ngModel","ngModelChange","change"],["value","office"],["value","agent"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column"],["href","",1,"btn","btn-purple","mb-2"],[1,"fa","fa-print"],["href","",1,"btn","btn-purple"],[1,"fa","fa-envelope"],[1,"col-md-9","offset-"],[1,"az-content-breadcrumb"],[1,"content"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"routerLink"],[1,"ht-40"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"strong",5),e._uU(6,"Taux du jour"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"strong"),e._uU(9),e.ALo(10,"number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"p"),e._uU(14," A apurer "),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"div",10),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"div",10),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",7),e.TgZ(22,"div",8),e.TgZ(23,"p"),e._uU(24," Apur\xe9es"),e.qZA(),e.qZA(),e.TgZ(25,"div",9),e.TgZ(26,"div",10),e._uU(27,"0.00$"),e.qZA(),e.TgZ(28,"div",10),e._uU(29,"0"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"p"),e._uU(31,"\xa0"),e.qZA(),e.TgZ(32,"div",11),e.TgZ(33,"mat-radio-group",12),e.NdJ("ngModelChange",function(o){return n.officeOrAgent=o})("change",function(o){return n.reportOfChanged(o)}),e.TgZ(34,"mat-radio-button",13),e._uU(35,"Bureau"),e.qZA(),e._uU(36," \xa0 "),e.TgZ(37,"mat-radio-button",14),e._uU(38,"Perso"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",15),e.TgZ(40,"a",16),e._UZ(41,"i",17),e._uU(42," Impression rapport"),e.qZA(),e.TgZ(43,"a",18),e._UZ(44,"i",19),e._uU(45," Export rapport"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",20),e.TgZ(47,"div",21),e.TgZ(48,"span"),e._uU(49,"Recette"),e.qZA(),e.TgZ(50,"span"),e._uU(51," Apurement"),e.qZA(),e.qZA(),e.TgZ(52,"div",22),e.TgZ(53,"div",23),e.TgZ(54,"nav",24),e.TgZ(55,"a",25),e._uU(56,"Op\xe9rations"),e.qZA(),e.TgZ(57,"a",25),e._uU(58,"Ordonnancement"),e.qZA(),e.TgZ(59,"a",25),e._uU(60,"Apurement"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div"),e._UZ(62,"router-outlet"),e.qZA(),e.qZA(),e._UZ(63,"div",26),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.hij("",e.xi3(10,7,2e3,".2-2")," CDF"),e.xp6(8),e.hij("",e.xi3(18,10,null==n.stat?null:n.stat.totalActe,".2-2"),"$"),e.xp6(3),e.Oqu(null==n.stat?null:n.stat.volume),e.xp6(13),e.Q6J("ngModel",n.officeOrAgent),e.xp6(22),e.Q6J("routerLink",e.DdM(13,zt)),e.xp6(2),e.Q6J("routerLink",e.DdM(14,Vt)),e.xp6(2),e.Q6J("routerLink",e.DdM(15,Xt)))},directives:[Y.VQ,s.JJ,s.On,Y.U0,C.yS,C.Od,C.lC],pipes:[f.JJ],styles:[""]}),a})();const Gt=["seachInput"];function Wt(a,u){if(1&a&&(e.TgZ(0,"div",2),e.TgZ(1,"div",15),e.TgZ(2,"div",28),e.TgZ(3,"form",29),e.TgZ(4,"div",30),e.TgZ(5,"div",31),e._UZ(6,"input",32,33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(6),e.Q6J("formControl",t.formSearch)}}function Kt(a,u){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE("",t.contribuable," - ",t.prenom,"")}}function en(a,u){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.raisonSociale)}}function tn(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).view(i)}),e.TgZ(1,"td",39),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"img",40),e._UZ(7,"br"),e.YNc(8,Kt,2,2,"div",41),e.YNc(9,en,2,1,"div",41),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"number"),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e.TgZ(28,"div",42),e.TgZ(29,"a",43),e._UZ(30,"i",44),e.qZA(),e._uU(31,"\xa0 "),e.TgZ(32,"a",45),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).edit(i)}),e._UZ(33,"i",46),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw(),n=t.index,i=t.$implicit,o=e.oxw(2);e.xp6(2),e.hij(" ",n+1+o.currentPage*o.pp,""),e.xp6(2),e.Oqu(i.refDoc),e.xp6(2),e.Q6J("src",o.imgPath+i.profile+"."+i.profileExt,e.LSH),e.xp6(2),e.Q6J("ngIf","M"!=i.type),e.xp6(1),e.Q6J("ngIf","M"==i.type),e.xp6(2),e.Oqu(i.nuc),e.xp6(2),e.Oqu(i.type),e.xp6(2),e.Oqu(i.acte),e.xp6(2),e.AsE("",e.xi3(18,13,i.amount,".2-2"),"$ | ",e.xi3(19,16,i.amountCdf,".2-2"),"FC"),e.xp6(4),e.Oqu(i.agent),e.xp6(2),e.Oqu(e.lcZ(24,19,i.createdAt)),e.xp6(3),e.Oqu(i.statut)}}function nn(a,u){if(1&a&&(e.ynx(0),e.YNc(1,tn,34,21,"tr",37),e.BQk()),2&a){const t=u.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.id!=(null==n.connectedUser?null:n.connectedUser.id))}}function an(a,u){if(1&a&&(e.TgZ(0,"div",34),e.TgZ(1,"table",35),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Ref Dossier"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Contribuable"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Nuc"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Type "),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Acte(P)"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Montant"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Agent"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Date"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Statut"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"\xa0"),e.qZA(),e.qZA(),e._UZ(26,"tr"),e.qZA(),e.TgZ(27,"tbody"),e.YNc(28,nn,2,1,"ng-container",36),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(28),e.Q6J("ngForOf",null==t.itemsPager?null:t.itemsPager.content)}}function on(a,u){1&a&&(e.TgZ(0,"div",47),e.TgZ(1,"strong"),e._uU(2,"Aucune donn\xe9e n'est trouv\xe9e"),e.qZA(),e.qZA())}let fe=(()=>{class a{constructor(t,n,i,o,r,l){this.dischargService=t,this.rolesChecker=n,this.dialogManager=i,this.scheduleServ=o,this.auth=r,this.parent=l,this.p=0,this.pp=m.N.defautlPageSize,this.itemLength=0,this.currentPage=0,this.imgPath="",this.pattern="",this.subs=[],this.isSeachForm=!1}ngOnInit(){var t,n;this.imgPath=m.N.imgPath,this.form=new s.cw({dateStart:new s.NI(new Date),dateEnd:new s.NI(new Date)}),this.dateStart=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.dateEnd=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[v.e.ALL,v.e.READ])&&this.subs.push(this.dischargService.getOperationsOfOfficeIns(null===(n=null===(t=this.auth.getSession().user)||void 0===t?void 0:t.bureau)||void 0===n?void 0:n.id,this.dateStart,this.dateEnd,0,m.N.defautlPageSize).subscribe(i=>{var o;this.itemsPager=i.pager,this.itemLength=null===(o=i.pager)||void 0===o?void 0:o.totalElements})),this.formSearch=new s.NI,this.formSearch.valueChanges.pipe((0,ne.O)(""),(0,ie.w)(i=>{var o,r;return i.length>3&&this.dischargService.searchBureauPaging(null===(r=null===(o=this.auth.getSession().user)||void 0===o?void 0:o.bureau)||void 0===r?void 0:r.id,i,0,m.N.defautlPageSize).subscribe(l=>{var d;return this.itemsPager=l.pager,this.itemLength=null===(d=l.pager)||void 0===d?void 0:d.totalElements,(0,M.of)(this.itemsPager)}),(0,M.of)([])})).subscribe(i=>{})}clickSearchForm(){this.isSeachForm?this.isSeachForm=!1:(this.isSeachForm=!0,null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus())}ngAfterViewInit(){null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus()}edit(t){}view(t){this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[v.e.ALL,v.e.READ])&&this.dischargService.getDoc(t.id).pipe((0,jt.b)(n=>{var i;return this.scheduleServ.getTaxation(null===(i=n.ordonnancement)||void 0===i?void 0:i.id).pipe((0,Ht.U)(r=>(n.ordonnancement=r,n)))})).subscribe(n=>{var i,o;this.dialogConfig=new Z.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="cbg",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"Apurement d\xe9tail :"+(null!==(i=t.refDoc)&&void 0!==i?i:""),title:"Apurement d\xe9tail :"+(null!==(o=t.refDoc)&&void 0!==o?o:""),message:"Voulez vous imprimer la quittance (CPI)",action:"VIEW",data:n},this.dialogManager.open(Bt,this.dialogConfig).afterClosed().subscribe(r=>{})})}dateRangeChange(t,n){var i,o,r,l;if(null===(o=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.bureau)||void 0===o?void 0:o.id)if(t.value.length>0&&n.value.length>0){let d=t.value.split("/")[2]+"-"+t.value.split("/")[0]+"-"+t.value.split("/")[1],g=n.value.split("/")[2]+"-"+n.value.split("/")[0]+"-"+n.value.split("/")[1];this.dateStart=d,this.dateEnd=g,this.subs.push(this.dischargService.getOperationsOfOfficeIns(null===(l=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===l?void 0:l.id,d,g,0,m.N.defautlPageSize).subscribe(h=>{var p;this.container=h,this.itemLength=null===(p=null==h?void 0:h.pager)||void 0===p?void 0:p.totalElements,this.itemsPager=void 0,this.itemsPager=h.pager,this.parent.stat=h.sum}))}else console.log("desordre")}onPageChanged(t){var n,i,o,r,l,d;if(this.currentPage=t.pageIndex,null===(i=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.bureau)||void 0===i?void 0:i.id){if(this.formSearch.value&&this.formSearch.value.length>0)return void(this.formSearch.value.length>3&&this.dischargService.searchBureauPaging(null===(r=null===(o=this.auth.getSession().user)||void 0===o?void 0:o.bureau)||void 0===r?void 0:r.id,this.formSearch.value,t.pageIndex,m.N.defautlPageSize).subscribe(g=>{var h;this.itemsPager=g.pager,this.itemLength=null===(h=g.pager)||void 0===h?void 0:h.totalElements}));this.subs.push(this.dischargService.getOperationsOfOfficeIns(null===(d=null===(l=this.auth.getSession().user)||void 0===l?void 0:l.bureau)||void 0===d?void 0:d.id,this.dateStart,this.dateEnd,t.pageIndex,m.N.defautlPageSize).subscribe(g=>{var h,p,q;this.container=g,this.itemLength=null===(h=null==g?void 0:g.pager)||void 0===h?void 0:h.totalElements,this.itemsPager=void 0,this.itemsPager=g.pager,this.subs.push(this.dischargService.getOperationsOfOfficeIns(null===(q=null===(p=this.auth.getSession().user)||void 0===p?void 0:p.bureau)||void 0===q?void 0:q.id,this.dateStart,this.dateEnd).subscribe(E=>{this.parent.stat=E.sum}))}))}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(me),e.Y36(k.L),e.Y36(Z.uw),e.Y36(D.H),e.Y36(P.u),e.Y36(Ze))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-discharging"]],viewQuery:function(t,n){if(1&t&&e.Gf(Gt,7),2&t){let i;e.iGM(i=e.CRH())&&(n.searchElementRef=i.first)}},inputs:{itemsPager:"itemsPager"},decls:53,vars:9,consts:[[1,"az-content-label","mg-b-5","config-title"],[3,"formGroup"],[1,"row"],[1,"col-3"],[3,"rangePicker"],["matStartDate","","matInput","","placeholder","Start date","formControlName","dateStart"],["dateRangeStart",""],["matEndDate","","matInput","","placeholder","End date","formControlName","dateEnd",3,"dateChange"],["dateRangeEnd",""],["matSuffix","",3,"for"],["picker",""],[1,"col-2"],["value","option1"],["value","option2"],["value","option3"],[1,"col"],[1,"",2,"margin-top","20px","margin-left","-10","display","inline-block",3,"click"],[1,"fa","fa-search"],["class","row",4,"ngIf"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-y-30"],["class","table-responsive",4,"ngIf"],[1,"col-md-6"],["aria-label","Select page",3,"length","pageSize","hidePageSize","page"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"nav-search","clearfix"],["role","search",1,"navtop","navbar-form","home-search"],[1,"search-group"],["id","nav-search-input",1,"input-group","clearfix"],["type","text","placeholder","Search",1,"form-control","dropdown-toggle",3,"formControl"],["seachInput",""],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["scope","row"],[1,"rounded-circle",2,"width","40px","height","40px",3,"src"],[4,"ngIf"],[1,"btn-group"],["type","button",1,""],[1,"fa","fa-trash"],["type","button",1,"",3,"click"],[1,"fa","fa-edit"],["role","alert",1,"alert","alert-info"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"mat-form-field"),e.TgZ(6,"mat-label"),e._uU(7,"Filtrer par date"),e.qZA(),e.TgZ(8,"mat-date-range-input",4),e._UZ(9,"input",5,6),e.TgZ(11,"input",7,8),e.NdJ("dateChange",function(){e.CHM(i);const r=e.MAs(10),l=e.MAs(12);return n.dateRangeChange(r,l)}),e.qZA(),e.qZA(),e._UZ(13,"mat-datepicker-toggle",9),e._UZ(14,"mat-date-range-picker",null,10),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"mat-form-field"),e.TgZ(18,"mat-label"),e._uU(19,"Statut"),e.qZA(),e.TgZ(20,"mat-select"),e.TgZ(21,"mat-option"),e._uU(22,"None"),e.qZA(),e.TgZ(23,"mat-option",12),e._uU(24,"Tous"),e.qZA(),e.TgZ(25,"mat-option",13),e._uU(26,"Non pay\xe9"),e.qZA(),e.TgZ(27,"mat-option",14),e._uU(28,"Pay\xe9"),e.qZA(),e.TgZ(29,"mat-option",14),e._uU(30,"Pay\xe9 partiellement"),e.qZA(),e.TgZ(31,"mat-option",14),e._uU(32,"En souffrance"),e.qZA(),e.TgZ(33,"mat-option",14),e._uU(34,"Apur\xe9e"),e.qZA(),e.TgZ(35,"mat-option",14),e._uU(36,"Annul\xe9e"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",15),e.TgZ(38,"a",16),e.NdJ("click",function(){return n.clickSearchForm()}),e._UZ(39,"i",17),e.qZA(),e.qZA(),e.qZA(),e.YNc(40,Wt,8,1,"div",18),e.qZA(),e.TgZ(41,"div",19),e.TgZ(42,"div",20),e.TgZ(43,"button",21),e._UZ(44,"i",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(45,"hr",23),e.YNc(46,an,29,1,"div",24),e.TgZ(47,"div",2),e.TgZ(48,"div",25),e._uU(49," \xa0 "),e.qZA(),e.TgZ(50,"div",25),e.TgZ(51,"mat-paginator",26),e.NdJ("page",function(r){return n.onPageChanged(r)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(52,on,3,0,"div",27),e.qZA()}if(2&t){const i=e.MAs(15);e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("rangePicker",i),e.xp6(5),e.Q6J("for",i),e.xp6(27),e.Q6J("ngIf",n.isSeachForm),e.xp6(6),e.Q6J("ngIf",0==(null==n.itemsPager?null:n.itemsPager.empty)),e.xp6(5),e.Q6J("length",n.itemLength)("pageSize",n.pp)("hidePageSize",!0),e.xp6(1),e.Q6J("ngIf",1==(null==n.itemsPager?null:n.itemsPager.empty))}},directives:[s._Y,s.JL,s.sg,x.KE,x.hX,T.wx,T.zY,L.Nt,s.Fj,s.JJ,s.u,T.By,T.nW,x.R9,T._g,I.gD,X.ey,f.O5,G.NW,s.F,s.oH,f.sg],pipes:[f.JJ,f.uU],styles:[""]}),a})();const rn=[{path:"",component:Ae,data:{breadcrumb:"Finance"},children:[{path:"payments",component:te,data:{breadcrumb:"Paiements",roles:["finance","banks","account"]},children:[{path:"journaux",component:yt}]},{path:"banks",component:_e,canActivate:[$.x],data:{roles:["finance","banks","account"]}},{path:"discharging",component:Ze,canActivate:[$.x],children:[{path:"home",component:fe},{path:"ordonnancement",component:fe}],data:{roles:["finance","apurement"]}}]}];let sn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[$.x],imports:[[f.ez,C.Bz.forChild(rn),Et.N,L.c,It.JX,V.Bb,J.T5,I.LD,I.LD,x.lN,G.TU,Dt.rP,Pt.A0,T.FA]]}),a})()}}]);