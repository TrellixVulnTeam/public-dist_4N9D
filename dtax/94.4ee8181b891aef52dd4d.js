"use strict";(self.webpackChunkdtax=self.webpackChunkdtax||[]).push([[94],{8094:(Nn,wt,h)=>{h.r(wt),h.d(wt,{RecettesModule:()=>Dn});var Z=h(8583),t=h(7716),I=h(264),D=h(7538),w=h(7539);let Ht=(()=>{class a{constructor(i,e,n,o){this.route=i,this.router=e,this.auth=n,this.rolesChecker=o}ngOnInit(){var i,e,n,o,l,r,d,c,g;console.log(this.route),this.route.url.subscribe(p=>{console.log(p)}),(null===(i=this.route.snapshot)||void 0===i?void 0:i.children)&&(null===(n=(null===(e=this.route.snapshot.routeConfig)||void 0===e?void 0:e.children)[0].path)||void 0===n?void 0:n.includes("scheduling"))?this.rolesChecker.hasAnyRoles(this.auth.getSession().user,["ordonnancement","apurement"])&&this.router.navigate(["/recettes/scheduling"]):((null===(o=this.route.snapshot)||void 0===o?void 0:o.children)&&(null===(r=(null===(l=this.route.snapshot)||void 0===l?void 0:l.children)[0].path)||void 0===r?void 0:r.includes("declaration"))&&this.rolesChecker.hasAnyRoles(this.auth.getSession().user,["declaration","liquidation"])||(null===(d=this.route.snapshot)||void 0===d?void 0:d.children)&&(null===(g=(null===(c=this.route.snapshot)||void 0===c?void 0:c.children)[0].path)||void 0===g?void 0:g.includes("recouvrement"))&&this.rolesChecker.hasAnyRoles(this.auth.getSession().user,["recouvrement"]))&&this.router.navigate(["/recettes/declaration"])}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(I.gz),t.Y36(I.F0),t.Y36(D.u),t.Y36(w.L))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-home-recette"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},directives:[I.lC],styles:[""]}),a})();var b=h(6738),J=h(5758),m=h(473),k=h(1662),u=h(3679),_=h(2238),jt=h(6215),Y=h(5917),N=h(9111),T=h(2340),Bt=h(2298),Vt=h(7546),v=h(9949),zt=h(8380),X=h(6461),K=h(5647),dt=h(877),gt=h(9731),tt=h(8548),$t=h(8307),et=h(9761),it=h(3190),Gt=h(197),Wt=h(5304),nt=h(5704),E=h(3356),Yt=h(5733),Ot=h(6623),Q=h(778),at=h(4324),F=h(8939),ht=h(5466),Xt=h(1397),Lt=h(4570),Kt=h(5430),te=h(2596),ee=h(3071),ie=h(1533),ne=h(9630),ot=h(1602),j=h(2522),B=h(6627),lt=h(7832),pt=h(6640),S=h(8295),V=h(9983),z=h(1554),H=h(2458);function ae(a,s){1&a&&(t.ynx(0),t._uU(1," % "),t.BQk())}function oe(a,s){1&a&&(t.ynx(0,10),t._uU(1," $ "),t.BQk())}function le(a,s){if(1&a&&(t.TgZ(0,"option",9),t._uU(1),t.ALo(2,"number"),t.YNc(3,ae,2,0,"ng-container",3),t.YNc(4,oe,2,0,"ng-container",6),t.qZA()),2&a){const i=s.$implicit,e=t.oxw();t.Q6J("value",i.id),t.xp6(1),t.AsE("",i.libelle," ",t.xi3(2,5,i.montant,".2-2")," "),t.xp6(2),t.Q6J("ngIf","POURCENTAGE"==(null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(1),t.Q6J("ngIf","DOLLARS"==(null==e.item.taxe?null:e.item.taxe.devise))}}function se(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.AsE(" ",null==i.item.bien.bien?null:i.item.bien.bien.nature,"(",null==i.item.bien.bien?null:i.item.bien.bien.code,") ")}}function re(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.item.qte*(i.item.montant*i.item.baseCalcul/100),".2-2"),"$ ")}}function ue(a,s){if(1&a&&(t.ynx(0,10),t._uU(1),t.ALo(2,"number"),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.item.qte*i.item.montant,".2-2"),"$ ")}}let ce=(()=>{class a{constructor(){this.prices=[],this.emitDelete=new t.vpe,this.emitQteChanged=new t.vpe,this.emitBaseChanged=new t.vpe,this.emitStatusChanged=new t.vpe,this.item=new E.QY}ngOnInit(){console.log("ttt",this.item);let i=0;this.item.bailContexts&&this.item.bailContexts.length>0&&(this.item.bailContexts.forEach(e=>{i+=e.totalAmount}),this.item.bien=this.item.bailContexts[0].bien,this.item.baseCalcul=i)}onTauxChanged(i){var e;this.item.id=i;let n=null===(e=this.item.prices)||void 0===e?void 0:e.filter(o=>o.id==i);(null==n?void 0:n.length)>0&&(this.item.taxe=n[0])}onBaseChanged(i){this.emitBaseChanged.emit({index:this.index,quantite:i.target.value})}onQuantiteChanged(i){this.emitQteChanged.emit({index:this.index,quantite:i.target.value})}onRemoveTaxe(i){this.emitDelete.emit(i)}setPrincipal(i,e){this.item.checked=e.target.checked,this.emitStatusChanged.emit({item:this.item,status:e.target.checked})}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["item-cart"]],inputs:{item:"item",prices:"prices",index:"index"},outputs:{emitDelete:"emitDelete",emitQteChanged:"emitQteChanged",emitBaseChanged:"emitBaseChanged",emitStatusChanged:"emitStatusChanged"},decls:24,vars:11,consts:[[1,"rTableCell"],[3,"change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["type","number",2,"width","60px",3,"value","change"],["type","number",2,"width","60px",3,"value","disabled","change"],["{{}}","",4,"ngIf"],[1,"fa","fa-trash",3,"click"],["type","checkbox",1,"btn-info",3,"checked","change"],[3,"value"],["{{}}",""]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._uU(1,"\xa0"),t.qZA(),t.TgZ(2,"div",0),t._uU(3),t.qZA(),t.TgZ(4,"div",0),t._uU(5),t.qZA(),t.TgZ(6,"div",0),t._uU(7),t.qZA(),t.TgZ(8,"div",0),t.TgZ(9,"select",1),t.NdJ("change",function(o){return e.onTauxChanged(o)}),t.YNc(10,le,5,8,"option",2),t.qZA(),t.qZA(),t.TgZ(11,"div",0),t.YNc(12,se,2,2,"ng-container",3),t.qZA(),t.TgZ(13,"div",0),t.TgZ(14,"input",4),t.NdJ("change",function(o){return e.onQuantiteChanged(o)}),t.qZA(),t.qZA(),t.TgZ(15,"div",0),t.TgZ(16,"input",5),t.NdJ("change",function(o){return e.onBaseChanged(o)}),t.qZA(),t.qZA(),t.TgZ(17,"div",0),t.YNc(18,re,3,4,"ng-container",3),t.YNc(19,ue,3,4,"ng-container",6),t.qZA(),t.TgZ(20,"div",0),t.TgZ(21,"div"),t.TgZ(22,"i",7),t.NdJ("click",function(){return e.onRemoveTaxe(e.item)}),t.qZA(),t.TgZ(23,"input",8),t.NdJ("change",function(o){return e.setPrincipal(e.item,o)}),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(null==e.item||null==e.item.tax?null:e.item.tax.code),t.xp6(2),t.Oqu(null==e.item||null==e.item.tax?null:e.item.tax.acte),t.xp6(2),t.Oqu(null==e.item||null==e.item.tax?null:e.item.tax.nom),t.xp6(3),t.Q6J("ngForOf",e.item.prices),t.xp6(2),t.Q6J("ngIf",e.item.bien),t.xp6(2),t.Q6J("value",e.item.qte),t.xp6(2),t.Q6J("value",e.item.baseCalcul)("disabled","POURCENTAGE"!=(null==e.item||null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(2),t.Q6J("ngIf","POURCENTAGE"==(null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(1),t.Q6J("ngIf","DOLLARS"==(null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(4),t.Q6J("checked",e.item.checked))},directives:[Z.sg,Z.O5,u.YN,u.Kr],pipes:[Z.JJ],styles:[""]}),a})();function de(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.item.montant,".2-2"),"% ")}}function ge(a,s){if(1&a&&(t.ynx(0,3),t._uU(1),t.ALo(2,"number"),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.item.montant,".2-2"),"$ ")}}function he(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.AsE(" ",null==i.item.bien.bien?null:i.item.bien.bien.nature,"(",null==i.item.bien.bien?null:i.item.bien.bien.code,") ")}}function pe(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.item.qte*(i.item.montant*i.item.baseCalcul/100),".2-2"),"$ ")}}function me(a,s){if(1&a&&(t.ynx(0,3),t._uU(1),t.ALo(2,"number"),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.item.qte*i.item.montant,".2-2"),"$ ")}}let Ze=(()=>{class a{constructor(){this.prices=[],this.emitDelete=new t.vpe,this.emitQteChanged=new t.vpe,this.emitBaseChanged=new t.vpe,this.item=new E.QY}ngOnInit(){var i,e;let n=0;this.item.tax.secteur=null===(e=null===(i=this.item.tax)||void 0===i?void 0:i.secteur)||void 0===e?void 0:e.replace("SECTEUR",""),this.item.bailContexts&&this.item.bailContexts.length>0&&(this.item.bailContexts.forEach(o=>{n+=o.totalAmount}),this.item.bien=this.item.bailContexts[0].bien,this.item.baseCalcul=n)}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-item-taxe"]],inputs:{item:"item",prices:"prices",index:"index"},outputs:{emitDelete:"emitDelete",emitQteChanged:"emitQteChanged",emitBaseChanged:"emitBaseChanged"},decls:23,vars:14,consts:[[1,"rTableCell"],[4,"ngIf"],["{{}}","",4,"ngIf"],["{{}}",""]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._uU(1,"\xa0"),t.qZA(),t.TgZ(2,"div",0),t._uU(3),t.qZA(),t.TgZ(4,"div",0),t._uU(5),t.qZA(),t.TgZ(6,"div",0),t._uU(7),t.qZA(),t.TgZ(8,"div",0),t._uU(9),t.qZA(),t.TgZ(10,"div",0),t.YNc(11,de,3,4,"ng-container",1),t.YNc(12,ge,3,4,"ng-container",2),t.qZA(),t.TgZ(13,"div",0),t.YNc(14,he,2,2,"ng-container",1),t.qZA(),t.TgZ(15,"div",0),t._uU(16),t.qZA(),t.TgZ(17,"div",0),t._uU(18),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"div",0),t.YNc(21,pe,3,4,"ng-container",1),t.YNc(22,me,3,4,"ng-container",2),t.qZA()),2&i&&(t.xp6(3),t.Oqu(null==e.item.tax?null:e.item.tax.secteur),t.xp6(2),t.Oqu(null==e.item||null==e.item.tax?null:e.item.tax.code),t.xp6(2),t.Oqu(null==e.item||null==e.item.tax?null:e.item.tax.acte),t.xp6(2),t.Oqu(null==e.item||null==e.item.tax?null:e.item.tax.nom),t.xp6(2),t.Q6J("ngIf","POURCENTAGE"==(null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(1),t.Q6J("ngIf","DOLLARS"==(null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(2),t.Q6J("ngIf",e.item.bien),t.xp6(2),t.Oqu(e.item.qte),t.xp6(2),t.hij("",t.xi3(19,11,e.item.baseCalcul,".2-2"),"$ "),t.xp6(3),t.Q6J("ngIf","POURCENTAGE"==(null==e.item.taxe?null:e.item.taxe.devise)),t.xp6(1),t.Q6J("ngIf","DOLLARS"==(null==e.item.taxe?null:e.item.taxe.devise)))},directives:[Z.O5],pipes:[Z.JJ],styles:[""]}),a})();const _e=["stepper"],fe=["canvas"],ve=["inputRole"];function Te(a,s){if(1&a&&(t.TgZ(0,"div",45),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"div",46),t._uU(5),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.Oqu(null==i.erro?null:i.erro.error),t.xp6(3),t.hij(" ",null==i.erro?null:i.erro.description," ")}}function xe(a,s){1&a&&t._uU(0,"Recherche du contribuable ")}function Ae(a,s){if(1&a&&(t.TgZ(0,"ng-option",47),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.nom)}}function be(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.BQk()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.AsE(" ",i.nom," ",i.prenom," "),t.xp6(2),t.hij("(",i.nuc,") "),t.xp6(1),t.AsE("| ",i.typePersonne," | ",i.phone," ")}}function qe(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.BQk()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.raisonSociale," "),t.xp6(2),t.hij("(",i.nuc,") "),t.xp6(1),t.AsE("|| ",i.typePersonne," | ",i.phone," ")}}function Ce(a,s){if(1&a&&(t.TgZ(0,"mat-option",47),t.TgZ(1,"div",48),t.TgZ(2,"div",49),t._UZ(3,"img",50),t.qZA(),t.TgZ(4,"div",9),t.YNc(5,be,5,5,"ng-container",37),t.YNc(6,qe,5,4,"ng-container",37),t.qZA(),t.qZA(),t.qZA()),2&a){const i=s.$implicit,e=t.oxw();t.Q6J("value",i),t.xp6(3),t.Q6J("src",e.imgPath+""+i.photo+"."+i.ext,t.LSH),t.xp6(2),t.Q6J("ngIf","P"==i.typePersonne),t.xp6(1),t.Q6J("ngIf","M"==i.typePersonne)}}function Ue(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"img",55,56),t.BQk()),2&a){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.imgPath+""+i.selectedTaxer.photo+"."+i.selectedTaxer.ext,t.LSH)}}function Se(a,s){1&a&&(t.ynx(0),t._UZ(1,"img",57),t.BQk())}function Ee(a,s){if(1&a&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.AsE("",null==i.selectedTaxer?null:i.selectedTaxer.nom," ",null==i.selectedTaxer?null:i.selectedTaxer.prenom," (P)")}}function Ie(a,s){if(1&a&&(t.TgZ(0,"h2"),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.hij("",null==i.selectedTaxer?null:i.selectedTaxer.raisonSociale," "),t.xp6(2),t.hij(" ",null==i.selectedTaxer?null:i.selectedTaxer.nom," (M) ")}}function De(a,s){if(1&a&&(t.TgZ(0,"div",51),t.TgZ(1,"div",52),t.TgZ(2,"div",53),t.YNc(3,Ue,3,1,"ng-container",37),t.YNc(4,Se,2,0,"ng-container",37),t.qZA(),t.TgZ(5,"div"),t.YNc(6,Ee,2,2,"h2",37),t.YNc(7,Ie,4,2,"h2",37),t.TgZ(8,"h3"),t._UZ(9,"i",38),t._uU(10),t.qZA(),t.TgZ(11,"p"),t.TgZ(12,"strong"),t._UZ(13,"i",39),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"p"),t.TgZ(16,"strong"),t._UZ(17,"i",54),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(3),t.Q6J("ngIf",null!=i.selectedTaxer&&null!=i.selectedTaxer.photo),t.xp6(1),t.Q6J("ngIf",!(null!=i.selectedImage&&null!=i.selectedImage.data)),t.xp6(2),t.Q6J("ngIf","P"==(null==i.selectedTaxer?null:i.selectedTaxer.typePersonne)),t.xp6(1),t.Q6J("ngIf","M"==(null==i.selectedTaxer?null:i.selectedTaxer.typePersonne)),t.xp6(3),t.hij(" ",null==i.selectedTaxer?null:i.selectedTaxer.nuc,""),t.xp6(4),t.hij(" ",null==i.selectedTaxer?null:i.selectedTaxer.phone,""),t.xp6(4),t.hij(" ",null==i.selectedTaxer?null:i.selectedTaxer.email,"")}}function Ne(a,s){1&a&&t._uU(0,"Calcul")}function we(a,s){if(1&a&&(t.TgZ(0,"ng-option",47),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.libelle)}}function Ye(a,s){if(1&a&&(t.TgZ(0,"ng-option",47),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.AsE("",i.nom," | ",i.nature," ")}}function Oe(a,s){if(1&a&&(t.TgZ(0,"ng-option",47),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij("",i.nom," ")}}function Le(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){return t.CHM(i),t.oxw().calcul()}),t._uU(1,"Calculer"),t.qZA()}}function Pe(a,s){if(1&a){const i=t.EpF();t.ynx(0),t.TgZ(1,"item-cart",59),t.NdJ("emitDelete",function(){const o=t.CHM(i).index;return t.oxw().onItemTaxeRemoved(o)})("emitQteChanged",function(n){return t.CHM(i),t.oxw().onTaxeQteChanged(n)})("emitBaseChanged",function(n){return t.CHM(i),t.oxw().onTaxeBaseChanged(n)})("emitStatusChanged",function(n){const l=t.CHM(i).index;return t.oxw().onStatusItemChange(n,l)}),t.qZA(),t.BQk()}if(2&a){const i=s.$implicit,e=s.index;t.xp6(1),t.Q6J("item",i)("prices",i.prices)("index",e)}}function ye(a,s){1&a&&t._uU(0,"Recapitulatif ")}function Je(a,s){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.AsE(" ",null==i.selectedTaxer?null:i.selectedTaxer.nom," ",null==i.selectedTaxer?null:i.selectedTaxer.prenom," (P)")}}function Re(a,s){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"strong"),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.hij(" ",null==i.selectedTaxer?null:i.selectedTaxer.raisonSociale," "),t.xp6(2),t.hij(" ",null==i.selectedTaxer?null:i.selectedTaxer.nom," (M) ")}}function Me(a,s){if(1&a&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function ke(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"app-item-taxe",60),t.BQk()),2&a){const i=s.$implicit,e=s.index;t.xp6(1),t.Q6J("item",i)("prices",i.prices)("index",e)}}function Qe(a,s){1&a&&t._uU(0,"Finalisation")}function Fe(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",61),t.TgZ(2,"mat-icon",62),t._uU(3,"check_circle_outline"),t.qZA(),t.TgZ(4,"div",61),t.TgZ(5,"h1"),t._uU(6,"Success"),t.qZA(),t.TgZ(7,"p"),t._uU(8,"Operation reussie avec success"),t.qZA(),t.TgZ(9,"h2"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12,"La d\xe9claration a \xe9t\xe9 cr\xe9\xe9e avec succes. Un mail/sms est envoy\xe9 \xe0/au adresse/phone mail du contribuable pour notification. Veuillez imprimer la fiche de d\xe9claration si n\xe9cessaire "),t.qZA(),t.TgZ(13,"div",7),t.TgZ(14,"div",63),t.NdJ("click",function(){return t.CHM(i),t.oxw().onView()}),t.TgZ(15,"a",64),t._uU(16,"Voir d\xe9tail"),t.qZA(),t.qZA(),t.TgZ(17,"div",63),t.NdJ("click",function(){return t.CHM(i),t.oxw().print()}),t.TgZ(18,"a",64),t._UZ(19,"i",65),t._uU(20," Impriner"),t.qZA(),t.qZA(),t.TgZ(21,"div",63),t.NdJ("click",function(){return t.CHM(i),t.oxw().init()}),t.TgZ(22,"a",66),t._uU(23,"Nouvelle d\xe9claration"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const i=t.oxw();t.xp6(10),t.Oqu(i.refDoc)}}function He(a,s){if(1&a&&(t.TgZ(0,"div",6),t.TgZ(1,"div",61),t.TgZ(2,"mat-icon",67),t._uU(3,"block"),t.qZA(),t.TgZ(4,"div",61),t.TgZ(5,"h1"),t._uU(6,"Erreur"),t.qZA(),t.TgZ(7,"p"),t._uU(8,"Operation \xe9chou\xe9e "),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(10),t.hij(" ",null==i.erro?null:i.erro.description," ")}}function je(a,s){1&a&&(t.TgZ(0,"div",6),t.TgZ(1,"div",61),t._UZ(2,"img",68),t.TgZ(3,"div",61),t.TgZ(4,"h1"),t._uU(5,"Patientez"),t.qZA(),t.TgZ(6,"p"),t._uU(7,"Operation en cours "),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function Be(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){return t.CHM(i),t.oxw().prev()}),t._UZ(1,"i",70),t._uU(2," Prev "),t.qZA()}}function Ve(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){return t.CHM(i),t.oxw().nexts()}),t._UZ(1,"i",71),t._uU(2),t.qZA()}if(2&a){const i=t.oxw();t.xp6(2),t.hij(" ",i.btnNextLabel," ")}}let mt=(()=>{class a{constructor(i,e,n,o,l,r,d,c,g,p,f,C,x,U,O,L,P){this.dialog=i,this.taxSer=e,this.pdfMan=n,this.configServ=o,this.appStor=l,this.cartSert=r,this.taxServ=d,this.auth=c,this.contSrv=g,this.configService=p,this.data=f,this.regionalService=C,this.userServ=x,this.assietteConf=U,this.agentMan=O,this.dialogServ=L,this.dialogMan=P,this.taxePrices=[],this.event=new t.vpe,this.eventForm=new t.vpe,this.imgPath="",this.currentPage=0,this.refDoc="",this.separatorKeysCodes=[X.K5,X.OC],this.hasError=!1,this.logoUrl="",this.couldSelectMultiRoles=!0,this.categories=[],this.dataf=new gt.sw,this.moralOrPhysic=!1,this.isEnded=0,this.isShown=!1,this.couldSave=!0,this.isEditable=!1,this.couldBack=!1,this.btnNextLabel="Suivant",this.townOrTerritory=!0,this.secteurOrChefferie=!0,this.regies=[],this.prices=[],this.centers=[],this.provinces=[],this.countries=[],this.towns=[],this.communes=[],this.secteurs=[],this.actes=[],this.taxes=[],this.territoires=[],this.chefferies=[],this.roles=[],this.access=[K.P.WEB_ONLY,K.P.MOBILE_ONLY,K.P.API,K.P.ALL],this.selectedRoles=[],this.selectable=!0,this.removable=!0,this.errors=[],this.civilities=["CELIBATAIRE","MARIE","VEUF","DIVORCE"],this.typeIdentities=[tt.c.ELECTOR,tt.c.PASSPORT,tt.c.DRIVING_CARD,tt.c.OTHER],this.formeJuridiques=[],this.subs=[],this.properties=[]}ngAfterContentInit(){this.dataf.exercice=(new Date).getUTCFullYear()+""}close(){this.cartSert.clear(),this.dialog.close({status:!1,data:this.dataf})}next(i){console.log("listener taxation context...",i);let e=new E.QY;if(e.taxe=new nt.sO,0==(i=i).status)return this.hasError=!0,void(this.erro=new v.D("Erreur de saisie","Veuillez s\xe9lectionner le bien correspondant pour cette declaration"));switch(e.taxe=i.prices[0],e.taxe.taxe={id:this.selectedNature.id},e.prices=i.taxe.prices,e.tax=i.taxe.taxe,e.montant=e.taxe.montant,i.nature){case"BAIL":e.bailContexts.push(i.data);break;case"VEHICULE ":e.bien=i.data}this.cartSert.items.length>0?(e.checked=!1,e.order=E.Mg.AUXILIARY):(e.checked=!0,e.order=E.Mg.PRINCIPAL),this.cartSert.addTaxe(e),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}error(i){}complete(){console.log("complete context")}ngOnDestroy(){this.subs=[]}printp(){this.pdfMan.generateDI()}rangeYear(){let i=(new Date).getUTCFullYear();return Array(i-(i-20)).fill("").map((n,o)=>i-o)}ngOnInit(){var i,e,n,o,l,r,d;if(this.appStor.exist("taux")?(this.taux=this.appStor.getJson("taux"),this.cartSert.taux=this.taux):this.configServ.getCurrentTaux(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.regie)||void 0===e?void 0:e.id).subscribe(c=>{this.taux=c,this.cartSert.taux=this.taux}),this.selectedTaxer=this.cartSert.taxer,this.subs.push(this.event.subscribe(this)),this.acteForm=new u.NI,this.taxeForm=new u.NI,this.imgPath=T.N.imgPath,this.contribuableControl=new u.NI(""),this.contribuableControl.valueChanges.pipe((0,$t.b)(c=>{}),(0,et.O)(""),(0,it.w)(c=>c.length>2?this.contSrv.searchContribuables(c).pipe((0,Gt.x)(()=>{})):(0,Y.of)([])),(0,Wt.K)(c=>"")).subscribe(c=>{this.contribuables=(0,Y.of)(c)}),this.subs.push(this.assietteConf.fetchRegies().subscribe(c=>{var g,p;this.regies=c,this.regieFilter.setValue(null===(p=null===(g=this.auth.getSession().user)||void 0===g?void 0:g.regie)||void 0===p?void 0:p.id),this.subs.push(this.taxServ.getSecteurs().subscribe(f=>{this.secteurs=f,this.hasError=!1},f=>{this.hasError=!0,this.erro=new v.D("Erreur de connexion","Erreur de connexion, impossible de charger les secteurs")}))})),this.regieFilter=new u.NI,this.formDoc=new u.cw({typeidentity:new u.NI("",[u.kI.required]),identity:new u.NI("",[u.kI.required]),rccm:new u.NI("",[]),idnational:new u.NI("",[]),numimpot:new u.NI("",[])}),this.dataf.typePersonne="P",this.form=new u.cw({nom:new u.NI("",[u.kI.required]),prenom:new u.NI("",[u.kI.required]),postnom:new u.NI("",[]),dateNaissance:new u.NI("",[]),sexe:new u.NI("",[]),civility:new u.NI("",[]),profesion:new u.NI("",[]),raisonSociale:new u.NI("",[]),nationality:new u.NI("",[u.kI.required]),forme:new u.NI("",[]),email:new u.NI("",[u.kI.email]),phone:new u.NI("",[u.kI.required])}),this.adressForm=new u.cw({province:new u.NI("",[u.kI.required]),town:new u.NI,territoire:new u.NI,num:new u.NI,avenue:new u.NI,quartier:new u.NI,commune:new u.NI,secteur:new u.NI,fax:new u.NI,url:new u.NI,website:new u.NI,chefferie:new u.NI}),this.subs.push(this.configService.getForm().subscribe(c=>{this.formeJuridiques=c})),this.subs.push(this.regionalService.getCountries().subscribe(c=>{this.countries=c,this.subs.push(this.regionalService.getProvinces().subscribe(g=>{this.provinces=g}))})),this.data.action)switch(this.data.action){case"EDIT":{this.isEditable=!0;let c=this.data.data;this.dataf=this.data.data,this.dataf.agent=void 0,this.dataf.rccmDoc=void 0,this.dataf.numImpotDoc=void 0,this.dataf.idNationalDoc=void 0,this.dataf.identite=void 0,this.dataf.photo=void 0,(null===(n=c.adresse)||void 0===n?void 0:n.commune)?(this.dataf.adresse.idcom=c.adresse.commune.id,this.dataf.adresse.typeEmplacement=dt.a.COMUNE):(null===(o=c.adresse)||void 0===o?void 0:o.secteur)?(this.dataf.adresse.idcom=c.adresse.secteur.id,this.dataf.adresse.typeEmplacement=dt.a.SECTEUR):(null===(l=c.adresse)||void 0===l?void 0:l.chefferie)&&(this.dataf.adresse.idcom=c.adresse.chefferie.id,this.dataf.adresse.typeEmplacement=dt.a.CHEFFERIE),this.dataf.adresse.province=null===(r=c.adresse)||void 0===r?void 0:r.province,this.dataf.nationality=c.nationality.id,this.dataf.formeJuridique=null===(d=c.formeJuridique)||void 0===d?void 0:d.id,this.moralOrPhysic="P"!=c.typePersonne,console.log(this.dataf)}}}valid(){}nexts(){var i,e,n;if(-1===this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.erro=new v.D("Enregistrement en cours","Veuillez patienter, votre op\xe9ration est en cours"));this.hasError=!1;let o=null===(i=this.stepper)||void 0===i?void 0:i.selectedIndex;switch(this.btnNextLabel=1==o?"Enregistrer":"Suivant",console.log(this.cartSert),o){case 0:if(this.selectedTaxer){if(this.moralOrPhysic&&((!this.dataf.raisonSociale||(null===(n=null===(e=this.dataf)||void 0===e?void 0:e.raisonSociale)||void 0===n?void 0:n.length)<1)&&this.errors.push("Veuillez selectionner la forme juridique"),this.dataf.formeJuridique||this.errors.push("Veuillez saisir la raison sociale"),this.errors.length>0))return this.hasError=!0,this.isShown=!1,void(this.erro=new v.D("Erreur de saisie","Veuillez Corriger les champs s\xe9lectionner"));this.dataf.identite=this.selectedImage,this.currentPage++,this.isShown=!0,this.couldBack=!0}else this.hasError=!0,this.isShown=!1,this.erro=new v.D("Erreur de saisie","Veuillez corriger certains champs");break;case 1:if(!(this.cartSert.items.length>0))return this.hasError=!0,this.isShown=!1,void(this.erro=new v.D("Erreur de saisie","Veuillez corriger certains champs"));this.currentPage++;break;case 2:{let l=[];this.cartSert.items.length>0?this.cartSert.items.forEach(r=>{var d,c,g;if(null===(d=r.tax)||void 0===d?void 0:d.code)switch(r.tax.code){case"0001":r.bien||l.push("Un element est mal d\xe9clar\xe9. Veuillez proceder \xe0 la s\xe9lection du bien concern\xe9");break;case"0002":r.bien||(r.hasError=!0,l.push("Un element est mal d\xe9clar\xe9. Veuillez proceder \xe0 la s\xe9lection du bien concern\xe9"));break;case"0003":r.bien||l.push("Un element est mal d\xe9clar\xe9. Veuillez proceder \xe0 la s\xe9lection du bien concern\xe9")}else"DOLLARS"==(null===(c=r.taxe)||void 0===c?void 0:c.devise)||"POURCENTAGE"==(null===(g=r.taxe)||void 0===g?void 0:g.devise)&&r.baseCalcul<1&&(r.hasError=!0,r.error="La base de calcul n'est pas inscrite. Veuillez remplir tous les \xe9lemtns de calcul",l.push("Un element est mal d\xe9clar\xe9. La base de calcul n'est pas inscrite. Veuillez remplir tous les \xe9lemtns de calcul"))}):(l.push("Aucun acte n'a \xe9t\xe9 ajout\xe9 "),this.hasError=!0,this.erro=new v.D("Erreur de saisir","Aucun acte n'a \xe9t\xe9 ajout\xe9")),l.length>0?(this.hasError=!0,this.erro=new v.D("Erreur de saisir","Veuillez corriger la d\xe9claration")):(this.currentPage=3,this.couldBack=!1,this.cartSert.toAdapter(),this.couldSave=!1,this.hasError=!1,this.isEnded=-1,this.taxSer.initTaxation(this.cartSert.toAdapter()).subscribe(r=>{this.isEnded=1,this.refDoc=r.refDoc,this.couldBack=!0,this.cartSert.clear(),this.eventForm.emit({status:"finished"})},r=>{this.hasError=!0,this.isEnded=0,this.erro=new v.D("Erreur de serveur",r.error),this.couldBack=!0,this.couldSave=!1}))}}this.stepper.selectedIndex=this.currentPage}prev(){var i,e,n,o;if(3==(null===(i=this.stepper)||void 0===i?void 0:i.selectedIndex)&&-1==this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.erro=new v.D("Enregistrement en cours","Veuillez patienter votre op\xe9ration est en cours"));if(this.hasError=!1,3==(null===(e=this.stepper)||void 0===e?void 0:e.selectedIndex)&&1==this.isEnded)return this.hasError=!0,this.isShown=!1,this.erro=new v.D("Enregistrement du nouvel acte","Veuillez enregistrer un nouvel acte si il y en a autres"),this.stepper.selectedIndex=0,this.currentPage=0,this.couldSave=!0,this.couldBack=!1,void(this.btnNextLabel="Suivant");this.hasError=!1,3==(null===(n=this.stepper)||void 0===n?void 0:n.selectedIndex)&&0==this.isEnded&&(this.couldBack=!0,this.couldSave=!0);let l=null===(o=this.stepper)||void 0===o?void 0:o.selectedIndex;this.btnNextLabel=3==l?"Enregistrer":"Suivant",this.currentPage=l,this.currentPage--,this.stepper.selectedIndex=this.currentPage}fileImageEvent(i){this.hasError=!1,i.target.files.length>0&&this.convertFile(i.target.files[0])}convertFile(i){const e=new Bt.t(1),n=new FileReader;return n.readAsDataURL(i),n.onload=o=>{try{let l=new Image;l.src=o.target.result,l.onload=r=>{var d;null===(d=this.ctx)||void 0===d||d.drawImage(l,0,0,120,120);let f=zt.b$.Base64Compile(this.canvas.nativeElement.toDataURL());this.selectedImage=new Vt.$(f[0],f[1]),this.logoUrl=o.target.result}}catch(l){this.erro=new v.D,this.erro.error=l.message,this.erro.description="Veuillez s\xe9lectionner l'image qui reste le format",this.hasError=!0}},e}onView(){}init(){this.currentPage=0,this.stepper.selectedIndex=this.currentPage,this.dataf=new gt.sw,this.cartSert.clear()}modelChanged(i){const n=new Date(Date.parse(i)).toLocaleString().split(" ");this.dataf.dateNaissance=n[0].substring(0,n[0].length-1),console.log(n)}showTaxer(i){return i?"P"==i.typePersonne?i.nom+" "+i.prenom+"("+i.nuc+")":i.raisonSociale+"("+i.nuc+")":""}onContribuableChanged(i){}onSelectTaxer(i){this.selectedTaxer=i.option.value,this.subs.push(this.contSrv.getContribuableBiens(this.selectedTaxer.id).subscribe(e=>{this.properties=e}))}onSecteurChanged(i){this.acteForm.setValue(""),this.taxeForm.setValue(""),i>0&&this.subs.push(this.taxServ.fetchActeOfSecteur(i).subscribe(e=>{this.actes=e},e=>{this.hasError=!0,this.erro=new v.D("Erreur de connexion","Erreur de connexion, impossible de charger les secteurs")}))}onActeChanged(i){this.taxeForm.setValue(""),i>0&&this.subs.push(this.taxServ.fetchTaxesOfActe(i).subscribe(e=>{this.taxes=e,0==e.length&&(this.hasError=!0,this.erro=new v.D("Info","Aucune nature acte configur\xe9"))},e=>{this.hasError=!0,this.erro=new v.D("Erreur de connexion","Erreur de connexion, impossible de charger les secteurs")}))}onNatureChange(i){if(this.taxes&&0!=this.taxes.length){if(!i)return;this.selectedNature=this.taxes.filter((o,l)=>o.id==i)[0],this.taxePrices.filter((o,l)=>{var r;return(null===(r=o.taxe)||void 0===r?void 0:r.id)==i}),this.cartSert.items.filter(o=>{var l,r;return(null===(r=null===(l=o.taxe)||void 0===l?void 0:l.taxe)||void 0===r?void 0:r.id)==i}).length>0?console.log("iiiiii"):this.subs.push(this.taxServ.getPricesOfTaxeOfRegie(i,this.auth.getSession().user.regie.id).subscribe(o=>{var l,r;if(this.prices=o,0==o.length)return this.hasError=!0,void(this.erro=new v.D("Aucune configuration des taux relative \xe0 cette nature d'acte","Aucune configuration des taux relative \xe0 cette nature d'acte"));if(this.hasError=!1,null===(l=this.selectedNature)||void 0===l?void 0:l.codeinterne)switch(null===(r=this.selectedNature)||void 0===r?void 0:r.codeinterne){case"0001":this.taxePrices.push({taxe:this.selectedNature,prices:o,contrainte:"FONCIER"});break;case"0002":this.taxePrices.push({taxe:this.selectedNature,prices:o,contrainte:"BAIL"});break;case"0003":case"0004":this.taxePrices.push({taxe:this.selectedNature,prices:o,contrainte:"VEHICULE"});break;default:this.taxePrices.push({taxe:this.selectedNature,prices:o})}else this.taxePrices.push({taxe:this.selectedNature,prices:o});this.taxePrices=[...new Set(this.taxePrices)]},o=>{this.hasError=!0,this.erro=new v.D("","Erreur de connexion, Imposible de charger les taux")}))}else this.dialogServ.open({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Boite de dialog Avertissement",message:"Taxes pas t\xe9l\xe9charg\xe9es",action:"SHOW"}})}calcul(){var i;if(this.selectedNature)if(this.cartSert.isInit()){let e=this.taxePrices.filter((o,l)=>{var r,d;return(null===(r=o.taxe)||void 0===r?void 0:r.id)==(null===(d=this.selectedNature)||void 0===d?void 0:d.id)}),n=this.taxePrices.filter((o,l)=>{var r,d;return(null===(r=o.taxe)||void 0===r?void 0:r.id)==(null===(d=this.selectedNature)||void 0===d?void 0:d.id)}).map((o,l)=>l);if(e.length>0){let o=this.cartSert.items.filter(l=>{var r,d,c;return(null===(d=null===(r=l.taxe)||void 0===r?void 0:r.taxe)||void 0===d?void 0:d.id)==(null===(c=this.selectedNature)||void 0===c?void 0:c.id)});if(e[n[0]].contrainte)switch(e[n[0]].contrainte){case"BAIL":this.dialogMan.open(Yt.Z,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Context de bail",message:"Veuillez remplir le context de bail",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(l=>{console.log(l),l&&l.status&&(l.taxe=e[n[0]],l.index=n[0],l.prices=e[n[0]].prices,l.nature="BAIL",this.event.emit(l))});break;case"VEHICULE":this.dialogMan.open(Ot.O,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"S\xe9lection du v\xe9hicule",message:"Veuillez s\xe9lectionner le v\xe9hiculer \xe0 taxer",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(l=>{l&&l.status&&(l.taxe=e[n[0]],l.index=n[0],l.nature="VEHICULE",l.prices=e[n[0]].prices,this.event.emit(l))})}else if(o.length>0)console.log("Cette taxe est d\xe9j\xe0 dans la carte");else if(n){let l=new E.QY;l.taxe=new nt.sO,l.checked=!1,l.order=E.Mg.AUXILIARY,l.taxe=this.prices[n[0]],l.taxe.taxe={id:this.selectedNature.id},l.prices=e[n[0]].prices,l.tax=e[n[0]].taxe,l.montant=l.taxe.montant,this.cartSert.addTaxe(l),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}}else console.log("taxes non s\xe9lectionn\xe9e ou prices non t\xe9l\xe9charger")}else{let e=new gt.k;e.id=null===(i=this.selectedTaxer)||void 0===i?void 0:i.id,this.cartSert.init(e,[],this.dataf.exercice),this.cartSert.taxer=this.selectedTaxer;let n=this.taxePrices.filter((o,l)=>{var r,d;return(null===(r=o.taxe)||void 0===r?void 0:r.id)==(null===(d=this.selectedNature)||void 0===d?void 0:d.id)});if(n.length>0){let o=this.taxePrices.filter((l,r)=>{var d,c;return(null===(d=l.taxe)||void 0===d?void 0:d.id)==(null===(c=this.selectedNature)||void 0===c?void 0:c.id)}).map((l,r)=>r);if(n[o[0]].contrainte)switch(n[o[0]].contrainte){case"BAIL":this.dialogMan.open(Yt.Z,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Context de bail",message:"Veuillez remplir le context de bail",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(r=>{console.log(r),r&&r.status&&(r.taxe=n[o[0]],r.nature="BAIL",r.index=o[0],r.prices=n[o[0]].prices,this.event.emit(r))});break;case"VEHICULE":this.dialogMan.open(Ot.O,{disableClose:!0,width:"60%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"S\xe9lection du v\xe9hicule",message:"Veuillez s\xe9lectionner le v\xe9hiculer \xe0 taxer",action:"SHOW",data:{biens:this.properties}}}).afterClosed().subscribe(r=>{r&&r.status&&(r.taxe=n[o[0]],r.index=o[0],r.nature="VEHICULE",r.prices=n[o[0]].prices,this.event.emit(r))});break;default:let l=new E.QY;l.taxe=new nt.sO,l.checked=!0,l.order=E.Mg.PRINCIPAL,l.taxe=this.prices[0],l.taxe.taxe={id:this.selectedNature.id},l.prices=n[0].prices,l.tax=n[0].taxe,l.montant=l.taxe.montant,this.cartSert.addTaxe(l),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}else{let l=new E.QY;l.taxe=new nt.sO,l.checked=!0,l.order=E.Mg.PRINCIPAL,l.taxe=this.prices[0],l.taxe.taxe={id:this.selectedNature.id},l.prices=n[0].prices,l.tax=n[0].taxe,l.montant=l.taxe.montant,this.cartSert.addTaxe(l),this.prices=[],this.taxeForm.setValue(""),this.selectedNature=void 0}}else console.log("taxe non s\xe9lectionner")}else this.dialogServ.open({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Boite de dialog Avertissement",message:"Taxes pas t\xe9l\xe9charg\xe9es",action:"SHOW"}})}onItemTaxeRemoved(i){this.cartSert.items.splice(i,1)}onTaxeQteChanged(i){i&&(this.cartSert.items[i.index].qte=i.quantite>0?i.quantite:1)}onTaxeBaseChanged(i){i&&(this.cartSert.items[i.index].baseCalcul=i.quantite>0?i.quantite:0)}print(){this.pdfMan.generateDI()}onStatusItemChange(i,e){if(i.status){for(let n=0;n<this.cartSert.items.length;n++)this.cartSert._items[n].order=E.Mg.AUXILIARY,this.cartSert._items[n].checked=!1;this.cartSert._items[e].order=E.Mg.PRINCIPAL,this.cartSert._items[e].checked=!0}}exerciceChanged(i){this.cartSert.updateExercice(i)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(_.so),t.Y36(Q.m),t.Y36(at.$),t.Y36(F.E),t.Y36(ht.I),t.Y36(Xt.b),t.Y36(Lt.K),t.Y36(D.u),t.Y36(Kt.l),t.Y36(F.E),t.Y36(_.WI),t.Y36(te.N),t.Y36(ee.K),t.Y36(ie.f),t.Y36(ne.t),t.Y36(ot.x),t.Y36(_.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-init-declaration-dialog"]],viewQuery:function(i,e){if(1&i&&(t.Gf(_e,5),t.Gf(fe,7),t.Gf(ve,5)),2&i){let n;t.iGM(n=t.CRH())&&(e.stepper=n.first),t.iGM(n=t.CRH())&&(e.canvas=n.first),t.iGM(n=t.CRH())&&(e.inputRole=n.first)}},inputs:{dataf:"dataf",townOrTerritory:"townOrTerritory",secteurOrChefferie:"secteurOrChefferie"},decls:190,vars:56,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],["class","alert alert-danger ",4,"ngIf"],["stepper",""],["label","Step 1"],["matStepLabel",""],[1,"col-md-12"],[1,"row"],[1,"alert","alert-info"],[1,"col"],["placeholder","R\xe9gie",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8"],["appearance","standard"],["type","text","matInput","","placeholder","Recherche...","value","","autocomplete","off",3,"formControl","matAutocomplete"],[1,"single-autocomplete",3,"displayWith","optionSelected"],["autoSearchContribuable","matAutocomplete"],["matSuffix",""],["class","col justify-content-center d-flex text-center",4,"ngIf"],["label","Step 2"],[3,"formGroup"],[1,"col-md-6","col-xs-12"],["placeholder","Secteur",3,"change"],[1,"col-md-6"],["placeholder","Acte",3,"formControl","change"],["placeholder","Nature",3,"formControl","change"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"rTable"],[1,"rTableHeading"],[1,"rTableRow"],[1,"rTableHead"],["alt","Base de calcul",1,"rTableHead"],[4,"ngFor","ngForOf"],[1,"rTableFoot"],[1,"rTableCell"],["label","Step 3"],[1,"mg-y-10"],[4,"ngIf"],[1,"fa","fa-key"],[1,"fa","fa-phone"],[3,"ngModel","ngModelChange"],[1,"mg-y-30"],["label","Step 4"],["class","col-md-12 ",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","submit",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[3,"value"],[1,"row","m-3","p-2"],[2,"width","60px","height","60px"],["onError","this.src='../assets/img/avatar.jpg'",1,"logo",3,"src"],[1,"col","justify-content-center","d-flex","text-center"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],[1,"warp-avatar","justify-content-center"],[1,"fa","fa-envelope"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],[1,"btn","btn-success",3,"click"],[1,"rTableRow",3,"item","prices","index","emitDelete","emitQteChanged","emitBaseChanged","emitStatusChanged"],[1,"rTableRow",3,"item","prices","index"],[1,"d-flex","align-items-center","justify-content-center","flex-column"],[1,"successIcon"],[1,"mg-t-10","mg-md-t-0",3,"click"],[1,"btn","btn-primary","btn-rounded","btn-block"],[1,"fa","fa-print"],[1,"btn","btn-outline-primary","btn-rounded","btn-block"],[1,"successIcon",2,"color","crimson"],["src","assets/img/loading.gif",1,"successIcon",2,"color","rgb(248, 232, 9)"],["type","submit",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"typcn","typcn-arrow-left"],[1,"typcn","typcn-arrow-right"]],template:function(i,e){if(1&i&&(t.TgZ(0,"h1",0),t.TgZ(1,"mat-toolbar-row"),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",1),t.NdJ("click",function(){return e.close()}),t._uU(5,"close "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"mat-dialog-content"),t.YNc(7,Te,6,2,"div",2),t.TgZ(8,"div"),t.TgZ(9,"mat-stepper",null,3),t.TgZ(11,"mat-step",4),t.YNc(12,xe,1,0,"ng-template",5),t.TgZ(13,"div",6),t.TgZ(14,"div",7),t.TgZ(15,"div",6),t.TgZ(16,"p",8),t._uU(17," Veuillez saisir le nom, la raison sociale, prenom, phone ou le NUC du contribuable. L'autocompletion vous aidera \xe0 identifier le contribuable cherch\xe9 "),t.qZA(),t.qZA(),t.TgZ(18,"div",6),t.TgZ(19,"div",7),t.TgZ(20,"div",9),t.TgZ(21,"ng-select",10),t.YNc(22,Ae,2,2,"ng-option",11),t.qZA(),t.qZA(),t.TgZ(23,"div",12),t.TgZ(24,"mat-form-field",13),t._UZ(25,"input",14),t.TgZ(26,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(o){return e.onSelectTaxer(o)}),t.YNc(28,Ce,7,4,"mat-option",11),t.ALo(29,"async"),t.qZA(),t.TgZ(30,"mat-icon",17),t._uU(31,"search"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(32,De,19,7,"div",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"mat-step",19),t.YNc(34,Ne,1,0,"ng-template",5),t.TgZ(35,"form",20),t.TgZ(36,"div",7),t.TgZ(37,"div",21),t.TgZ(38,"ng-select",22),t.NdJ("change",function(o){return e.onSecteurChanged(o)}),t.YNc(39,we,2,2,"ng-option",11),t.qZA(),t.qZA(),t.TgZ(40,"div",23),t.TgZ(41,"ng-select",24),t.NdJ("change",function(o){return e.onActeChanged(o)}),t.YNc(42,Ye,2,3,"ng-option",11),t.qZA(),t.qZA(),t.TgZ(43,"div",23),t.TgZ(44,"ng-select",25),t.NdJ("change",function(o){return e.onNatureChange(o)}),t.YNc(45,Oe,2,2,"ng-option",11),t.qZA(),t.qZA(),t.TgZ(46,"div",23),t.YNc(47,Le,2,0,"button",26),t.qZA(),t.qZA(),t.TgZ(48,"div",7),t.TgZ(49,"div",6),t.TgZ(50,"div",27),t.TgZ(51,"div",28),t.TgZ(52,"tr",29),t.TgZ(53,"div",30),t._uU(54,"#"),t.qZA(),t.TgZ(55,"div",30),t._uU(56,"Code"),t.qZA(),t.TgZ(57,"div",30),t._uU(58,"Acte"),t.qZA(),t.TgZ(59,"div",30),t._uU(60,"Taxe"),t.qZA(),t.TgZ(61,"div",30),t._uU(62,"Taux"),t.qZA(),t.TgZ(63,"div",30),t._uU(64,"Propriet\xe9"),t.qZA(),t.TgZ(65,"div",30),t._uU(66,"Qte/U/M"),t.qZA(),t.TgZ(67,"div",31),t._uU(68,"Base"),t.qZA(),t.TgZ(69,"div",30),t._uU(70,"Total"),t.qZA(),t.TgZ(71,"div",30),t._uU(72,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.YNc(73,Pe,2,3,"ng-container",32),t.TgZ(74,"div",33),t.TgZ(75,"div",29),t.TgZ(76,"div",34),t._uU(77,"\xa0"),t.qZA(),t.TgZ(78,"div",34),t._uU(79,"Total G\xe9n\xe9ral"),t.qZA(),t._UZ(80,"div",34),t._UZ(81,"div",34),t._UZ(82,"div",34),t._UZ(83,"div",34),t._UZ(84,"div",34),t._UZ(85,"div",34),t.TgZ(86,"div",34),t._uU(87),t.ALo(88,"number"),t.qZA(),t._UZ(89,"div",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"mat-step",35),t.YNc(91,ye,1,0,"ng-template",5),t.TgZ(92,"div",7),t.TgZ(93,"div",6),t.TgZ(94,"div",7),t.TgZ(95,"div",23),t.TgZ(96,"h3"),t._uU(97,"Contribuable "),t.qZA(),t._UZ(98,"hr",36),t.YNc(99,Je,3,2,"div",37),t.YNc(100,Re,5,2,"div",37),t.TgZ(101,"div"),t.TgZ(102,"strong"),t._UZ(103,"i",38),t._uU(104),t.qZA(),t.qZA(),t.TgZ(105,"div"),t.TgZ(106,"strong"),t._UZ(107,"i",39),t._uU(108),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"div",23),t.TgZ(110,"h3"),t._uU(111,"Calcul "),t.qZA(),t._UZ(112,"hr",36),t.TgZ(113,"div"),t._uU(114," Total g\xe9n\xe9ral : "),t.TgZ(115,"strong"),t._uU(116),t.ALo(117,"number"),t.ALo(118,"number"),t.qZA(),t.qZA(),t.TgZ(119,"div"),t._uU(120,"Nbr. taxe : "),t.TgZ(121,"strong"),t._uU(122),t.qZA(),t.qZA(),t.TgZ(123,"div"),t._uU(124," Taux du jour : "),t.TgZ(125,"strong"),t._uU(126),t.ALo(127,"number"),t.ALo(128,"number"),t.qZA(),t.qZA(),t.TgZ(129,"div"),t._uU(130," Exercice fiscal : "),t.TgZ(131,"strong"),t.TgZ(132,"select",40),t.NdJ("ngModelChange",function(o){return e.dataf.exercice=o})("ngModelChange",function(o){return e.exerciceChanged(o)}),t.YNc(133,Me,2,2,"option",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(134,"div",6),t._UZ(135,"hr",41),t.TgZ(136,"div"),t.TgZ(137,"strong"),t._uU(138," Taxes : "),t.qZA(),t.qZA(),t.TgZ(139,"div"),t.TgZ(140,"div",27),t.TgZ(141,"div",28),t.TgZ(142,"tr",29),t.TgZ(143,"div",30),t._uU(144,"#"),t.qZA(),t.TgZ(145,"div",30),t._uU(146,"Secteur"),t.qZA(),t.TgZ(147,"div",30),t._uU(148,"Code"),t.qZA(),t.TgZ(149,"div",30),t._uU(150,"Acte"),t.qZA(),t.TgZ(151,"div",30),t._uU(152,"Taxe"),t.qZA(),t.TgZ(153,"div",30),t._uU(154,"Taux"),t.qZA(),t.TgZ(155,"div",30),t._uU(156,"Propriet\xe9"),t.qZA(),t.TgZ(157,"div",30),t._uU(158,"Qte/U/M"),t.qZA(),t.TgZ(159,"div",31),t._uU(160,"Base"),t.qZA(),t.TgZ(161,"div",30),t._uU(162,"Total"),t.qZA(),t.qZA(),t.qZA(),t.YNc(163,ke,2,3,"ng-container",32),t.TgZ(164,"div",33),t.TgZ(165,"div",29),t.TgZ(166,"div",34),t._uU(167,"\xa0"),t.qZA(),t.TgZ(168,"div",34),t._uU(169,"Total G\xe9n\xe9ral"),t.qZA(),t._UZ(170,"div",34),t._UZ(171,"div",34),t._UZ(172,"div",34),t._UZ(173,"div",34),t._UZ(174,"div",34),t._UZ(175,"div",34),t._UZ(176,"div",34),t.TgZ(177,"div",34),t._uU(178),t.ALo(179,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(180,"mat-step",42),t.YNc(181,Qe,1,0,"ng-template",5),t.TgZ(182,"div",7),t.YNc(183,Fe,24,1,"div",43),t.YNc(184,He,11,1,"div",43),t.YNc(185,je,8,0,"div",43),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(186,"mat-dialog-actions"),t.YNc(187,Be,3,0,"button",44),t._uU(188,"\xa0\xa0 "),t.YNc(189,Ve,3,1,"button",44),t.qZA()),2&i){const n=t.MAs(27);t.xp6(3),t.hij(" ",e.data.title," "),t.xp6(4),t.Q6J("ngIf",1==e.hasError),t.xp6(14),t.Q6J("formControl",e.regieFilter),t.xp6(1),t.Q6J("ngForOf",e.regies),t.xp6(3),t.Q6J("formControl",e.contribuableControl)("matAutocomplete",n),t.xp6(1),t.Q6J("displayWith",e.showTaxer),t.xp6(2),t.Q6J("ngForOf",t.lcZ(29,36,e.contribuables)),t.xp6(4),t.Q6J("ngIf",e.selectedTaxer),t.xp6(3),t.Q6J("formGroup",e.formDoc),t.xp6(4),t.Q6J("ngForOf",e.secteurs),t.xp6(2),t.Q6J("formControl",e.acteForm),t.xp6(1),t.Q6J("ngForOf",e.actes),t.xp6(2),t.Q6J("formControl",e.taxeForm),t.xp6(1),t.Q6J("ngForOf",e.taxes),t.xp6(2),t.Q6J("ngIf",e.prices&&e.prices.length>0),t.xp6(26),t.Q6J("ngForOf",e.cartSert.items),t.xp6(14),t.hij(" ",t.xi3(88,38,e.cartSert.getTotal(),".2-2")," "),t.xp6(12),t.Q6J("ngIf","P"==(null==e.selectedTaxer?null:e.selectedTaxer.typePersonne)),t.xp6(1),t.Q6J("ngIf","M"==(null==e.selectedTaxer?null:e.selectedTaxer.typePersonne)),t.xp6(4),t.hij(" ",null==e.selectedTaxer?null:e.selectedTaxer.nuc,""),t.xp6(4),t.hij(" ",null==e.selectedTaxer?null:e.selectedTaxer.phone,""),t.xp6(8),t.AsE(" ",t.xi3(117,41,e.cartSert.getTotal(),".2-2"),"$ | ",t.xi3(118,44,e.cartSert.getTotal()*e.taux.amount,".2-2")," CDF"),t.xp6(6),t.hij(" ",e.cartSert.items.length,""),t.xp6(4),t.AsE("",t.xi3(127,47,1,".2-2")," $ = ",t.xi3(128,50,null==e.taux?null:e.taux.amount,".2-2")," CDF "),t.xp6(6),t.Q6J("ngModel",e.dataf.exercice),t.xp6(1),t.Q6J("ngForOf",e.rangeYear()),t.xp6(30),t.Q6J("ngForOf",e.cartSert.items),t.xp6(15),t.hij(" ",t.xi3(179,53,e.cartSert.getTotal(),".2-2")," "),t.xp6(5),t.Q6J("ngIf",1===e.isEnded),t.xp6(1),t.Q6J("ngIf",0===e.isEnded),t.xp6(1),t.Q6J("ngIf",-1===e.isEnded),t.xp6(2),t.Q6J("ngIf",1==e.isShown&&1==e.couldBack),t.xp6(2),t.Q6J("ngIf",e.couldSave)}},directives:[_.uh,j.rD,B.Hw,_.xY,Z.O5,lt.Vq,lt.C0,lt.VY,pt.w9,u.JJ,u.oH,Z.sg,S.KE,V.Nt,u.Fj,z.ZL,z.XC,S.R9,u._Y,u.JL,u.sg,u.EJ,u.On,_.H8,pt.xv,H.ey,ce,u.YN,u.Kr,Ze],pipes:[Z.Ov,Z.JJ],styles:[""]}),a})();var Pt=h(9307),st=h(9757);function ze(a,s){if(1&a&&(t.TgZ(0,"div",32),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"div",33),t._uU(5),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.Oqu(null==i.error?null:i.error.error),t.xp6(3),t.hij(" ",null==i.error?null:i.error.description," ")}}function $e(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"img",34,35),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.Q6J("src",i.imgPath+""+(null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.photo)+"."+(null==i.taxation||null==i.taxation.contribuable||null==i.taxation.contribuable.photo?null:i.taxation.contribuable.photo.type),t.LSH)}}function Ge(a,s){1&a&&(t.ynx(0),t._UZ(1,"img",36),t.BQk())}function We(a,s){if(1&a&&(t.TgZ(0,"h4"),t._uU(1),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.AsE("",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.nom," ",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.prenom," (P)")}}function Xe(a,s){if(1&a&&(t.TgZ(0,"h4"),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.hij("",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.raisonSociale," "),t.xp6(2),t.hij(" ",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.nom," (M) ")}}function Ke(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"app-item-taxation",37),t.BQk()),2&a){const i=s.$implicit,e=s.index;t.xp6(1),t.Q6J("item",i)("prices",i.prices)("index",e)}}function ti(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.validate(n.taxation)}),t._UZ(1,"i",39),t._uU(2," Valider "),t.qZA()}2&a&&t.Q6J("hasRoles","declaration")("privileges","ALL|EDIT")}function ei(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.liquider(n.taxation)}),t._UZ(1,"i",39),t._uU(2," Liquider "),t.qZA()}2&a&&t.Q6J("hasRoles","liquidation")("privileges","ALL|WRITE")}function ii(a,s){1&a&&(t.TgZ(0,"button",30),t._UZ(1,"i",40),t._uU(2," Annuler "),t.qZA())}function ni(a,s){1&a&&t._UZ(0,"i",41)}let ai=(()=>{class a{constructor(i,e,n,o,l,r){this.auth=i,this.rolesChecker=e,this.data=n,this.dialog=o,this.taxationServ=l,this.dialogServ=r,this.hasError=!1,this.showPrint=!1}ngOnInit(){this.data.data.id&&(this.taxation=this.data.data),this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.PRINT])&&(this.showPrint=!0)}onClose(){this.dialog.close()}liquider(i){i&&i.id&&this.dialogServ.openObs({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Liqudation de la d\xe9clatation N\xb0"+(null==i?void 0:i.refDoc),message:"Veuillez confirmer la liquidation cette d\xe9claration qui g\xe9n\xe9rera une note de d\xe9bit",action:"SHOW"}}).obsDialog.afterClosed().subscribe(n=>{n.result&&this.taxationServ.liquidationTaxation(null==i?void 0:i.id,{status:N.qM.VALIDED,observation:n.text}).subscribe(o=>{this.dialog.close({status:"success",operation:"liquidation",data:o})},o=>{this.hasError=!0,this.error=new v.D("Erreur de validation",o.error.description)})})}validate(i){i&&i.id&&this.dialogServ.openObs({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Validation d\xe9clatation N\xb0"+(null==i?void 0:i.refDoc),message:"Veuillez vous valider cette d\xe9claration",action:"SHOW"}}).obsDialog.afterClosed().subscribe(n=>{n.result&&this.taxationServ.validateTaxation(null==i?void 0:i.id,{status:N.qM.VALIDED,observation:n.text}).subscribe(o=>{this.taxation=o},o=>{this.hasError=!0,this.error=new v.D("Erreur de validation",o.error.description)})})}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(D.u),t.Y36(w.L),t.Y36(_.WI),t.Y36(_.so),t.Y36(Q.m),t.Y36(ot.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-taxation-detail"]],decls:135,vars:44,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],[1,"h-100"],["class","alert alert-danger ",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-3","border-right"],[1,"d-flex","flex-column","align-items-center"],[1,"mb-3","font-weight-bold"],[1,"warp-avatar"],[4,"ngIf"],[1,"fa","fa-key"],[1,"fa","fa-phone"],[1,"fa","fa-envelope"],[1,"col","ml-2"],[1,"col-md-12","border-bottom"],[1,"fa","fa-clock"],[1,"col-md-12","border-bottom","font-weight-bold"],[1,"mb-3","mt-2"],[1,"col-md-12"],[1,"rTable"],[1,"rTableHeading"],[1,"rTableRow"],[1,"rTableHead"],["alt","Base de calcul",1,"rTableHead"],[4,"ngFor","ngForOf"],[1,"rTableFoot"],[1,"rTableCell"],["class","btn btn-indigo btn-with-icon ","type","submit",3,"hasRoles","privileges","click",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","submit",4,"ngIf"],["type","submit",1,"btn","btn-indigo","btn-with-icon"],["class","fa fa-print",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],[1,"rTableRow",3,"item","prices","index"],["type","submit",1,"btn","btn-indigo","btn-with-icon",3,"hasRoles","privileges","click"],[1,"fa","fa-check"],[1,"fa","fa-refresh"],[1,"fa","fa-print"]],template:function(i,e){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t.TgZ(2,"mat-toolbar-row"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",1),t.NdJ("click",function(){return e.onClose()}),t._uU(6," close "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"mat-dialog-content",2),t.YNc(8,ze,6,2,"div",3),t.TgZ(9,"div",4),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t._uU(14,"Contribuable"),t.qZA(),t.TgZ(15,"div",9),t.YNc(16,$e,3,1,"ng-container",10),t.YNc(17,Ge,2,0,"ng-container",10),t.qZA(),t.TgZ(18,"div"),t.YNc(19,We,2,2,"h4",10),t.YNc(20,Xe,4,2,"h4",10),t.TgZ(21,"p"),t.TgZ(22,"strong"),t._UZ(23,"i",11),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"p"),t.TgZ(26,"strong"),t._UZ(27,"i",12),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"p"),t.TgZ(30,"strong"),t._UZ(31,"i",13),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",14),t.TgZ(34,"div",5),t.TgZ(35,"div",15),t.TgZ(36,"div",8),t._uU(37,"Calcul"),t.qZA(),t.TgZ(38,"div"),t._uU(39," Total g\xe9n\xe9ral : "),t.TgZ(40,"strong"),t._uU(41),t.ALo(42,"number"),t.ALo(43,"number"),t.qZA(),t.qZA(),t.TgZ(44,"div"),t._uU(45,"Nbr. taxe : "),t.TgZ(46,"strong"),t._uU(47),t.qZA(),t.qZA(),t.TgZ(48,"div"),t._uU(49,"Statut : "),t.TgZ(50,"strong"),t._uU(51),t.qZA(),t.qZA(),t.TgZ(52,"div"),t._uU(53,"N\xb0 R\xe9f : "),t.TgZ(54,"strong"),t._uU(55),t.qZA(),t.qZA(),t.TgZ(56,"div"),t._uU(57," Taux du jour : "),t.TgZ(58,"strong"),t._uU(59),t.ALo(60,"number"),t.ALo(61,"number"),t.qZA(),t.qZA(),t.TgZ(62,"div"),t._uU(63,"Date : "),t.TgZ(64,"strong"),t._UZ(65,"i",16),t._uU(66),t.ALo(67,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",17),t.TgZ(69,"div",18),t._uU(70,"Service de taxation"),t.qZA(),t.TgZ(71,"div"),t._uU(72," Bureau : "),t.TgZ(73,"strong"),t._uU(74),t.qZA(),t.qZA(),t.TgZ(75,"div"),t._uU(76," Centre : "),t.TgZ(77,"strong"),t._uU(78),t.qZA(),t.qZA(),t.TgZ(79,"div"),t._uU(80," Agent : "),t.TgZ(81,"strong"),t._uU(82),t.qZA(),t.qZA(),t.qZA(),t.TgZ(83,"div",19),t.TgZ(84,"div",18),t.TgZ(85,"strong"),t._uU(86," Elements de taxation"),t.qZA(),t.qZA(),t.TgZ(87,"div",20),t.TgZ(88,"div",21),t.TgZ(89,"tr",22),t.TgZ(90,"div",23),t._uU(91,"#"),t.qZA(),t.TgZ(92,"div",23),t._uU(93,"Acte"),t.qZA(),t.TgZ(94,"div",23),t._uU(95,"Taxe"),t.qZA(),t.TgZ(96,"div",23),t._uU(97,"Taux"),t.qZA(),t.TgZ(98,"div",23),t._uU(99,"Propriet\xe9"),t.qZA(),t.TgZ(100,"div",23),t._uU(101,"Qte/U/M"),t.qZA(),t.TgZ(102,"div",24),t._uU(103,"Base"),t.qZA(),t.TgZ(104,"div",23),t._uU(105,"Total"),t.qZA(),t.qZA(),t.qZA(),t.YNc(106,Ke,2,3,"ng-container",25),t.TgZ(107,"div",26),t.TgZ(108,"div",22),t.TgZ(109,"div",27),t._uU(110,"\xa0"),t.qZA(),t.TgZ(111,"div",27),t._uU(112,"Total G\xe9n\xe9ral"),t.qZA(),t._UZ(113,"div",27),t._UZ(114,"div",27),t._UZ(115,"div",27),t._UZ(116,"div",27),t._UZ(117,"div",27),t.TgZ(118,"div",27),t._uU(119),t.ALo(120,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(121,"div",19),t.TgZ(122,"div",18),t.TgZ(123,"strong"),t._uU(124," Observations"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"mat-dialog-actions"),t.YNc(126,ti,3,2,"button",28),t._uU(127,"\xa0 "),t.YNc(128,ei,3,2,"button",28),t._uU(129,"\xa0 "),t.YNc(130,ii,3,0,"button",29),t._uU(131,"\xa0 "),t.TgZ(132,"button",30),t.YNc(133,ni,1,0,"i",31),t._uU(134," Imprimer "),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(4),t.hij(" ",e.data.title," "),t.xp6(4),t.Q6J("ngIf",1==e.hasError),t.xp6(8),t.Q6J("ngIf",null!=(null==e.taxation?null:e.taxation.contribuable)&&null!=(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.photo)),t.xp6(1),t.Q6J("ngIf",null!=(null==e.taxation?null:e.taxation.contribuable)&&null==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.photo)),t.xp6(2),t.Q6J("ngIf","P"==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.typePersonne)),t.xp6(1),t.Q6J("ngIf","M"==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.typePersonne)),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.nuc,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.phone,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.email,""),t.xp6(9),t.AsE(" ",t.xi3(42,27,null==e.taxation?null:e.taxation.amount,".2-2"),"$ | ",t.xi3(43,30,null==e.taxation?null:e.taxation.amountCdf,".2-2")," CDF"),t.xp6(6),t.hij(" ",null==e.taxation||null==e.taxation.items?null:e.taxation.items.length,""),t.xp6(4),t.hij(" ",null==e.taxation?null:e.taxation.statut,""),t.xp6(4),t.hij(" ",null==e.taxation?null:e.taxation.refDoc,""),t.xp6(4),t.AsE("",t.xi3(60,33,1,".2-2")," $ = ",t.xi3(61,36,null==e.taxation?null:e.taxation.AppliedTaux,".2-2")," CDF "),t.xp6(7),t.hij(" ",t.lcZ(67,39,null==e.taxation?null:e.taxation.createdAt),""),t.xp6(8),t.hij(" ",null==e.taxation||null==e.taxation.bureau?null:e.taxation.bureau.nom,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.centre?null:e.taxation.centre.nom," "),t.xp6(4),t.AsE(" ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.nom," ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.prenom," "),t.xp6(24),t.Q6J("ngForOf",null==e.taxation?null:e.taxation.items),t.xp6(13),t.hij(" ",t.xi3(120,41,null==e.taxation?null:e.taxation.amount,".2-2")," "),t.xp6(7),t.Q6J("ngIf","INIT"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf","VALIDED"==(null==e.taxation?null:e.taxation.statut)||"VERIFIED"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf","INIT"==(null==e.taxation?null:e.taxation.statut)),t.xp6(3),t.Q6J("ngIf",e.showPrint))},directives:[_.uh,j.rD,B.Hw,_.xY,Z.O5,Z.sg,_.H8,Pt.X,st.f],pipes:[Z.JJ,Z.uU],styles:[".cbg[_ngcontent-%COMP%]{background-color:#c3c4c2!important}"]}),a})();var rt=h(7050),q=h(3220),$=h(7441),ut=h(4457);const oi=["seachInput"];function li(a,s){if(1&a&&(t.TgZ(0,"div",2),t.TgZ(1,"div",19),t.TgZ(2,"div",34),t.TgZ(3,"form",35),t.TgZ(4,"div",36),t.TgZ(5,"div",37),t._UZ(6,"input",38,39),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(6),t.Q6J("formControl",i.formSearch)}}function si(a,s){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.AsE("",i.contribuable," - ",i.prenom,"")}}function ri(a,s){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.raisonSociale)}}function ui(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"tr",44),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit;return t.oxw(2).view(n)}),t.TgZ(1,"td",45),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"img",46),t._UZ(7,"br"),t.YNc(8,si,2,2,"div",47),t.YNc(9,ri,2,1,"div",47),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t.TgZ(28,"div",48),t.TgZ(29,"a",49),t._UZ(30,"i",50),t.qZA(),t._uU(31,"\xa0 "),t.TgZ(32,"a",51),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit;return t.oxw(2).edit(n)}),t._UZ(33,"i",52),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const i=t.oxw(),e=i.index,n=i.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",e+1+o.currentPage*o.pp,""),t.xp6(2),t.Oqu(n.refDoc),t.xp6(2),t.Q6J("src",o.imgPath+n.profile+"."+n.profileExt,t.LSH),t.xp6(2),t.Q6J("ngIf","M"!=n.type),t.xp6(1),t.Q6J("ngIf","M"==n.type),t.xp6(2),t.Oqu(n.nuc),t.xp6(2),t.Oqu(n.type),t.xp6(2),t.Oqu(n.acte),t.xp6(2),t.AsE("",t.xi3(18,13,n.amount,".2-2"),"$ | ",t.xi3(19,16,n.amountCdf,".2-2"),"FC"),t.xp6(4),t.Oqu(n.agent),t.xp6(2),t.Oqu(t.lcZ(24,19,n.createdAt)),t.xp6(3),t.Oqu(n.statut)}}function ci(a,s){if(1&a&&(t.ynx(0),t.YNc(1,ui,34,21,"tr",43),t.BQk()),2&a){const i=s.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.id!=(null==e.connectedUser?null:e.connectedUser.id))}}function di(a,s){if(1&a&&(t.TgZ(0,"div",40),t.TgZ(1,"table",41),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Ref Dossier"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Contribuable"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Nuc"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Type "),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Acte(P)"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Montant"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Agent"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Statut"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"\xa0"),t.qZA(),t.qZA(),t._UZ(26,"tr"),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,ci,2,1,"ng-container",42),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(28),t.Q6J("ngForOf",null==i.itemsPager?null:i.itemsPager.content)}}function gi(a,s){1&a&&(t.TgZ(0,"div",53),t.TgZ(1,"strong"),t._uU(2,"Aucune donn\xe9e n'est trouv\xe9e"),t.qZA(),t.qZA())}let yt=(()=>{class a{constructor(i,e,n,o,l,r){this.rolesChecker=i,this.liqServ=e,this.dialogManager=n,this.taxationServ=o,this.auth=l,this.parent=r,this.p=0,this.pp=T.N.defautlPageSize,this.itemLength=0,this.currentPage=0,this.imgPath="",this.pattern="",this.subs=[],this.datesEmit=new jt.X({}),this.isSeachForm=!1}ngOnInit(){var i,e,n,o;if(this.formSearch=new u.NI,this.formSearch.valueChanges.pipe((0,et.O)(""),(0,it.w)(l=>{var r,d;return l.length>3&&this.taxationServ.searchTaxationOfBureauPaging(null===(d=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===d?void 0:d.id,l,0,T.N.defautlPageSize).subscribe(c=>{var g;return this.itemsPager=c.pager,this.itemLength=null===(g=c.pager)||void 0===g?void 0:g.totalElements,(0,Y.of)(this.itemsPager)}),(0,Y.of)([])})).subscribe(l=>{console.log("eee",l)}),this.imgPath=T.N.imgPath,this.form=new u.cw({dateStart:new u.NI(new Date),dateEnd:new u.NI(new Date)}),this.dateStart=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.dateEnd=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.parent.updateDates(this.dateStart,this.dateEnd),this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.READ])){if(!(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.bureau)||void 0===e?void 0:e.id))return;this.subs.push(this.taxationServ.getTaxationsOfOfficeInsPaging(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.bureau)||void 0===o?void 0:o.id,this.dateStart,this.dateEnd,0,T.N.defautlPageSize).subscribe(l=>{var r,d;this.itemsPager=l,this.itemLength=l.totalElements,this.subs.push(this.taxationServ.getTaxationsStastOfOfficeIns(null===(d=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===d?void 0:d.id,this.dateStart,this.dateEnd).subscribe(c=>{var g,p;this.parent.stat=c,this.subs.push(this.taxationServ.getTaxationsStastOfOfficeInsByStatus(null===(p=null===(g=this.auth.getSession().user)||void 0===g?void 0:g.bureau)||void 0===p?void 0:p.id,N.qM.CANCELLED,this.dateStart,this.dateEnd).subscribe(f=>{this.parent.statCancel=f}))}))}))}}openNewDeclarationForm(){this.dialogConfig=new _.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Nouvelle d\xe9claration ",message:"",action:"NEW",data:null},this.dialogManager.open(mt,this.dialogConfig).componentInstance.eventForm.subscribe(i=>{this.ngOnInit()})}edit(i){}view(i){this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.READ])&&this.taxationServ.getTaxation(i.id).subscribe(e=>{this.dialogConfig=new _.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="cbg",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"Taxation d\xe9tail :"+i.refDoc,title:"Taxation d\xe9tail :"+i.refDoc,message:"",action:"VIEW",data:e},this.dialogManager.open(ai,this.dialogConfig).afterClosed().subscribe(n=>{n.status&&"success"==n.status&&n.operation&&"liquidation"==n.operation&&this.viewLiquidation(n.data)})})}viewLiquidation(i){}clickSearchForm(){this.isSeachForm?this.isSeachForm=!1:(this.isSeachForm=!0,null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus())}ngAfterViewInit(){null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus()}dateRangeChange(i,e){var n,o,l,r;if((null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.bureau)||void 0===o?void 0:o.id)&&i.value.length>0&&e.value.length>0){let d=i.value.split("/")[2]+"-"+i.value.split("/")[0]+"-"+i.value.split("/")[1],c=e.value.split("/")[2]+"-"+e.value.split("/")[0]+"-"+e.value.split("/")[1];this.dateStart=d,this.dateEnd=c,this.parent.updateDates(this.dateStart,this.dateEnd),this.subs.push(this.taxationServ.getTaxationsOfOfficeInsPaging(null===(r=null===(l=this.auth.getSession().user)||void 0===l?void 0:l.bureau)||void 0===r?void 0:r.id,d,c,0,T.N.defautlPageSize).subscribe(g=>{var p,f;this.itemLength=g.totalElements,this.itemsPager=void 0,this.itemsPager=g,this.subs.push(this.taxationServ.getTaxationsStastOfOfficeIns(null===(f=null===(p=this.auth.getSession().user)||void 0===p?void 0:p.bureau)||void 0===f?void 0:f.id,d,c).subscribe(C=>{var x,U;this.parent.stat=C,this.subs.push(this.taxationServ.getTaxationsStastOfOfficeInsByStatus(null===(U=null===(x=this.auth.getSession().user)||void 0===x?void 0:x.bureau)||void 0===U?void 0:U.id,N.qM.CANCELLED,this.dateStart,this.dateEnd).subscribe(O=>{var L,P;this.parent.statCancel=O,this.subs.push(this.liqServ.getOperationsOfOfficeIns(null===(P=null===(L=this.auth.getSession().user)||void 0===L?void 0:L.bureau)||void 0===P?void 0:P.id,this.dateStart,this.dateEnd).subscribe(W=>{this.parent.statLiq=W}))}))}))}))}}dateRangeChanges(i){console.log(i.value,this.form.value.dateStart)}onPageChanged(i){var e,n,o,l,r,d;if(null===(n=null===(e=this.auth.getSession().user)||void 0===e?void 0:e.bureau)||void 0===n?void 0:n.id){if(this.currentPage=i.pageIndex,this.formSearch.value&&this.formSearch.value.length>0)return void(this.formSearch.value.length>3&&this.taxationServ.searchTaxationOfBureauPaging(null===(l=null===(o=this.auth.getSession().user)||void 0===o?void 0:o.bureau)||void 0===l?void 0:l.id,this.formSearch.value,i.pageIndex,T.N.defautlPageSize).subscribe(c=>{var g;return this.itemsPager=c.pager,this.itemLength=null===(g=c.pager)||void 0===g?void 0:g.totalElements,(0,Y.of)(this.itemsPager)}));this.subs.push(this.taxationServ.getTaxationsOfOfficeInsPaging(null===(d=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===d?void 0:d.id,this.dateStart,this.dateEnd,i.pageIndex,T.N.defautlPageSize).subscribe(c=>{var g,p;this.itemLength=c.totalElements,this.itemsPager=void 0,this.itemsPager=c,this.subs.push(this.taxationServ.getTaxationsStastOfOfficeIns(null===(p=null===(g=this.auth.getSession().user)||void 0===g?void 0:g.bureau)||void 0===p?void 0:p.id,this.dateStart,this.dateEnd).subscribe(f=>{var C,x;this.parent.stat=f,this.subs.push(this.liqServ.getOperationsOfOfficeIns(null===(x=null===(C=this.auth.getSession().user)||void 0===C?void 0:C.bureau)||void 0===x?void 0:x.id,this.dateStart,this.dateEnd).subscribe(U=>{this.parent.statLiq=U}))})),console.log(this.itemsPager)}))}}onStatusChange(i){console.log(i)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(w.L),t.Y36(rt.W),t.Y36(_.uw),t.Y36(Q.m),t.Y36(D.u),t.Y36(Zt))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-home-declaration"]],viewQuery:function(i,e){if(1&i&&t.Gf(oi,7),2&i){let n;t.iGM(n=t.CRH())&&(e.searchElementRef=n.first)}},inputs:{itemsPager:"itemsPager"},decls:53,vars:12,consts:[[1,"az-content-label","mg-b-5","config-title"],[3,"formGroup"],[1,"row"],[1,"col-4"],[3,"rangePicker"],["matStartDate","","matInput","","placeholder","Start date","formControlName","dateStart"],["dateRangeStart",""],["matEndDate","","matInput","","placeholder","End date","formControlName","dateEnd",3,"dateChange"],["dateRangeEnd",""],["matSuffix","",3,"for"],["picker",""],[1,"col-2",3,"hasRoles"],[3,"selectionChange"],["value",""],["value","VALIDED"],["value","CANCELLED"],["value","INIT"],["value","REDRESSED"],["value","TAXED"],[1,"col"],[1,"",2,"margin-top","20px","margin-left","-10","display","inline-block",3,"click"],[1,"fa","fa-search"],["class","row",4,"ngIf"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-indigo","btn-sm","btn-icon",3,"hasRoles","privileges","click"],[1,"typcn","typcn-plus-outline"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-y-30"],["class","table-responsive",4,"ngIf"],[1,"col-md-6"],["aria-label","Select page",3,"length","pageSize","hidePageSize","page"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"nav-search","clearfix"],["role","search",1,"navtop","navbar-form","home-search"],[1,"search-group"],["id","nav-search-input",1,"input-group","clearfix"],["type","text","placeholder","Search",1,"form-control","dropdown-toggle",3,"formControl"],["seachInput",""],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["scope","row"],["onError","this.src='../assets/img/avatar.jpg'",1,"rounded-circle",2,"width","40px","height","40px",3,"src"],[4,"ngIf"],[1,"btn-group"],["type","button",1,""],[1,"fa","fa-trash"],["type","button",1,"",3,"click"],[1,"fa","fa-edit"],["role","alert",1,"alert","alert-info"]],template:function(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"form",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7,"Filtrer par date"),t.qZA(),t.TgZ(8,"mat-date-range-input",4),t._UZ(9,"input",5,6),t.TgZ(11,"input",7,8),t.NdJ("dateChange",function(){t.CHM(n);const l=t.MAs(10),r=t.MAs(12);return e.dateRangeChange(l,r)}),t.qZA(),t.qZA(),t._UZ(13,"mat-datepicker-toggle",9),t._UZ(14,"mat-date-range-picker",null,10),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"mat-form-field"),t.TgZ(18,"mat-label"),t._uU(19,"Statut"),t.qZA(),t.TgZ(20,"mat-select",12),t.NdJ("selectionChange",function(l){return e.onStatusChange(l)}),t.TgZ(21,"mat-option"),t._uU(22,"None"),t.qZA(),t.TgZ(23,"mat-option",13),t._uU(24,"Tous"),t.qZA(),t.TgZ(25,"mat-option",14),t._uU(26,"Valid\xe9e"),t.qZA(),t.TgZ(27,"mat-option",15),t._uU(28,"Annul\xe9e"),t.qZA(),t.TgZ(29,"mat-option",16),t._uU(30,"INIT"),t.qZA(),t.TgZ(31,"mat-option",17),t._uU(32,"Redress\xe9e"),t.qZA(),t.TgZ(33,"mat-option",18),t._uU(34,"Tax\xe9"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",19),t.TgZ(36,"a",20),t.NdJ("click",function(){return e.clickSearchForm()}),t._UZ(37,"i",21),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,li,8,1,"div",22),t.qZA(),t.TgZ(39,"div",23),t.TgZ(40,"div",24),t.TgZ(41,"button",25),t.NdJ("click",function(){return e.openNewDeclarationForm()}),t._UZ(42,"i",26),t.qZA(),t.TgZ(43,"button",27),t._UZ(44,"i",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(45,"hr",29),t.YNc(46,di,29,1,"div",30),t.TgZ(47,"div",2),t.TgZ(48,"div",31),t._uU(49," \xa0 "),t.qZA(),t.TgZ(50,"div",31),t.TgZ(51,"mat-paginator",32),t.NdJ("page",function(l){return e.onPageChanged(l)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(52,gi,3,0,"div",33),t.qZA()}if(2&i){const n=t.MAs(15);t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("rangePicker",n),t.xp6(5),t.Q6J("for",n),t.xp6(3),t.Q6J("hasRoles","declaration"),t.xp6(22),t.Q6J("ngIf",e.isSeachForm),t.xp6(3),t.Q6J("hasRoles","declaration|ordonnancement")("privileges","ALL|WRITE"),t.xp6(5),t.Q6J("ngIf",0==(null==e.itemsPager?null:e.itemsPager.empty)),t.xp6(5),t.Q6J("length",e.itemLength)("pageSize",e.pp)("hidePageSize",!0),t.xp6(1),t.Q6J("ngIf",1==(null==e.itemsPager?null:e.itemsPager.empty))}},directives:[u._Y,u.JL,u.sg,S.KE,S.hX,q.wx,q.zY,V.Nt,u.Fj,u.JJ,u.u,q.By,q.nW,S.R9,q._g,st.f,$.gD,H.ey,Z.O5,ut.NW,u.F,u.oH,Z.sg],pipes:[Z.JJ,Z.uU],styles:[""]}),a})();var ct=h(2613);const hi=function(){return["./all"]},pi=function(){return["./taxation"]},mi=function(){return["./liquidation"]};let Zt=(()=>{class a{constructor(i,e,n,o,l,r,d){this.genConfig=i,this.roleChecker=e,this.auth=n,this.taxSer=o,this.liqServ=l,this.printManager=r,this.appStor=d,this.stat=new k.a,this.statCancel=new k.a,this.statValid=new k.a,this.officeOrAgent="agent",this.subs=[],this.dateStart="",this.dateEnd=""}ngAfterViewInit(){}ngOnInit(){var i,e,n,o;this.appStor.exist("taux")?this.taux=this.appStor.getJson("taux"):(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.regie)||void 0===e?void 0:e.id)&&this.genConfig.getCurrentTaux(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.regie)||void 0===o?void 0:o.id).subscribe(l=>{this.taux=l})}updateDates(i,e){this.dateStart=i,this.dateEnd=e}printReport(){var i,e,n,o,l,r,d,c,g,p,f,C,x,U,O,L,P,W,ft,vt,Tt,xt,At,bt,qt,Ct,Ut,St,Et,It,Dt,Nt;let R="RAPPORT ";if("agent"==this.officeOrAgent)if(this.roleChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.PRINT])&&this.roleChecker.hasPermission(this.auth.getSession().user,"liquidation",[m.e.ALL,m.e.PRINT])){let A=new Map,M=new Map;(0,J.D)(this.taxSer.getReportOfAgentByStatut(null===(e=null===(i=this.auth.getSession())||void 0===i?void 0:i.user)||void 0===e?void 0:e.id,this.dateStart,this.dateEnd),this.liqServ.getReportOfAgentByStatut(null===(o=null===(n=this.auth.getSession())||void 0===n?void 0:n.user)||void 0===o?void 0:o.id,this.dateStart,this.dateEnd),this.taxSer.getReportOfAgent(null===(l=this.auth.getSession().user)||void 0===l?void 0:l.id,this.dateStart,this.dateEnd),this.liqServ.getReportOfAgent(null===(r=this.auth.getSession().user)||void 0===r?void 0:r.id,this.dateStart,this.dateEnd)).subscribe(y=>{M.set("declaration",y[0]),M.set("taxation",y[1]),A.set("declaration",y[2]),A.set("taxation",y[3]),this.printManager.generateReportDecLiqOfAgent(this.dateStart,this.dateEnd,M,A,this.auth.getSession().user)})}else this.roleChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.PRINT])?(R+=" DE DECLARATION DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,J.D)(this.taxSer.getReportOfAgentByStatut(null===(c=null===(d=this.auth.getSession())||void 0===d?void 0:d.user)||void 0===c?void 0:c.id,this.dateStart,this.dateEnd),this.taxSer.getReportOfAgent(null===(g=this.auth.getSession().user)||void 0===g?void 0:g.id,this.dateStart,this.dateEnd)).subscribe(A=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,A[0],A[1],this.auth.getSession().user,R)})):this.roleChecker.hasPermission(this.auth.getSession().user,"liquidation",[m.e.ALL,m.e.PRINT])&&(R+=" DE TAXATION DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,J.D)(this.liqServ.getReportOfAgentByStatut(null===(f=null===(p=this.auth.getSession())||void 0===p?void 0:p.user)||void 0===f?void 0:f.id,this.dateStart,this.dateEnd),this.taxSer.getReportOfAgent(null===(C=this.auth.getSession().user)||void 0===C?void 0:C.id,this.dateStart,this.dateEnd)).subscribe(A=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,A[0],A[1],this.auth.getSession().user,R)}));else if(this.roleChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.PRINT])&&this.roleChecker.hasPermission(this.auth.getSession().user,"liquidation",[m.e.ALL,m.e.PRINT])){let A=new Map,M=new Map;(0,J.D)(this.taxSer.getReportOfOfficeByStatut(null===(O=null===(U=null===(x=this.auth.getSession())||void 0===x?void 0:x.user)||void 0===U?void 0:U.bureau)||void 0===O?void 0:O.id,this.dateStart,this.dateEnd),this.liqServ.getReportOfOfficeByStatut(null===(W=null===(P=null===(L=this.auth.getSession())||void 0===L?void 0:L.user)||void 0===P?void 0:P.bureau)||void 0===W?void 0:W.id,this.dateStart,this.dateEnd),this.taxSer.getTaxationsOfOfficeIns(null===(vt=null===(ft=this.auth.getSession().user)||void 0===ft?void 0:ft.bureau)||void 0===vt?void 0:vt.id,this.dateStart,this.dateEnd),this.liqServ.getOperationsOfOfficeIns(null===(xt=null===(Tt=this.auth.getSession().user)||void 0===Tt?void 0:Tt.bureau)||void 0===xt?void 0:xt.id,this.dateStart,this.dateEnd)).subscribe(y=>{M.set("declaration",y[0]),M.set("taxation",y[1]),A.set("declaration",y[2]),A.set("taxation",y[3].pager),this.printManager.generateReportDecLiqOfAgent(this.dateStart,this.dateEnd,M,A,this.auth.getSession().user)})}else this.roleChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.PRINT])?(R+=" DE DECLARATION DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,J.D)(this.taxSer.getReportOfOfficeByStatut(null===(qt=null===(bt=null===(At=this.auth.getSession())||void 0===At?void 0:At.user)||void 0===bt?void 0:bt.bureau)||void 0===qt?void 0:qt.id,this.dateStart,this.dateEnd),this.taxSer.getTaxationsOfOfficeIns(null===(Ut=null===(Ct=this.auth.getSession().user)||void 0===Ct?void 0:Ct.bureau)||void 0===Ut?void 0:Ut.id,this.dateStart,this.dateEnd)).subscribe(A=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,A[0],A[1],this.auth.getSession().user,R)})):this.roleChecker.hasPermission(this.auth.getSession().user,"taxation",[m.e.ALL,m.e.PRINT])&&(R+=" DE TAXATION DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,J.D)(this.liqServ.getReportOfAgentByStatut(null===(It=null===(Et=null===(St=this.auth.getSession())||void 0===St?void 0:St.user)||void 0===Et?void 0:Et.bureau)||void 0===It?void 0:It.id,this.dateStart,this.dateEnd),this.taxSer.getReportOfAgent(null===(Nt=null===(Dt=this.auth.getSession().user)||void 0===Dt?void 0:Dt.bureau)||void 0===Nt?void 0:Nt.id,this.dateStart,this.dateEnd)).subscribe(A=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,A[0],A[1],this.auth.getSession().user,R)}))}reportOfChanged(i){}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(F.E),t.Y36(w.L),t.Y36(D.u),t.Y36(Q.m),t.Y36(rt.W),t.Y36(at.$),t.Y36(ht.I))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-declaration-taxe"]],inputs:{stat:"stat",statCancel:"statCancel",statValid:"statValid",statLiq:"statLiq"},features:[t._Bn([yt])],decls:85,vars:31,consts:[[1,"row"],[1,"col-md-3","p-4","position-fixe","az-content-left-components"],[1,"component-item"],[1,"flex-column","justify-content-center","d-flex"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-icon"],[1,"flex-row","justify-content-center","d-flex"],[1,"position-relative","wrap-stat-sum",3,"hasRoles"],[1,"stat-sum-title"],[1,"w-100","d-flex","flex-column","align-content-end","align-items-end"],[1,"stat-sum-val"],[1,"position-relative","wrap-stat-sum"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column","mb-2"],["aria-label","Select an option",3,"ngModel","ngModelChange","change"],["value","office"],["value","agent"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column"],["href","#",1,"btn","btn-purple","mb-2",3,"click"],[1,"fa","fa-print"],["href","#",1,"btn","btn-purple"],[1,"fa","fa-envelope"],[1,"col-md-9","offset-"],[1,"az-content-breadcrumb"],[1,"content"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"routerLink","hasRoles"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"routerLink"],[1,"ht-40"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"strong",5),t._uU(6,"Taux du jour"),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"strong"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",7),t.TgZ(12,"div",8),t.TgZ(13,"p"),t._uU(14," D\xe9clar\xe9e"),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",10),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"div",10),t._uU(20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",8),t.TgZ(23,"p"),t._uU(24," D. annul\xe9e"),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",10),t._uU(27),t.ALo(28,"number"),t.qZA(),t.TgZ(29,"div",10),t._uU(30),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",7),t.TgZ(32,"div",8),t.TgZ(33,"p"),t._uU(34," Tax\xe9e"),t.qZA(),t.qZA(),t.TgZ(35,"div",9),t.TgZ(36,"div",10),t._uU(37),t.ALo(38,"number"),t.qZA(),t.TgZ(39,"div",10),t._uU(40),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",7),t.TgZ(42,"div",8),t.TgZ(43,"p"),t._uU(44," T. Annul\xe9es"),t.qZA(),t.qZA(),t.TgZ(45,"div",9),t.TgZ(46,"div",10),t._uU(47,"0.00$"),t.qZA(),t.TgZ(48,"div",10),t._uU(49,"0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"p"),t._uU(51,"\xa0"),t.qZA(),t.TgZ(52,"div",12),t.TgZ(53,"mat-radio-group",13),t.NdJ("ngModelChange",function(o){return e.officeOrAgent=o})("change",function(o){return e.reportOfChanged(o)}),t.TgZ(54,"mat-radio-button",14),t._uU(55,"Bureau"),t.qZA(),t._uU(56," \xa0 "),t.TgZ(57,"mat-radio-button",15),t._uU(58,"Perso"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",16),t.TgZ(60,"button",17),t.NdJ("click",function(){return e.printReport()}),t._UZ(61,"i",18),t._uU(62," Impression rapport"),t.qZA(),t.TgZ(63,"button",19),t._UZ(64,"i",20),t._uU(65," Export rapport"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(66,"div",21),t.TgZ(67,"div",22),t.TgZ(68,"span"),t._uU(69,"Recette"),t.qZA(),t.TgZ(70,"span"),t._uU(71,"D\xe9claration"),t.qZA(),t.qZA(),t.TgZ(72,"div",23),t.TgZ(73,"div",24),t.TgZ(74,"nav",25),t.TgZ(75,"a",26),t._uU(76,"D\xe9clarations"),t.qZA(),t.TgZ(77,"a",27),t._uU(78,"Taxation"),t.qZA(),t.TgZ(79,"a",26),t._uU(80,"Liquidation"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"div"),t.TgZ(82,"router-outlet"),t._uU(83,"Cliquez sur un onglet"),t.qZA(),t.qZA(),t.qZA(),t._UZ(84,"div",28),t.qZA(),t.qZA()),2&i&&(t.xp6(9),t.hij("",t.xi3(10,16,2e3,".2-2")," CDF"),t.xp6(2),t.Q6J("hasRoles","declaration|liquidation"),t.xp6(6),t.hij("",t.xi3(18,19,null==e.stat?null:e.stat.totalActe,".2-2"),"$"),t.xp6(3),t.Oqu(null==e.stat?null:e.stat.volume),t.xp6(7),t.hij("",t.xi3(28,22,null==e.statCancel?null:e.statCancel.totalActe,".2-2"),"$"),t.xp6(3),t.Oqu(null==e.statCancel?null:e.statCancel.volume),t.xp6(1),t.Q6J("hasRoles","liquidation|ordonnancement"),t.xp6(6),t.hij("",t.xi3(38,25,null==e.statLiq||null==e.statLiq.sum?null:e.statLiq.sum.totalActe,".2-2"),"$"),t.xp6(3),t.Oqu(null==e.statLiq||null==e.statLiq.sum?null:e.statLiq.sum.volume),t.xp6(1),t.Q6J("hasRoles","liquidation|ordonnancement"),t.xp6(12),t.Q6J("ngModel",e.officeOrAgent),t.xp6(22),t.Q6J("routerLink",t.DdM(28,hi))("hasRoles","liquidation|declaration"),t.xp6(2),t.Q6J("routerLink",t.DdM(29,pi)),t.xp6(2),t.Q6J("routerLink",t.DdM(30,mi))("hasRoles","liquidation|ordonnancement"))},directives:[st.f,ct.VQ,u.JJ,u.On,ct.U0,I.yS,I.Od,I.lC],pipes:[Z.JJ],styles:[""]}),a})();var Zi=h(9532),Jt=h(5396),_i=h(2533),Rt=h(6763);function fi(a,s){if(1&a&&(t.TgZ(0,"div",30),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"div",31),t._uU(5),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.Oqu(null==i.error?null:i.error.error),t.xp6(3),t.hij(" ",null==i.error?null:i.error.description," ")}}function vi(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"img",32,33),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.Q6J("src",i.imgPath+""+(null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.photo)+"."+(null==i.taxation||null==i.taxation.contribuable||null==i.taxation.contribuable.photo?null:i.taxation.contribuable.photo.type),t.LSH)}}function Ti(a,s){1&a&&(t.ynx(0),t._UZ(1,"img",34),t.BQk())}function xi(a,s){if(1&a&&(t.TgZ(0,"h4"),t._uU(1),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.AsE("",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.nom," ",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.prenom," (P)")}}function Ai(a,s){if(1&a&&(t.TgZ(0,"h4"),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.hij("",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.raisonSociale," "),t.xp6(2),t.hij(" ",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.nom," (M) ")}}function bi(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"app-item-taxation",35),t.BQk()),2&a){const i=s.$implicit,e=s.index;t.xp6(1),t.Q6J("item",i)("prices",i.prices)("index",e)}}function qi(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.validate(n.taxation)}),t._UZ(1,"i",37),t._uU(2," Valider "),t.qZA()}}function Ci(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.ordonnancer(n.taxation)}),t._UZ(1,"i",37),t._uU(2," Ordonnancer "),t.qZA()}}function Ui(a,s){1&a&&(t.TgZ(0,"button",38),t._UZ(1,"i",39),t._uU(2," Demander Avis de redressement "),t.qZA())}function Si(a,s){1&a&&(t.TgZ(0,"button",38),t._UZ(1,"i",39),t._uU(2," Annuler "),t.qZA())}function Ei(a,s){1&a&&(t.TgZ(0,"button",38),t._UZ(1,"i",40),t._uU(2," Imprimer "),t.qZA())}let Ii=(()=>{class a{constructor(i,e,n,o,l,r,d){this.liquidationServ=i,this.auth=e,this.rolesChecker=n,this.data=o,this.dialog=l,this.taxationServ=r,this.dialogServ=d,this.hasError=!1,this.showPrint=!1,this.couldScheduled=!1}ngOnInit(){this.data.data.id&&(this.taxation=this.data.data),this.rolesChecker.hasPermission(this.auth.getSession().user,"liquidation",[m.e.ALL,m.e.PRINT])&&(this.showPrint=!0),this.rolesChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[m.e.ALL,m.e.WRITE])&&(this.couldScheduled=!0)}onClose(){this.dialog.close()}ordonnancer(i){i&&i.id&&this.dialogServ.openObs({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Liqudation de la d\xe9clatation N\xb0"+(null==i?void 0:i.refDoc),message:"Veuillez confirmer la liquidation cette d\xe9claration qui g\xe9n\xe9rera une note de d\xe9bit",action:"SHOW"}}).obsDialog.afterClosed().subscribe(n=>{n.result&&this.liquidationServ.schedule(null==i?void 0:i.id,{status:N.qM.VALIDED,observation:n.text}).subscribe(o=>{this.dialog.close({status:"success",operation:"liquidation",data:o})},o=>{this.hasError=!0,this.error=new v.D("Erreur de validation",o.error.description)})})}validate(i){let e={disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Validation note de debit N\xb0"+(null==i?void 0:i.refDoc),message:"Veuillez vous valider cette d\xe9claration",action:"SHOW"}};i&&i.id&&(this.hasError=!1,this.dialogServ.openObs(e).obsDialog.afterClosed().subscribe(n=>{n.result&&this.liquidationServ.validateTaxation(null==i?void 0:i.id,{status:N.qM.VALIDED,observation:n.text}).subscribe(o=>{this.taxation=o},o=>{this.hasError=!0,this.error=new v.D("Erreur de validation",o.error.description)})}))}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(rt.W),t.Y36(D.u),t.Y36(w.L),t.Y36(_.WI),t.Y36(_.so),t.Y36(Q.m),t.Y36(ot.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-liquidation-detail"]],decls:139,vars:47,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],[1,"h-100"],["class","alert alert-danger ",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-3","border-right"],[1,"d-flex","flex-column","align-items-center"],[1,"mb-3","font-weight-bold"],[1,"warp-avatar"],[4,"ngIf"],[1,"fa","fa-key"],[1,"fa","fa-phone"],[1,"fa","fa-envelope"],[1,"col","ml-2"],[1,"col-md-12","border-bottom"],[1,"fa","fa-clock"],[1,"col-md-12","border-bottom","font-weight-bold"],[1,"mb-3","mt-2"],[1,"col-md-12"],[1,"rTable"],[1,"rTableHeading"],[1,"rTableRow"],[1,"rTableHead"],["alt","Base de calcul",1,"rTableHead"],[4,"ngFor","ngForOf"],[1,"rTableFoot"],[1,"rTableCell"],["class","btn btn-indigo btn-with-icon ","type","button",3,"click",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","button",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],[1,"rTableRow",3,"item","prices","index"],["type","button",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"fa","fa-check"],["type","button",1,"btn","btn-indigo","btn-with-icon"],[1,"fa","fa-refresh"],[1,"fa","fa-print"]],template:function(i,e){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t.TgZ(2,"mat-toolbar-row"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",1),t.NdJ("click",function(){return e.onClose()}),t._uU(6," close "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"mat-dialog-content",2),t.YNc(8,fi,6,2,"div",3),t.TgZ(9,"div",4),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t._uU(14,"Contribuable"),t.qZA(),t.TgZ(15,"div",9),t.YNc(16,vi,3,1,"ng-container",10),t.YNc(17,Ti,2,0,"ng-container",10),t.qZA(),t.TgZ(18,"div"),t.YNc(19,xi,2,2,"h4",10),t.YNc(20,Ai,4,2,"h4",10),t.TgZ(21,"p"),t.TgZ(22,"strong"),t._UZ(23,"i",11),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"p"),t.TgZ(26,"strong"),t._UZ(27,"i",12),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"p"),t.TgZ(30,"strong"),t._UZ(31,"i",13),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",14),t.TgZ(34,"div",5),t.TgZ(35,"div",15),t.TgZ(36,"div",8),t._uU(37,"Calcul"),t.qZA(),t.TgZ(38,"div"),t._uU(39," Total g\xe9n\xe9ral : "),t.TgZ(40,"strong"),t._uU(41),t.ALo(42,"number"),t.ALo(43,"number"),t.qZA(),t.qZA(),t.TgZ(44,"div"),t._uU(45,"Nbr. taxe : "),t.TgZ(46,"strong"),t._uU(47),t.qZA(),t.qZA(),t.TgZ(48,"div"),t._uU(49,"Statut : "),t.TgZ(50,"strong"),t._uU(51),t.qZA(),t.qZA(),t.TgZ(52,"div"),t._uU(53,"N\xb0 R\xe9f : "),t.TgZ(54,"strong"),t._uU(55),t.qZA(),t.qZA(),t.TgZ(56,"div"),t._uU(57," Taux du jour : "),t.TgZ(58,"strong"),t._uU(59),t.ALo(60,"number"),t.ALo(61,"number"),t.qZA(),t.qZA(),t.TgZ(62,"div"),t._uU(63,"Date : "),t.TgZ(64,"strong"),t._UZ(65,"i",16),t._uU(66),t.ALo(67,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",17),t.TgZ(69,"div",18),t._uU(70,"Service de taxation"),t.qZA(),t.TgZ(71,"div"),t._uU(72," Bureau : "),t.TgZ(73,"strong"),t._uU(74),t.qZA(),t.qZA(),t.TgZ(75,"div"),t._uU(76," Centre : "),t.TgZ(77,"strong"),t._uU(78),t.qZA(),t.qZA(),t.TgZ(79,"div"),t._uU(80," Agent taxateur : "),t.TgZ(81,"strong"),t._uU(82),t.qZA(),t.qZA(),t.TgZ(83,"div"),t._uU(84," Agent Encodeur : "),t.TgZ(85,"strong"),t._uU(86),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"div",19),t.TgZ(88,"div",18),t.TgZ(89,"strong"),t._uU(90," Elements de taxation"),t.qZA(),t.qZA(),t.TgZ(91,"div",20),t.TgZ(92,"div",21),t.TgZ(93,"tr",22),t.TgZ(94,"div",23),t._uU(95,"#"),t.qZA(),t.TgZ(96,"div",23),t._uU(97,"Acte"),t.qZA(),t.TgZ(98,"div",23),t._uU(99,"Taxe"),t.qZA(),t.TgZ(100,"div",23),t._uU(101,"Taux"),t.qZA(),t.TgZ(102,"div",23),t._uU(103,"Propriet\xe9"),t.qZA(),t.TgZ(104,"div",23),t._uU(105,"Qte/U/M"),t.qZA(),t.TgZ(106,"div",24),t._uU(107,"Base"),t.qZA(),t.TgZ(108,"div",23),t._uU(109,"Total"),t.qZA(),t.qZA(),t.qZA(),t.YNc(110,bi,2,3,"ng-container",25),t.TgZ(111,"div",26),t.TgZ(112,"div",22),t.TgZ(113,"div",27),t._uU(114,"\xa0"),t.qZA(),t.TgZ(115,"div",27),t._uU(116,"Total G\xe9n\xe9ral"),t.qZA(),t._UZ(117,"div",27),t._UZ(118,"div",27),t._UZ(119,"div",27),t._UZ(120,"div",27),t._UZ(121,"div",27),t.TgZ(122,"div",27),t._uU(123),t.ALo(124,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"div",19),t.TgZ(126,"div",18),t.TgZ(127,"strong"),t._uU(128," Observations"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(129,"mat-dialog-actions"),t.YNc(130,qi,3,0,"button",28),t._uU(131,"\xa0 "),t.YNc(132,Ci,3,0,"button",28),t._uU(133,"\xa0 "),t.YNc(134,Ui,3,0,"button",29),t._uU(135,"\xa0 "),t.YNc(136,Si,3,0,"button",29),t._uU(137,"\xa0 "),t.YNc(138,Ei,3,0,"button",29),t.qZA(),t.qZA()),2&i&&(t.xp6(4),t.hij(" ",e.data.title," "),t.xp6(4),t.Q6J("ngIf",1==e.hasError),t.xp6(8),t.Q6J("ngIf",null!=(null==e.taxation?null:e.taxation.contribuable)&&null!=(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.photo)),t.xp6(1),t.Q6J("ngIf",null!=(null==e.taxation?null:e.taxation.contribuable)&&null==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.photo)),t.xp6(2),t.Q6J("ngIf","P"==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.typePersonne)),t.xp6(1),t.Q6J("ngIf","M"==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.typePersonne)),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.nuc,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.phone,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.email,""),t.xp6(9),t.AsE(" ",t.xi3(42,30,null==e.taxation?null:e.taxation.amount,".2-2"),"$ | ",t.xi3(43,33,null==e.taxation?null:e.taxation.amountCdf,".2-2")," CDF"),t.xp6(6),t.hij(" ",null==e.taxation||null==e.taxation.taxation||null==e.taxation.taxation.items?null:e.taxation.taxation.items.length,""),t.xp6(4),t.hij(" ",null==e.taxation?null:e.taxation.statut,""),t.xp6(4),t.hij(" ",null==e.taxation?null:e.taxation.refDoc,""),t.xp6(4),t.AsE("",t.xi3(60,36,1,".2-2")," $ = ",t.xi3(61,39,null==e.taxation?null:e.taxation.AppliedTaux,".2-2")," CDF "),t.xp6(7),t.hij(" ",t.lcZ(67,42,null==e.taxation?null:e.taxation.createdAt),""),t.xp6(8),t.hij(" ",null==e.taxation||null==e.taxation.bureau?null:e.taxation.bureau.nom,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.centre?null:e.taxation.centre.nom," "),t.xp6(4),t.AsE(" ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.nom," ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.prenom," "),t.xp6(4),t.AsE(" ",null==e.taxation||null==e.taxation.taxation||null==e.taxation.taxation.agent?null:e.taxation.taxation.agent.nom," ",null==e.taxation||null==e.taxation.taxation||null==e.taxation.taxation.agent?null:e.taxation.taxation.agent.prenom," "),t.xp6(24),t.Q6J("ngForOf",null==e.taxation||null==e.taxation.taxation?null:e.taxation.taxation.items),t.xp6(13),t.hij(" ",t.xi3(124,44,null==e.taxation?null:e.taxation.amount,".2-2")," "),t.xp6(7),t.Q6J("ngIf","PROCESSING"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf",("VALIDED"==(null==e.taxation?null:e.taxation.statut)||"VERIFIED"==(null==e.taxation?null:e.taxation.statut))&&e.couldScheduled),t.xp6(2),t.Q6J("ngIf","PROCESSING"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf","INIT"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf",e.showPrint))},directives:[_.uh,j.rD,B.Hw,_.xY,Z.O5,Z.sg,_.H8,Pt.X],pipes:[Z.JJ,Z.uU],styles:[""]}),a})();const Di=["seachInput"];function Ni(a,s){if(1&a&&(t.TgZ(0,"div",2),t.TgZ(1,"div",19),t.TgZ(2,"div",32),t.TgZ(3,"form",33),t.TgZ(4,"div",34),t.TgZ(5,"div",35),t._UZ(6,"input",36,37),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(6),t.Q6J("formControl",i.formSearch)}}function wi(a,s){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.AsE("",i.contribuable," - ",i.prenom,"")}}function Yi(a,s){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.raisonSociale)}}function Oi(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"tr",42),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit;return t.oxw(2).view(n)}),t.TgZ(1,"td",43),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"img",44),t._UZ(7,"br"),t.YNc(8,wi,2,2,"div",45),t.YNc(9,Yi,2,1,"div",45),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t.TgZ(28,"div",46),t.TgZ(29,"a",47),t._UZ(30,"i",48),t.qZA(),t._uU(31,"\xa0 "),t.TgZ(32,"a",49),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit;return t.oxw(2).edit(n)}),t._UZ(33,"i",50),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const i=t.oxw(),e=i.index,n=i.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",e+1+o.currentPage*o.pp,""),t.xp6(2),t.Oqu(n.refDoc),t.xp6(2),t.Q6J("src",o.imgPath+n.profile+"."+n.profileExt,t.LSH),t.xp6(2),t.Q6J("ngIf","M"!=n.type),t.xp6(1),t.Q6J("ngIf","M"==n.type),t.xp6(2),t.Oqu(n.nuc),t.xp6(2),t.Oqu(n.type),t.xp6(2),t.Oqu(n.acte),t.xp6(2),t.AsE("",t.xi3(18,13,n.amount,".2-2"),"$ | ",t.xi3(19,16,n.amountCdf,".2-2"),"FC"),t.xp6(4),t.Oqu(n.agent),t.xp6(2),t.Oqu(t.lcZ(24,19,n.createdAt)),t.xp6(3),t.Oqu(n.statut)}}function Li(a,s){if(1&a&&(t.ynx(0),t.YNc(1,Oi,34,21,"tr",41),t.BQk()),2&a){const i=s.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.id!=(null==e.connectedUser?null:e.connectedUser.id))}}function Pi(a,s){if(1&a&&(t.TgZ(0,"div",38),t.TgZ(1,"table",39),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Ref Dossier"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Contribuable"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Nuc"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Type "),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Acte(P)"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Montant"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Agent"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Statut"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"\xa0"),t.qZA(),t.qZA(),t._UZ(26,"tr"),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,Li,2,1,"ng-container",40),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(28),t.Q6J("ngForOf",null==i.itemsPager?null:i.itemsPager.content)}}function yi(a,s){1&a&&(t.TgZ(0,"div",51),t.TgZ(1,"strong"),t._uU(2,"Aucune donn\xe9e n'est trouv\xe9e"),t.qZA(),t.qZA())}let Ji=(()=>{class a{constructor(i,e,n,o,l,r){this.liquidServ=i,this.rolesChecker=e,this.dialogManager=n,this.taxationServ=o,this.auth=l,this.parent=r,this.p=0,this.pp=T.N.defautlPageSize,this.itemLength=0,this.currentPage=0,this.imgPath="",this.pattern="",this.subs=[],this.isSeachForm=!1}ngOnInit(){var i,e,n,o;if(this.imgPath=T.N.imgPath,this.form=new u.cw({dateStart:new u.NI(new Date),dateEnd:new u.NI(new Date)}),this.formSearch=new u.NI,this.formSearch.valueChanges.pipe((0,et.O)(""),(0,it.w)(l=>{var r,d;return l.length>3&&this.liquidServ.searchBureauPaging(null===(d=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===d?void 0:d.id,l,0,T.N.defautlPageSize).subscribe(c=>{var g;return this.itemsPager=c.pager,this.itemLength=null===(g=c.pager)||void 0===g?void 0:g.totalElements,(0,Y.of)(this.itemsPager)}),(0,Y.of)([])})).subscribe(l=>{console.log("eee",l)}),this.dateStart=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.dateEnd=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.READ])){if(!(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.bureau)||void 0===e?void 0:e.id))return;this.liquidServ.getOperationsOfOfficeInsPaging(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.bureau)||void 0===o?void 0:o.id,this.dateStart,this.dateEnd,0).subscribe(l=>{this.container=l,this.itemsPager=l.pager,this.parent.statLiq=l})}}openNewDeclarationForm(){this.dialogConfig=new _.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Nouvelle d\xe9claration ",message:"",action:"NEW",data:null},this.dialogManager.open(mt,this.dialogConfig)}edit(i){}view(i){(this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.READ])||this.rolesChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[m.e.ALL,m.e.WRITE]))&&this.liquidServ.getTaxation(i.id).subscribe(e=>{this.dialogConfig=new _.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="cbg",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"Taxation d\xe9tail :"+i.refDoc,title:"Taxation d\xe9tail :"+i.refDoc,message:"",action:"VIEW",data:e},this.dialogManager.open(Ii,this.dialogConfig).afterClosed().subscribe(n=>{})})}viewLiquidation(i){}dateRangeChange(i,e){var n,o,l,r;if(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.bureau)||void 0===o?void 0:o.id)if(i.value.length>0&&e.value.length>0){let d=i.value.split("/")[2]+"-"+i.value.split("/")[0]+"-"+i.value.split("/")[1],c=e.value.split("/")[2]+"-"+e.value.split("/")[0]+"-"+e.value.split("/")[1];this.dateStart=d,this.dateEnd=c,this.subs.push(this.liquidServ.getOperationsOfOfficeInsPaging(null===(r=null===(l=this.auth.getSession().user)||void 0===l?void 0:l.bureau)||void 0===r?void 0:r.id,d,c,0,T.N.defautlPageSize).subscribe(g=>{var p;this.container=g,this.itemLength=null===(p=null==g?void 0:g.pager)||void 0===p?void 0:p.totalElements,this.itemsPager=void 0,this.itemsPager=g.pager,this.parent.statLiq=g}))}else console.log("desordre")}dateRangeChanges(i){}onPageChanged(i){var e,n,o,l,r,d;if(this.currentPage=i.pageIndex,null===(n=null===(e=this.auth.getSession().user)||void 0===e?void 0:e.bureau)||void 0===n?void 0:n.id){if(this.formSearch.value&&this.formSearch.value.length>0)return void(this.formSearch.value.length>3&&this.liquidServ.searchBureauPaging(null===(l=null===(o=this.auth.getSession().user)||void 0===o?void 0:o.bureau)||void 0===l?void 0:l.id,this.formSearch.value,i.pageIndex,T.N.defautlPageSize).subscribe(c=>{var g;this.itemsPager=c.pager,this.itemLength=null===(g=c.pager)||void 0===g?void 0:g.totalElements}));this.subs.push(this.taxationServ.getTaxationsOfOfficeInsPaging(null===(d=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===d?void 0:d.id,this.dateStart,this.dateEnd,i.pageIndex,T.N.defautlPageSize).subscribe(c=>{var g,p;this.itemLength=c.totalElements,this.itemsPager=void 0,this.itemsPager=c,this.subs.push(this.taxationServ.getTaxationsStastOfOfficeIns(null===(p=null===(g=this.auth.getSession().user)||void 0===g?void 0:g.bureau)||void 0===p?void 0:p.id,this.dateStart,this.dateEnd).subscribe(f=>{this.parent.stat=f}))}))}}onStatusChange(i){console.log(i)}clickSearchForm(){this.isSeachForm?this.isSeachForm=!1:(this.isSeachForm=!0,null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus())}ngAfterViewInit(){null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus()}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(rt.W),t.Y36(w.L),t.Y36(_.uw),t.Y36(Q.m),t.Y36(D.u),t.Y36(Zt))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-liquidation"]],viewQuery:function(i,e){if(1&i&&t.Gf(Di,7),2&i){let n;t.iGM(n=t.CRH())&&(e.searchElementRef=n.first)}},inputs:{itemsPager:"itemsPager"},decls:49,vars:10,consts:[[1,"az-content-label","mg-b-5","config-title"],[3,"formGroup"],[1,"row"],[1,"col-4"],[3,"rangePicker"],["matStartDate","","matInput","","placeholder","Start date","formControlName","dateStart"],["dateRangeStart",""],["matEndDate","","matInput","","placeholder","End date","formControlName","dateEnd",3,"dateChange"],["dateRangeEnd",""],["matSuffix","",3,"for"],["picker",""],[1,"col-2",3,"hasRoles"],[3,"selectionChange"],["value",""],["value","VALIDED"],["value","CANCELLED"],["value","INIT"],["value","REDRESSED"],["value","TAXED"],[1,"col"],[1,"",2,"margin-top","20px","margin-left","-10","display","inline-block",3,"click"],[1,"fa","fa-search"],["class","row",4,"ngIf"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-y-30"],["class","table-responsive",4,"ngIf"],[1,"col-md-6"],["aria-label","Select page",3,"length","pageSize","hidePageSize","page"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"nav-search","clearfix"],["role","search",1,"navtop","navbar-form","home-search"],[1,"search-group"],["id","nav-search-input",1,"input-group","clearfix"],["type","text","placeholder","Search",1,"form-control","dropdown-toggle",3,"formControl"],["seachInput",""],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["scope","row"],["onError","this.src='../assets/img/avatar.jpg'",1,"rounded-circle",2,"width","40px","height","40px",3,"src"],[4,"ngIf"],[1,"btn-group"],["type","button",1,""],[1,"fa","fa-trash"],["type","button",1,"",3,"click"],[1,"fa","fa-edit"],["role","alert",1,"alert","alert-info"]],template:function(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"form",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7,"Filtrer par date"),t.qZA(),t.TgZ(8,"mat-date-range-input",4),t._UZ(9,"input",5,6),t.TgZ(11,"input",7,8),t.NdJ("dateChange",function(){t.CHM(n);const l=t.MAs(10),r=t.MAs(12);return e.dateRangeChange(l,r)}),t.qZA(),t.qZA(),t._UZ(13,"mat-datepicker-toggle",9),t._UZ(14,"mat-date-range-picker",null,10),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"mat-form-field"),t.TgZ(18,"mat-label"),t._uU(19,"Statut"),t.qZA(),t.TgZ(20,"mat-select",12),t.NdJ("selectionChange",function(l){return e.onStatusChange(l)}),t.TgZ(21,"mat-option",13),t._uU(22,"Tous"),t.qZA(),t.TgZ(23,"mat-option",14),t._uU(24,"Valid\xe9e"),t.qZA(),t.TgZ(25,"mat-option",15),t._uU(26,"Annul\xe9e"),t.qZA(),t.TgZ(27,"mat-option",16),t._uU(28,"INIT"),t.qZA(),t.TgZ(29,"mat-option",17),t._uU(30,"Redress\xe9e"),t.qZA(),t.TgZ(31,"mat-option",18),t._uU(32,"Tax\xe9"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",19),t.TgZ(34,"a",20),t.NdJ("click",function(){return e.clickSearchForm()}),t._UZ(35,"i",21),t.qZA(),t.qZA(),t.qZA(),t.YNc(36,Ni,8,1,"div",22),t.qZA(),t.TgZ(37,"div",23),t.TgZ(38,"div",24),t.TgZ(39,"button",25),t._UZ(40,"i",26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(41,"hr",27),t.YNc(42,Pi,29,1,"div",28),t.TgZ(43,"div",2),t.TgZ(44,"div",29),t._uU(45," \xa0 "),t.qZA(),t.TgZ(46,"div",29),t.TgZ(47,"mat-paginator",30),t.NdJ("page",function(l){return e.onPageChanged(l)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(48,yi,3,0,"div",31),t.qZA()}if(2&i){const n=t.MAs(15);t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("rangePicker",n),t.xp6(5),t.Q6J("for",n),t.xp6(3),t.Q6J("hasRoles","declaration"),t.xp6(20),t.Q6J("ngIf",e.isSeachForm),t.xp6(6),t.Q6J("ngIf",0==(null==e.itemsPager?null:e.itemsPager.empty)),t.xp6(5),t.Q6J("length",e.itemLength)("pageSize",e.pp)("hidePageSize",!0),t.xp6(1),t.Q6J("ngIf",1==(null==e.itemsPager?null:e.itemsPager.empty))}},directives:[u._Y,u.JL,u.sg,S.KE,S.hX,q.wx,q.zY,V.Nt,u.Fj,u.JJ,u.u,q.By,q.nW,S.R9,q._g,st.f,$.gD,H.ey,Z.O5,ut.NW,u.F,u.oH,Z.sg],pipes:[Z.JJ,Z.uU],styles:[""]}),a})();var _t=h(1293);const Ri=function(){return["./organized"]},Mi=function(){return["./discharging"]};let Mt=(()=>{class a{constructor(i,e,n,o,l,r){this.printManager=i,this.roleChecker=e,this.genConfig=n,this.auth=o,this.appStor=l,this.schedServ=r,this.stat=new k.a,this.statCancel=new k.a,this.statValid=new k.a,this.officeOrAgent="agent",this.subs=[],this.dateStart="",this.dateEnd=""}ngOnInit(){var i,e,n,o;this.appStor.exist("taux")?this.taux=this.appStor.getJson("taux"):(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.regie)||void 0===e?void 0:e.id)&&this.genConfig.getCurrentTaux(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.regie)||void 0===o?void 0:o.id).subscribe(l=>{this.taux=l})}updateDates(i,e){this.dateStart=i,this.dateEnd=e}reportOfChanged(i){}printReport(){var i,e,n,o,l,r,d,c;let g="RAPPORT ";"agent"==this.officeOrAgent?this.roleChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[m.e.ALL,m.e.PRINT])&&(g+=" DES ORDONNANCEMENTS DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,J.D)(this.schedServ.getReportOfAgentByStatut(null===(e=null===(i=this.auth.getSession())||void 0===i?void 0:i.user)||void 0===e?void 0:e.id,this.dateStart,this.dateEnd),this.schedServ.getReportOfAgent(null===(n=this.auth.getSession().user)||void 0===n?void 0:n.id,this.dateStart,this.dateEnd)).subscribe(p=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,p[0],p[1],this.auth.getSession().user,g)})):this.roleChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[m.e.ALL,m.e.PRINT])&&(g+=" DES ORDONNANCEMENTS DU "+b(this.dateStart,"YYYY-MM-D").format("DD-MM-YYYY")+" AU "+b(this.dateEnd,"YYYY-MM-D").format("DD-MM-YYYY"),(0,J.D)(this.schedServ.getReportOfOfficeByStatut(null===(r=null===(l=null===(o=this.auth.getSession())||void 0===o?void 0:o.user)||void 0===l?void 0:l.bureau)||void 0===r?void 0:r.id,this.dateStart,this.dateEnd),this.schedServ.getTaxationsOfOfficeIns(null===(c=null===(d=this.auth.getSession().user)||void 0===d?void 0:d.bureau)||void 0===c?void 0:c.id,this.dateStart,this.dateEnd)).subscribe(p=>{this.printManager.generateReportOfAgent(this.dateStart,this.dateEnd,p[0],p[1],this.auth.getSession().user,g)}))}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(at.$),t.Y36(w.L),t.Y36(F.E),t.Y36(D.u),t.Y36(ht.I),t.Y36(_t.H))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-scheduling-home"]],inputs:{stat:"stat",statCancel:"statCancel",statValid:"statValid",statLiq:"statLiq"},decls:71,vars:14,consts:[[1,"row"],[1,"col-md-3","p-4","position-fixe","az-content-left-components"],[1,"component-item"],[1,"flex-column","justify-content-center","d-flex"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-icon"],[1,"flex-row","justify-content-center","d-flex"],[1,"position-relative","wrap-stat-sum"],[1,"stat-sum-title"],[1,"w-100","d-flex","flex-column","align-content-end","align-items-end"],[1,"stat-sum-val"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column","mb-2"],["aria-label","Select an option",3,"ngModel","ngModelChange","change"],["value","office"],["value","agent"],[1,"d-flex","align-content-stretch","align-items-stretch","flex-column"],["href","",1,"btn","btn-purple","mb-2"],[1,"fa","fa-print"],["href","",1,"btn","btn-purple"],[1,"fa","fa-envelope"],[1,"col-md-9","offset-"],[1,"az-content-breadcrumb"],[1,"content"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"routerLink"],[1,"ht-40"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"strong",5),t._uU(6,"Taux du jour"),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"strong"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",7),t.TgZ(12,"div",8),t.TgZ(13,"p"),t._uU(14," Ordonnanc\xe9es"),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",10),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"div",10),t._uU(20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",7),t.TgZ(22,"div",8),t.TgZ(23,"p"),t._uU(24," Apur\xe9es"),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",10),t._uU(27,"0.00$"),t.qZA(),t.TgZ(28,"div",10),t._uU(29,"0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",7),t.TgZ(31,"div",8),t.TgZ(32,"p"),t._uU(33," En souffrance"),t.qZA(),t.qZA(),t.TgZ(34,"div",9),t.TgZ(35,"div",10),t._uU(36,"0.00$"),t.qZA(),t.TgZ(37,"div",10),t._uU(38,"0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"p"),t._uU(40,"\xa0"),t.qZA(),t.TgZ(41,"div",11),t.TgZ(42,"mat-radio-group",12),t.NdJ("ngModelChange",function(o){return e.officeOrAgent=o})("change",function(o){return e.reportOfChanged(o)}),t.TgZ(43,"mat-radio-button",13),t._uU(44,"Bureau"),t.qZA(),t._uU(45," \xa0 "),t.TgZ(46,"mat-radio-button",14),t._uU(47,"Perso"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",15),t.TgZ(49,"a",16),t._UZ(50,"i",17),t._uU(51," Impression rapport"),t.qZA(),t.TgZ(52,"a",18),t._UZ(53,"i",19),t._uU(54," Export rapport"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",20),t.TgZ(56,"div",21),t.TgZ(57,"span"),t._uU(58,"Recette"),t.qZA(),t.TgZ(59,"span"),t._uU(60,"Ordonnancement"),t.qZA(),t.qZA(),t.TgZ(61,"div",22),t.TgZ(62,"div",23),t.TgZ(63,"nav",24),t.TgZ(64,"a",25),t._uU(65,"Op\xe9rations"),t.qZA(),t.TgZ(66,"a",25),t._uU(67,"Apurement"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div"),t._UZ(69,"router-outlet"),t.qZA(),t.qZA(),t._UZ(70,"div",26),t.qZA(),t.qZA()),2&i&&(t.xp6(9),t.hij("",t.xi3(10,6,2e3,".2-2")," CDF"),t.xp6(8),t.hij("",t.xi3(18,9,null==e.stat?null:e.stat.totalActe,".2-2"),"$"),t.xp6(3),t.Oqu(null==e.stat?null:e.stat.volume),t.xp6(22),t.Q6J("ngModel",e.officeOrAgent),t.xp6(22),t.Q6J("routerLink",t.DdM(12,Ri)),t.xp6(2),t.Q6J("routerLink",t.DdM(13,Mi)))},directives:[ct.VQ,u.JJ,u.On,ct.U0,I.yS,I.Od,I.lC],pipes:[Z.JJ],styles:[""]}),a})();var ki=h(8239),Qi=h(8891),Fi=h(5257),kt=h(2145),Qt=h(548),Hi=h(5242),Ft=h(4022);function Bi(a,s,i){return 0===i?[s]:(a.push(s),a)}var zi=h(1717),$i=h(1846),Gi=h(704),Wi=h(8409),Xi=h(8003),G=h(8341);const Ki=["inputRole"];function tn(a,s){if(1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"div",19),t._uU(5),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.Oqu(null==i.error?null:i.error.error),t.xp6(3),t.hij(" ",null==i.error?null:i.error.description," ")}}function en(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"mat-chip",20),t.NdJ("removed",function(){const o=t.CHM(i).$implicit;return t.oxw().removeRole(o)}),t._uU(1),t.TgZ(2,"mat-icon",21),t._uU(3,"cancel"),t.qZA(),t.qZA()}if(2&a){const i=s.$implicit,e=t.oxw();t.Q6J("selectable",e.selectable)("removable",e.removable),t.xp6(1),t.lnq(" ",null==i?null:i.num," (",null==i?null:i.devise," ) ",null==i.banque?null:i.banque.denomination," ")}}function nn(a,s){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.lnq(" ",i.num," (",null==i?null:i.devise," ) ",null==i.banque?null:i.banque.denomination," ")}}let an=(()=>{class a{constructor(i,e,n,o,l){this.auth=i,this.genConf=e,this.configService=n,this.dialog=o,this.data=l,this.separatorKeysCodes=[X.K5,X.OC],this.hasError=!1,this.imgPath="",this.accounts=[],this.selectedAccounts=[],this.selectable=!0,this.removable=!0,this.couldSelectMultiRoles=!0,this.subs=[]}ngOnDestroy(){this.subs=[],this.selectedAccounts=[]}ngOnInit(){var i,e,n,o;(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.regie)||void 0===e?void 0:e.id)&&this.subs.push(this.genConf.getBankAccountOfRegie(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.regie)||void 0===o?void 0:o.id).subscribe(l=>{this.accounts=l})),this.form=new u.cw({role:new u.NI})}onAccountSelected(i){this.selectedAccounts.length>=0&&0==this.couldSelectMultiRoles||this.accounts.forEach((e,n)=>{if(e.id==i.option.value){if(this.selectedAccounts.includes(e))return;return this.selectedAccounts.push(e),this.inputRole.nativeElement.value="",void this.form.controls.role.setValue(null)}})}removeRole(i){this.selectedAccounts.forEach((e,n)=>{e.id!=i.id||this.selectedAccounts.splice(n,1)})}addRole(i){console.log(i)}onSubmit(){this.selectedAccounts.length>0&&this.dialog.close({accounts:this.selectedAccounts,status:"success"})}onClose(){}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(D.u),t.Y36(F.E),t.Y36(F.E),t.Y36(_.so),t.Y36(_.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-choose-account"]],viewQuery:function(i,e){if(1&i&&t.Gf(Ki,5),2&i){let n;t.iGM(n=t.CRH())&&(e.inputRole=n.first)}},inputs:{error:"error",hasError:"hasError"},decls:30,vars:8,consts:[[3,"formGroup","ngSubmit"],["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],["class","alert alert-danger ",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"alert","alert-info"],["appearance","fill",1,"example-full-width"],["aria-label","Roles"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Ajouter un autre numero de compte/t\xe9l\xe9phone","formControlName","role",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["inputRole",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-indigo","btn-with-icon"],[1,"typcn","typcn-folder-add"],[1,"alert","alert-danger"],[1,"p-2"],[3,"selectable","removable","removed"],["matChipRemove",""],[3,"value"]],template:function(i,e){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(1,"h1",1),t.TgZ(2,"mat-toolbar-row"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",2),t.NdJ("click",function(){return e.onClose()}),t._uU(6," close "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"mat-dialog-content"),t.YNc(8,tn,6,2,"div",3),t.TgZ(9,"div",4),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"p"),t._uU(13,"Veuillez s\xe9lectionner Numero(s) compte/T\xe9l\xe9phone (s) o\xf9 le paiement de la note sera encaiss\xe9. Il serait primodial de privileger plusieurs modes de paiement "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label"),t._uU(17,"Numero compte/T\xe9l\xe9phone "),t.qZA(),t.TgZ(18,"mat-chip-list",8,9),t.YNc(20,en,4,5,"mat-chip",10),t.TgZ(21,"input",11,12),t.NdJ("matChipInputTokenEnd",function(o){return e.addRole(o)}),t.qZA(),t.qZA(),t.TgZ(23,"mat-autocomplete",13,14),t.NdJ("optionSelected",function(o){return e.onAccountSelected(o)}),t.YNc(25,nn,2,4,"mat-option",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"mat-dialog-actions"),t.TgZ(27,"button",16),t._UZ(28,"i",17),t._uU(29," Enregistrer "),t.qZA(),t.qZA(),t.qZA()),2&i){const n=t.MAs(19),o=t.MAs(24);t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",e.data.title," "),t.xp6(4),t.Q6J("ngIf",1==e.hasError),t.xp6(12),t.Q6J("ngForOf",e.selectedAccounts),t.xp6(1),t.Q6J("matAutocomplete",o)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",e.accounts)}},directives:[u._Y,u.JL,u.sg,_.uh,j.rD,B.Hw,_.xY,Z.O5,S.KE,S.hX,G.qn,Z.sg,u.Fj,z.ZL,G.oH,u.JJ,u.u,z.XC,_.H8,G.HS,G.qH,H.ey],styles:[""]}),a})();const on=["container"];function ln(a,s){if(1&a&&(t.TgZ(0,"div",29),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"div",30),t._uU(5),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.Oqu(null==i.error?null:i.error.error),t.xp6(3),t.hij(" ",null==i.error?null:i.error.description," ")}}function sn(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"img",31,32),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.Q6J("src",i.imgPath+""+(null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.photo)+"."+(null==i.taxation||null==i.taxation.contribuable||null==i.taxation.contribuable.photo?null:i.taxation.contribuable.photo.type),t.LSH)}}function rn(a,s){1&a&&(t.ynx(0),t._UZ(1,"img",33),t.BQk())}function un(a,s){if(1&a&&(t.TgZ(0,"h4"),t._uU(1),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.AsE("",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.nom," ",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.prenom," (P)")}}function cn(a,s){if(1&a&&(t.TgZ(0,"h4"),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.hij("",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.raisonSociale," "),t.xp6(2),t.hij(" ",null==i.taxation||null==i.taxation.contribuable?null:i.taxation.contribuable.nom," (M) ")}}function dn(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.validate(n.taxation)}),t._UZ(1,"i",35),t._uU(2," Valider "),t.qZA()}}function gn(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.ordonnancer(n.taxation)}),t._UZ(1,"i",36),t._uU(2," Ordonnancer "),t.qZA()}}function hn(a,s){1&a&&(t.TgZ(0,"button",37),t._UZ(1,"i",38),t._uU(2," Demander Avis de redressement "),t.qZA())}function pn(a,s){1&a&&(t.TgZ(0,"button",37),t._UZ(1,"i",39),t._uU(2," Annuler "),t.qZA())}function mn(a,s){1&a&&(t.TgZ(0,"button",37),t._UZ(1,"i",38),t._uU(2," Non conforme "),t.qZA())}function Zn(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(i),t.oxw().onBtnApureClicked()}),t._UZ(1,"i",40),t._uU(2," Apurer "),t.qZA()}}function _n(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return n.print(n.taxation)}),t._UZ(1,"i",41),t._uU(2," Imprimer "),t.qZA()}}let fn=(()=>{class a{constructor(i,e,n,o,l,r,d,c,g,p,f){this.printService=i,this.taxConf=e,this.ordServ=n,this.auth=o,this.rolesChecker=l,this.data=r,this.dialog=d,this.dialogMan=c,this.dialogServ=g,this.componentFactoryResolver=p,this.cdr=f,this.hasError=!1,this.showPrint=!1,this.couldScheduled=!1,this.selectedAccounts=[],this.subs=[],this.couldApure=!1}ngOnDestroy(){this.subs=[]}ngOnInit(){this.data.data.id&&(this.taxation=this.data.data),this.rolesChecker.hasPermission(this.auth.getSession().user,"liquidation",[m.e.ALL,m.e.PRINT])&&(this.showPrint=!0),this.rolesChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[m.e.ALL,m.e.WRITE])&&(this.couldScheduled=!0),this.rolesChecker.hasPermission(this.auth.getSession().user,"apurement",[m.e.ALL,m.e.WRITE])&&(this.couldApure=!0),this.couldApure=!0,this.showPrint=!0,this.subs.push(this.ordServ.getWhereToPay(this.data.data.id).subscribe(i=>{this.taxation.accounts=i}))}onClose(){this.dialog.close()}ordonnancer(i){i&&i.id&&this.dialogServ.openObs({disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Liqudation de la d\xe9clatation N\xb0"+(null==i?void 0:i.refDoc),message:"Veuillez confirmer la liquidation cette d\xe9claration qui g\xe9n\xe9rera une note de d\xe9bit",action:"SHOW"}}).obsDialog.afterClosed().subscribe(n=>{n.result&&this.ordServ.schedule(null==i?void 0:i.id,{status:N.qM.VALIDED,observation:n.text}).subscribe(o=>{this.dialog.close({status:"success",operation:"liquidation",data:o})},o=>{this.hasError=!0,this.error=new v.D("Erreur de validation",o.error.description)})})}validate(i){let e={disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Validation note de debit N\xb0"+(null==i?void 0:i.refDoc),message:"Veuillez vous valider cette d\xe9claration",action:"SHOW"}};i&&i.id&&(this.hasError=!1,this.dialogServ.openObs(e).obsDialog.afterClosed().subscribe(n=>{}))}print(i){var e=this;if(this.rolesChecker.hasPermission(this.auth.getSession().user,"ordonnancement",[m.e.ALL,m.e.PRINT]),i){let n={disableClose:!0,width:"68%",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Impression note de perception N\xb0",message:"",action:"PRINT"}};this.hasError=!1,this.dialogMan.open(an,n).afterClosed().subscribe(o=>{o.status&&"success"==o.status&&(this.selectedAccounts=o.accounts,this.ordServ.print(i.id,o.accounts).subscribe(l=>{var r,d;let c=[];new Qi.y(g=>{var p,f;console.log(null==i?void 0:i.items),null===(f=null===(p=null==i?void 0:i.taxation)||void 0===p?void 0:p.items)||void 0===f||f.forEach(function(){var C=(0,ki.Z)(function*(x){var U;e.taxConf.fetchPriceTaxesOfActe(null===(U=x.taxe)||void 0===U?void 0:U.id).subscribe(O=>{x.tax=O,c.push(x),g.next(x)})});return function(x){return C.apply(this,arguments)}}())}).pipe((0,Fi.q)(null===(d=null===(r=null==i?void 0:i.taxation)||void 0===r?void 0:r.items)||void 0===d?void 0:d.length),function(a,s){return arguments.length>=2?function(e){return(0,Ft.z)((0,kt.R)(a,s),(0,Qt.h)(1),(0,Hi.d)(s))(e)}:function(e){return(0,Ft.z)((0,kt.R)((n,o,l)=>a(n,o,l+1)),(0,Qt.h)(1))(e)}}(Bi,[])).subscribe(g=>{i.taxation.items=c,this.printService.generateNote(i,l,o.accounts)})}))})}}render(i){var e;this.container.clear(),this.container.remove();let n=null;switch(i){case"PENALITE":n=this.componentFactoryResolver.resolveComponentFactory(Wi.U),this.container.createComponent(n).instance.taxation=this.taxation;break;case"PAIEMENT":n=this.componentFactoryResolver.resolveComponentFactory(Gi.d),this.container.createComponent(n).instance.taxation=this.taxation;break;case"ELEMENT":n=this.componentFactoryResolver.resolveComponentFactory(zi.u),this.container.createComponent(n).instance.taxation=this.taxation;break;case"OBSERVATION":n=this.componentFactoryResolver.resolveComponentFactory($i.Q),this.container.createComponent(n);break;case"PAYER":n=this.componentFactoryResolver.resolveComponentFactory(Xi.A),this.container.createComponent(n).instance.accounts=null===(e=this.taxation)||void 0===e?void 0:e.accounts}}onBtnApureClicked(){var i;if(this.taxation){let e={disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Apurement de la note de perception N\xb0"+(null===(i=this.taxation)||void 0===i?void 0:i.refDoc),message:"Voulez-vous apurer cette note",action:"EDIT"}};this.dialogServ.openObs(e).obsDialog.afterClosed().subscribe(n=>{var o;let l=new N.cV;l.observation=n.text,1===n.result?(l.status=N.qM.VALIDED,this.ordServ.discharge(null===(o=this.taxation)||void 0===o?void 0:o.id,l).subscribe(r=>{let d=r.data;e={disableClose:!0,width:"",autoFocus:!0,panelClass:"custom-modalbox",position:{top:"100px"},data:{title:"Apurement effectu\xe9 avec succes ",message:`<h1>La R\xe9f du doc est ${d.refDoc}</h1><p>Pour imprimer cliquer sur confirmer</p>`,action:"PRINT"}},this.dialogServ.open(e).confirm().subscribe(c=>{console.log(c),!0===c.result&&(console.log("oofo"),this.printService.printQuittancee(r,d,this.taxation))})})):!1===n.result&&(l.status=N.qM.CANCELLED)})}}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(at.$),t.Y36(Lt.K),t.Y36(_t.H),t.Y36(D.u),t.Y36(w.L),t.Y36(_.WI),t.Y36(_.so),t.Y36(_.uw),t.Y36(ot.x),t.Y36(t._Vd),t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-note-detail"]],viewQuery:function(i,e){if(1&i&&t.Gf(on,5,t.s_b),2&i){let n;t.iGM(n=t.CRH())&&(e.container=n.first)}},decls:149,vars:71,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon",1,"close-btn",3,"click"],[1,"h-100"],["class","alert alert-danger ",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-3","border-right"],[1,"d-flex","flex-column","align-items-center"],[1,"mb-3","font-weight-bold"],[1,"warp-avatar"],[4,"ngIf"],[1,"fa","fa-key"],[1,"fa","fa-phone"],[1,"fa","fa-envelope"],[1,"col"],[1,"col-md-12","border-bottom"],[1,"fa","fa-clock"],[1,"col-md-12","border-bottom","font-weight-bold"],[1,"mb-3","mt-2"],[1,"col-md-12","font-weight-bold"],[1,"col-md-12"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"click"],["routerLinkActive","active","data-toggle","tab",1,"nav-link"],[2,"max-height","500px","overflow-y","auto"],["container",""],["class","btn btn-indigo btn-with-icon ","type","button",3,"click",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","button",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],["type","button",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"fa","fa-check"],[1,"fa","fa-list"],["type","button",1,"btn","btn-indigo","btn-with-icon"],[1,"fa","fa-refresh"],[1,"fa","fa-remove"],[1,"fa","fa-check-circle"],[1,"fa","fa-print"]],template:function(i,e){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"h1",0),t.TgZ(2,"mat-toolbar-row"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",1),t.NdJ("click",function(){return e.onClose()}),t._uU(6," close "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"mat-dialog-content",2),t.YNc(8,ln,6,2,"div",3),t.TgZ(9,"div",4),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t._uU(14,"Contribuable"),t.qZA(),t.TgZ(15,"div",9),t.YNc(16,sn,3,1,"ng-container",10),t.YNc(17,rn,2,0,"ng-container",10),t.qZA(),t.TgZ(18,"div"),t.YNc(19,un,2,2,"h4",10),t.YNc(20,cn,4,2,"h4",10),t.TgZ(21,"p"),t.TgZ(22,"strong"),t._UZ(23,"i",11),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"p"),t.TgZ(26,"strong"),t._UZ(27,"i",12),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"p"),t.TgZ(30,"strong"),t._UZ(31,"i",13),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",14),t.TgZ(34,"div",5),t.TgZ(35,"div",15),t.TgZ(36,"div",8),t._uU(37,"Calcul"),t.qZA(),t.TgZ(38,"div"),t._uU(39," Principal : "),t.TgZ(40,"strong"),t._uU(41),t.ALo(42,"number"),t.ALo(43,"number"),t.qZA(),t.qZA(),t.TgZ(44,"div"),t._uU(45," P\xe9nalit\xe9s : "),t.TgZ(46,"strong"),t._uU(47),t.ALo(48,"number"),t.ALo(49,"number"),t.qZA(),t.qZA(),t.TgZ(50,"div"),t._uU(51," Exonerations : "),t.TgZ(52,"strong"),t._uU(53),t.ALo(54,"number"),t.ALo(55,"number"),t.qZA(),t.qZA(),t.TgZ(56,"div"),t._uU(57," Total \xe0 payer : "),t.TgZ(58,"strong"),t._uU(59),t.ALo(60,"number"),t.ALo(61,"number"),t.qZA(),t.qZA(),t.TgZ(62,"div"),t._uU(63," Nbr. taxe : "),t.TgZ(64,"strong"),t._uU(65),t.qZA(),t.qZA(),t.TgZ(66,"div"),t._uU(67," Statut : "),t.TgZ(68,"strong"),t._uU(69),t.qZA(),t.qZA(),t.TgZ(70,"div"),t._uU(71," N\xb0 R\xe9f : "),t.TgZ(72,"strong"),t._uU(73),t.qZA(),t.qZA(),t.TgZ(74,"div"),t._uU(75," Taux du jour : "),t.TgZ(76,"strong"),t._uU(77),t.ALo(78,"number"),t.ALo(79,"number"),t.qZA(),t.qZA(),t.TgZ(80,"div"),t._uU(81," Date : "),t.TgZ(82,"strong"),t._UZ(83,"i",16),t._uU(84),t.ALo(85,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"div",17),t.TgZ(87,"div",18),t._uU(88,"Service de taxation"),t.qZA(),t.TgZ(89,"div"),t._uU(90," Bureau : "),t.TgZ(91,"strong"),t._uU(92),t.qZA(),t.qZA(),t.TgZ(93,"div"),t._uU(94," Centre : "),t.TgZ(95,"strong"),t._uU(96),t.qZA(),t.qZA(),t.TgZ(97,"div"),t._uU(98," Agent taxateur : "),t.TgZ(99,"strong"),t._uU(100),t.qZA(),t.qZA(),t.qZA(),t.TgZ(101,"div",19),t.TgZ(102,"div",18),t._uU(103,"Service d'ordonnancement"),t.qZA(),t.TgZ(104,"div"),t._uU(105," Bureau : "),t.TgZ(106,"strong"),t._uU(107),t.qZA(),t.qZA(),t.TgZ(108,"div"),t._uU(109," Centre : "),t.TgZ(110,"strong"),t._uU(111),t.qZA(),t.qZA(),t.TgZ(112,"div"),t._uU(113," Agent Ordonnateur : "),t.TgZ(114,"strong"),t._uU(115),t.qZA(),t.qZA(),t._UZ(116,"br"),t.qZA(),t.TgZ(117,"div",20),t.TgZ(118,"div",21),t.TgZ(119,"nav",22),t.TgZ(120,"a",23),t.NdJ("click",function(){return e.render("ELEMENT")}),t._uU(121,"Elements de taxations"),t.qZA(),t.TgZ(122,"a",23),t.NdJ("click",function(){return e.render("PENALITE")}),t._uU(123,"P\xe9nalit\xe9s"),t.qZA(),t.TgZ(124,"a",23),t.NdJ("click",function(){return e.render("PAIEMENT")}),t._uU(125,"Paiements"),t.qZA(),t.TgZ(126,"a",23),t.NdJ("click",function(){return e.render("PAYER")}),t._uU(127,"O\xf9 payer"),t.qZA(),t.TgZ(128,"a",23),t.NdJ("click",function(){return e.render("BUREAU")}),t._uU(129,"Observations"),t.qZA(),t.TgZ(130,"a",24),t._uU(131,"Bureaux"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"div",25),t.GkF(133,null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(135,"mat-dialog-actions"),t.YNc(136,dn,3,0,"button",27),t._uU(137,"\xa0 "),t.YNc(138,gn,3,0,"button",27),t._uU(139,"\xa0 "),t.YNc(140,hn,3,0,"button",28),t._uU(141,"\xa0 "),t.YNc(142,pn,3,0,"button",28),t._uU(143,"\xa0 "),t.YNc(144,mn,3,0,"button",28),t._uU(145,"\xa0 "),t.YNc(146,Zn,3,0,"button",27),t._uU(147,"\xa0 "),t.YNc(148,_n,3,0,"button",27),t.qZA(),t.qZA()),2&i&&(t.xp6(4),t.hij(" ",e.data.title," "),t.xp6(4),t.Q6J("ngIf",1==e.hasError),t.xp6(8),t.Q6J("ngIf",null!=(null==e.taxation?null:e.taxation.contribuable)&&null!=(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.photo)),t.xp6(1),t.Q6J("ngIf",null!=(null==e.taxation?null:e.taxation.contribuable)&&null==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.photo)),t.xp6(2),t.Q6J("ngIf","P"==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.typePersonne)),t.xp6(1),t.Q6J("ngIf","M"==(null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.typePersonne)),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.nuc,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.phone,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.contribuable?null:e.taxation.contribuable.email,""),t.xp6(9),t.AsE(" ",t.xi3(42,39,null==e.taxation?null:e.taxation.amount,".2-2"),"$ | ",t.xi3(43,42,null==e.taxation?null:e.taxation.amountCdf,".2-2")," CDF"),t.xp6(6),t.AsE(" ",t.xi3(48,45,null==e.taxation?null:e.taxation.penalities,".2-2"),"$ | ",t.xi3(49,48,e.taxation.penalities*e.taxation.AppliedTaux,".2-2")," CDF"),t.xp6(6),t.AsE(" ",t.xi3(54,51,null==e.taxation?null:e.taxation.exenorations,".2-2"),"$ | ",t.xi3(55,54,e.taxation.exenorations*e.taxation.AppliedTaux,".2-2")," CDF"),t.xp6(6),t.AsE(" ",t.xi3(60,57,null==e.taxation?null:e.taxation.amount,".2-2"),"$ | ",t.xi3(61,60,null==e.taxation?null:e.taxation.amountCdf,".2-2")," CDF"),t.xp6(6),t.hij(" ",null==e.taxation||null==e.taxation.taxation||null==e.taxation.taxation.items?null:e.taxation.taxation.items.length,""),t.xp6(4),t.hij(" ",null==e.taxation?null:e.taxation.statut,""),t.xp6(4),t.hij(" ",null==e.taxation?null:e.taxation.refDoc,""),t.xp6(4),t.AsE("",t.xi3(78,63,1,".2-2")," $ = ",t.xi3(79,66,null==e.taxation?null:e.taxation.AppliedTaux,".2-2")," CDF "),t.xp6(7),t.hij(" ",t.lcZ(85,69,null==e.taxation?null:e.taxation.createdAt),""),t.xp6(8),t.hij(" ",null==e.taxation||null==e.taxation.liquidation||null==e.taxation.liquidation.bureau?null:e.taxation.liquidation.bureau.nom,""),t.xp6(4),t.AsE(" ",null==e.taxation||null==e.taxation.liquidation||null==e.taxation.liquidation.centre?null:e.taxation.liquidation.centre.nom," (",null==e.taxation||null==e.taxation.liquidation||null==e.taxation.liquidation.centre?null:e.taxation.liquidation.centre.nature,") "),t.xp6(4),t.AsE(" ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.nom," ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.prenom," "),t.xp6(7),t.hij(" ",null==e.taxation||null==e.taxation.bureau?null:e.taxation.bureau.nom,""),t.xp6(4),t.hij(" ",null==e.taxation||null==e.taxation.centre?null:e.taxation.centre.nom," "),t.xp6(4),t.AsE(" ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.nom," ",null==e.taxation||null==e.taxation.agent?null:e.taxation.agent.prenom," "),t.xp6(21),t.Q6J("ngIf","PROCESSING"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf",("VALIDED"==(null==e.taxation?null:e.taxation.statut)||"VERIFIED"==(null==e.taxation?null:e.taxation.statut))&&e.couldScheduled),t.xp6(2),t.Q6J("ngIf","PROCESSING"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf","INIT"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf","INIT"==(null==e.taxation?null:e.taxation.statut)),t.xp6(2),t.Q6J("ngIf","PAID"==(null==e.taxation?null:e.taxation.statut)&&e.couldApure),t.xp6(2),t.Q6J("ngIf",e.showPrint))},directives:[_.uh,j.rD,B.Hw,_.xY,Z.O5,I.Od,_.H8],pipes:[Z.JJ,Z.uU],styles:[""]}),a})();const vn=["seachInput"];function Tn(a,s){if(1&a&&(t.TgZ(0,"div",2),t.TgZ(1,"div",15),t.TgZ(2,"div",30),t.TgZ(3,"form",31),t.TgZ(4,"div",32),t.TgZ(5,"div",33),t._UZ(6,"input",34,35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(6),t.Q6J("formControl",i.formSearch)}}function xn(a,s){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.AsE("",i.contribuable," - ",i.prenom,"")}}function An(a,s){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.raisonSociale)}}function bn(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"tr",40),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit;return t.oxw(2).view(n)}),t.TgZ(1,"td",41),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"img",42),t._UZ(7,"br"),t.YNc(8,xn,2,2,"div",43),t.YNc(9,An,2,1,"div",43),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"number"),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t.TgZ(28,"div",44),t.TgZ(29,"a",45),t._UZ(30,"i",46),t.qZA(),t._uU(31,"\xa0 "),t.TgZ(32,"a",47),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit;return t.oxw(2).edit(n)}),t._UZ(33,"i",48),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const i=t.oxw(),e=i.index,n=i.$implicit,o=t.oxw(2);t.xp6(2),t.hij(" ",e+1+o.currentPage*o.pp,""),t.xp6(2),t.Oqu(n.refDoc),t.xp6(2),t.Q6J("src",o.imgPath+n.profile+"."+n.profileExt,t.LSH),t.xp6(2),t.Q6J("ngIf","M"!=n.type),t.xp6(1),t.Q6J("ngIf","M"==n.type),t.xp6(2),t.Oqu(n.nuc),t.xp6(2),t.Oqu(n.type),t.xp6(2),t.Oqu(n.acte),t.xp6(2),t.AsE("",t.xi3(18,13,n.amount,".2-2"),"$ | ",t.xi3(19,16,n.amountCdf,".2-2"),"FC"),t.xp6(4),t.Oqu(n.agent),t.xp6(2),t.Oqu(t.lcZ(24,19,n.createdAt)),t.xp6(3),t.Oqu(n.statut)}}function qn(a,s){if(1&a&&(t.ynx(0),t.YNc(1,bn,34,21,"tr",39),t.BQk()),2&a){const i=s.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.id!=(null==e.connectedUser?null:e.connectedUser.id))}}function Cn(a,s){if(1&a&&(t.TgZ(0,"div",36),t.TgZ(1,"table",37),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Ref Dossier"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Contribuable"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Nuc"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Type "),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Acte(P)"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Montant"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Agent"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Statut"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"\xa0"),t.qZA(),t.qZA(),t._UZ(26,"tr"),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,qn,2,1,"ng-container",38),t.qZA(),t.qZA(),t.qZA()),2&a){const i=t.oxw();t.xp6(28),t.Q6J("ngForOf",null==i.itemsPager?null:i.itemsPager.content)}}function Un(a,s){1&a&&(t.TgZ(0,"div",49),t.TgZ(1,"strong"),t._uU(2,"Aucune donn\xe9e n'est trouv\xe9e"),t.qZA(),t.qZA())}const En={parse:{dateInput:"D/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM Y",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM Y"}},In=[{path:"",component:Ht,data:{breadcrumb:"Contribuable"},children:[{path:"declaration",component:Zt,data:{breadcrumb:"D\xe9claration"},children:[{path:"all",component:yt},{path:"taxation",component:Ji,canActivate:[Rt.x],data:{roles:["liquidation"]}}]},{path:"scheduling",component:Mt,data:{roles:["ordonnancement","apurement"]},children:[{path:"organized",component:(()=>{class a{constructor(i,e,n,o,l){this.rolesChecker=i,this.dialogManager=e,this.scheduleServ=n,this.auth=o,this.parent=l,this.p=0,this.pp=T.N.defautlPageSize,this.itemLength=0,this.currentPage=0,this.imgPath="",this.pattern="",this.subs=[],this.isSeachForm=!1}ngOnInit(){var i,e;this.imgPath=T.N.imgPath,this.form=new u.cw({dateStart:new u.NI(new Date),dateEnd:new u.NI(new Date)}),this.dateStart=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.dateEnd=b(this.form.value.dateStart).format("YYYY-MM-DD"),this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.READ])&&this.subs.push(this.scheduleServ.getOperationsOfOfficeIns(null===(e=null===(i=this.auth.getSession().user)||void 0===i?void 0:i.bureau)||void 0===e?void 0:e.id,this.dateStart,this.dateEnd,0,T.N.defautlPageSize).subscribe(n=>{var o;this.itemsPager=n.pager,this.itemLength=null===(o=n.pager)||void 0===o?void 0:o.totalElements})),this.formSearch=new u.NI,this.formSearch.valueChanges.pipe((0,et.O)(""),(0,it.w)(n=>{var o,l;return n.length>3&&this.scheduleServ.searchBureauPaging(null===(l=null===(o=this.auth.getSession().user)||void 0===o?void 0:o.bureau)||void 0===l?void 0:l.id,n,0,T.N.defautlPageSize).subscribe(r=>{var d;return this.itemsPager=r.pager,this.itemLength=null===(d=r.pager)||void 0===d?void 0:d.totalElements,(0,Y.of)(this.itemsPager)}),(0,Y.of)([])})).subscribe(n=>{})}openNewDeclarationForm(){this.dialogConfig=new _.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Nouvelle d\xe9claration ",message:"",action:"NEW",data:null},this.dialogManager.open(mt,this.dialogConfig)}edit(i){}view(i){this.rolesChecker.hasPermission(this.auth.getSession().user,"declaration",[m.e.ALL,m.e.READ])&&this.scheduleServ.getTaxation(i.id).subscribe(e=>{this.dialogConfig=new _.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="cbg",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"Ordonnancement d\xe9tail :"+i.refDoc,title:"Ordonnancement d\xe9tail :"+i.refDoc,message:"",action:"VIEW",data:e},this.dialogManager.open(fn,this.dialogConfig).afterClosed().subscribe(n=>{n.status&&"success"==n.status&&n.operation&&"ordonnancement"==n.operation&&this.viewLiquidation(n.data)})})}viewLiquidation(i){}dateRangeChange(i,e){var n,o,l,r;if(null===(o=null===(n=this.auth.getSession().user)||void 0===n?void 0:n.bureau)||void 0===o?void 0:o.id)if(i.value.length>0&&e.value.length>0){let d=i.value.split("/")[2]+"-"+i.value.split("/")[0]+"-"+i.value.split("/")[1],c=e.value.split("/")[2]+"-"+e.value.split("/")[0]+"-"+e.value.split("/")[1];this.dateStart=d,this.dateEnd=c,this.subs.push(this.scheduleServ.getOperationsOfOfficeIns(null===(r=null===(l=this.auth.getSession().user)||void 0===l?void 0:l.bureau)||void 0===r?void 0:r.id,d,c,0,T.N.defautlPageSize).subscribe(g=>{var p;this.container=g,this.itemLength=null===(p=null==g?void 0:g.pager)||void 0===p?void 0:p.totalElements,this.itemsPager=void 0,this.itemsPager=g.pager,this.parent.stat=g.sum}))}else console.log("desordre")}onPageChanged(i){var e,n,o,l,r,d;if(this.currentPage=i.pageIndex,null===(n=null===(e=this.auth.getSession().user)||void 0===e?void 0:e.bureau)||void 0===n?void 0:n.id){if(this.formSearch.value&&this.formSearch.value.length>0)return void(this.formSearch.value.length>3&&this.scheduleServ.searchBureauPaging(null===(l=null===(o=this.auth.getSession().user)||void 0===o?void 0:o.bureau)||void 0===l?void 0:l.id,this.formSearch.value,i.pageIndex,T.N.defautlPageSize).subscribe(c=>{var g;this.itemsPager=c.pager,this.itemLength=null===(g=c.pager)||void 0===g?void 0:g.totalElements}));this.subs.push(this.scheduleServ.getOperationsOfOfficeIns(null===(d=null===(r=this.auth.getSession().user)||void 0===r?void 0:r.bureau)||void 0===d?void 0:d.id,this.dateStart,this.dateEnd,i.pageIndex,T.N.defautlPageSize).subscribe(c=>{var g,p,f;this.container=c,this.itemLength=null===(g=null==c?void 0:c.pager)||void 0===g?void 0:g.totalElements,this.itemsPager=void 0,this.itemsPager=c.pager,this.subs.push(this.scheduleServ.getOperationsOfOfficeIns(null===(f=null===(p=this.auth.getSession().user)||void 0===p?void 0:p.bureau)||void 0===f?void 0:f.id,this.dateStart,this.dateEnd).subscribe(C=>{this.parent.stat=C.sum}))}))}}clickSearchForm(){this.isSeachForm?this.isSeachForm=!1:(this.isSeachForm=!0,null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus())}ngAfterViewInit(){null!=this.searchElementRef&&this.searchElementRef.nativeElement.focus()}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(w.L),t.Y36(_.uw),t.Y36(_t.H),t.Y36(D.u),t.Y36(Mt))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ordonnancement"]],viewQuery:function(i,e){if(1&i&&t.Gf(vn,7),2&i){let n;t.iGM(n=t.CRH())&&(e.searchElementRef=n.first)}},inputs:{itemsPager:"itemsPager"},decls:55,vars:9,consts:[[1,"az-content-label","mg-b-5","config-title"],[3,"formGroup"],[1,"row"],[1,"col-3"],[3,"rangePicker"],["matStartDate","","matInput","","placeholder","Start date","formControlName","dateStart"],["dateRangeStart",""],["matEndDate","","matInput","","placeholder","End date","formControlName","dateEnd",3,"dateChange"],["dateRangeEnd",""],["matSuffix","",3,"for"],["picker",""],[1,"col-2"],["value","option1"],["value","option2"],["value","option3"],[1,"col"],[1,"",2,"margin-top","20px","margin-left","-10","display","inline-block",3,"click"],[1,"fa","fa-search"],["class","row",4,"ngIf"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-indigo","btn-sm","btn-icon",3,"click"],[1,"typcn","typcn-plus-outline"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-y-30"],["class","table-responsive",4,"ngIf"],[1,"col-md-6"],["aria-label","Select page",3,"length","pageSize","hidePageSize","page"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"nav-search","clearfix"],["role","search",1,"navtop","navbar-form","home-search"],[1,"search-group"],["id","nav-search-input",1,"input-group","clearfix"],["type","text","placeholder","Search",1,"form-control","dropdown-toggle",3,"formControl"],["seachInput",""],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["scope","row"],["onError","this.src='../assets/img/avatar.jpg'",1,"rounded-circle",2,"width","40px","height","40px",3,"src"],[4,"ngIf"],[1,"btn-group"],["type","button",1,""],[1,"fa","fa-trash"],["type","button",1,"",3,"click"],[1,"fa","fa-edit"],["role","alert",1,"alert","alert-info"]],template:function(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"form",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7,"Filtrer par date"),t.qZA(),t.TgZ(8,"mat-date-range-input",4),t._UZ(9,"input",5,6),t.TgZ(11,"input",7,8),t.NdJ("dateChange",function(){t.CHM(n);const l=t.MAs(10),r=t.MAs(12);return e.dateRangeChange(l,r)}),t.qZA(),t.qZA(),t._UZ(13,"mat-datepicker-toggle",9),t._UZ(14,"mat-date-range-picker",null,10),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"mat-form-field"),t.TgZ(18,"mat-label"),t._uU(19,"Statut"),t.qZA(),t.TgZ(20,"mat-select"),t.TgZ(21,"mat-option"),t._uU(22,"None"),t.qZA(),t.TgZ(23,"mat-option",12),t._uU(24,"Tous"),t.qZA(),t.TgZ(25,"mat-option",13),t._uU(26,"Non pay\xe9"),t.qZA(),t.TgZ(27,"mat-option",14),t._uU(28,"Pay\xe9"),t.qZA(),t.TgZ(29,"mat-option",14),t._uU(30,"Pay\xe9 partiellement"),t.qZA(),t.TgZ(31,"mat-option",14),t._uU(32,"En souffrance"),t.qZA(),t.TgZ(33,"mat-option",14),t._uU(34,"Apur\xe9e"),t.qZA(),t.TgZ(35,"mat-option",14),t._uU(36,"Annul\xe9e"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",15),t.TgZ(38,"a",16),t.NdJ("click",function(){return e.clickSearchForm()}),t._UZ(39,"i",17),t.qZA(),t.qZA(),t.qZA(),t.YNc(40,Tn,8,1,"div",18),t.qZA(),t.TgZ(41,"div",19),t.TgZ(42,"div",20),t.TgZ(43,"button",21),t.NdJ("click",function(){return e.openNewDeclarationForm()}),t._UZ(44,"i",22),t.qZA(),t.TgZ(45,"button",23),t._UZ(46,"i",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(47,"hr",25),t.YNc(48,Cn,29,1,"div",26),t.TgZ(49,"div",2),t.TgZ(50,"div",27),t._uU(51," \xa0 "),t.qZA(),t.TgZ(52,"div",27),t.TgZ(53,"mat-paginator",28),t.NdJ("page",function(l){return e.onPageChanged(l)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(54,Un,3,0,"div",29),t.qZA()}if(2&i){const n=t.MAs(15);t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("rangePicker",n),t.xp6(5),t.Q6J("for",n),t.xp6(27),t.Q6J("ngIf",e.isSeachForm),t.xp6(8),t.Q6J("ngIf",0==(null==e.itemsPager?null:e.itemsPager.empty)),t.xp6(5),t.Q6J("length",e.itemLength)("pageSize",e.pp)("hidePageSize",!0),t.xp6(1),t.Q6J("ngIf",1==(null==e.itemsPager?null:e.itemsPager.empty))}},directives:[u._Y,u.JL,u.sg,S.KE,S.hX,q.wx,q.zY,V.Nt,u.Fj,u.JJ,u.u,q.By,q.nW,S.R9,q._g,$.gD,H.ey,Z.O5,ut.NW,u.F,u.oH,Z.sg],pipes:[Z.JJ,Z.uU],styles:[""]}),a})(),data:{roles:["ordonnancement","apurement"]}}]}]}];let Dn=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:H.sG,useValue:En},Rt.x],imports:[[Z.ez,I.Bz.forChild(In),Zi.N,V.c,_i.JX,z.Bb,lt.T5,$.LD,$.LD,S.lN,ut.TU,Jt.rP,pt.A0,q.FA,Jt.rP,G.Hi]]}),a})()}}]);