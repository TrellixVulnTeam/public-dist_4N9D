"use strict";(self.webpackChunkdtax=self.webpackChunkdtax||[]).push([[553],{3911:(S,c,i)=>{i.r(c),i.d(c,{ProfileModule:()=>Q});var g=i(8583),Z=i(2238),m=i(5783),e=i(7716),o=i(264),p=i(3071),v=i(9630);function T(s,r){if(1&s&&(e.ynx(0),e._uU(1),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.lnq(" C/ ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune?null:n.user.adresse.commune.nom,", Ville de ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune||null==n.user.adresse.commune.ville?null:n.user.adresse.commune.ville.nom,", Province de : ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune||null==n.user.adresse.commune.ville||null==n.user.adresse.commune.ville.province?null:n.user.adresse.commune.ville.province.libelle," ")}}function q(s,r){if(1&s&&(e.ynx(0),e._uU(1),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.HOy(" C/ ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune?null:n.user.adresse.commune.nom,", Secteur de ",null==n.user||null==n.user.adresse||null==n.user.adresse.secteur?null:n.user.adresse.secteur.nom,", Ter de ",null==n.user||null==n.user.adresse||null==n.user.adresse.secteur||null==n.user.adresse.secteur.territire?null:n.user.adresse.secteur.territire.nom," , Province de : ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune||null==n.user.adresse.commune.ville||null==n.user.adresse.commune.ville.province?null:n.user.adresse.commune.ville.province.libelle," ")}}function b(s,r){if(1&s&&(e.ynx(0),e._uU(1),e.BQk()),2&s){const n=e.oxw();e.xp6(1),e.HOy(" C/ ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune?null:n.user.adresse.commune.nom,", Chef de ",null==n.user||null==n.user.adresse||null==n.user.adresse.chefferie?null:n.user.adresse.chefferie.nom,", Ter de ",null==n.user||null==n.user.adresse||null==n.user.adresse.chefferie?null:n.user.adresse.chefferie.territoire," , Province de : ",null==n.user||null==n.user.adresse||null==n.user.adresse.commune||null==n.user.adresse.commune.ville||null==n.user.adresse.commune.ville.province?null:n.user.adresse.commune.ville.province.libelle," ")}}function U(s,r){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const n=r.$implicit;e.xp6(1),e.hij(" ",n.libelle,"\xa0")}}let f=(()=>{class s{constructor(n,l,u,a,t){this.route=n,this.router=l,this.userServ=u,this.agentMan=a,this.detail=t,this.user=new m.n}ngAfterViewInit(){var n;this.user=null===(n=this.detail)||void 0===n?void 0:n.user}ngOnInit(){this.route.params.subscribe(n=>{this.route.queryParams.subscribe(l=>{l.type&&"AGENT"==l.type?this.agentMan.getAgent(n.id).subscribe(u=>{this.user=u}):this.userServ.getUser(n.id).subscribe(u=>{this.user=u})})})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(o.gz),e.Y36(o.F0),e.Y36(p.K),e.Y36(v.t),e.Y36(h))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-profile"]],inputs:{user:"user"},decls:84,vars:17,consts:[["_ngcontent-dlf-c18","",1,"typcn","typcn-group-outline"],[1,"mg-y-10"],[1,"row","pt-2","pb-2"],[1,"col-md-4"],[1,"col-md-8","font-weight-bold"],[1,"mg-y-20"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(n,l){1&n&&(e.TgZ(0,"h5"),e._UZ(1,"i",0),e._uU(2," Identit\xe9"),e.qZA(),e._UZ(3,"hr",1),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e._uU(6,"Nom :"),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"div",3),e._uU(11,"Pr\xe9nom :"),e.qZA(),e.TgZ(12,"div",4),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"div",2),e.TgZ(15,"div",3),e._uU(16,"Post :"),e.qZA(),e.TgZ(17,"div",4),e._uU(18),e.qZA(),e.qZA(),e._UZ(19,"hr",5),e.TgZ(20,"h5"),e._UZ(21,"i",0),e._uU(22," Contact"),e.qZA(),e.TgZ(23,"div",2),e.TgZ(24,"div",3),e._uU(25,"Tel :"),e.qZA(),e.TgZ(26,"div",4),e._uU(27),e.qZA(),e.qZA(),e.TgZ(28,"div",2),e.TgZ(29,"div",3),e._uU(30,"Adresse :"),e.qZA(),e.TgZ(31,"div",4),e.TgZ(32,"address"),e._uU(33),e.YNc(34,T,2,3,"ng-container",6),e.YNc(35,q,2,4,"ng-container",6),e.YNc(36,b,2,4,"ng-container",6),e.qZA(),e.qZA(),e.qZA(),e._UZ(37,"hr",5),e.TgZ(38,"h5"),e._UZ(39,"i",0),e._uU(40," Compte"),e.qZA(),e.TgZ(41,"div",2),e.TgZ(42,"div",3),e._uU(43,"Type :"),e.qZA(),e.TgZ(44,"div",4),e._uU(45),e.qZA(),e.qZA(),e.TgZ(46,"div",2),e.TgZ(47,"div",3),e._uU(48,"Plateforme :"),e.qZA(),e.TgZ(49,"div",4),e._uU(50),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"div",3),e._uU(53,"Role :"),e.qZA(),e.TgZ(54,"div",4),e.YNc(55,U,2,1,"span",7),e.qZA(),e.qZA(),e.TgZ(56,"div",2),e.TgZ(57,"div",3),e._uU(58,"Username :"),e.qZA(),e.TgZ(59,"div",4),e._uU(60),e.qZA(),e.qZA(),e.TgZ(61,"div",2),e.TgZ(62,"div",3),e._uU(63,"Email :"),e.qZA(),e.TgZ(64,"div",4),e._uU(65),e.qZA(),e.qZA(),e._UZ(66,"hr",5),e.TgZ(67,"h5"),e._UZ(68,"i",0),e._uU(69," Services"),e.qZA(),e.TgZ(70,"div",2),e.TgZ(71,"div",3),e._uU(72,"R\xe9gie :"),e.qZA(),e.TgZ(73,"div",4),e._uU(74),e.qZA(),e.qZA(),e.TgZ(75,"div",2),e.TgZ(76,"div",3),e._uU(77,"Centre :"),e.qZA(),e.TgZ(78,"div",4),e._uU(79),e.qZA(),e.qZA(),e.TgZ(80,"div",2),e.TgZ(81,"div",3),e._uU(82,"Taxes :"),e.qZA(),e._UZ(83,"div",4),e.qZA()),2&n&&(e.xp6(8),e.Oqu(null==l.user?null:l.user.nom),e.xp6(5),e.Oqu(null==l.user?null:l.user.prenom),e.xp6(5),e.Oqu(null==l.user?null:l.user.postnom),e.xp6(9),e.Oqu(null==l.user?null:l.user.phone),e.xp6(6),e.lnq(" ",null==l.user||null==l.user.adresse?null:l.user.adresse.num,", Av. ",null==l.user||null==l.user.adresse?null:l.user.adresse.avenue," Q/ ",null==l.user||null==l.user.adresse?null:l.user.adresse.num," "),e.xp6(1),e.Q6J("ngIf",null==l.user||null==l.user.adresse?null:l.user.adresse.commune),e.xp6(1),e.Q6J("ngIf",null==l.user||null==l.user.adresse?null:l.user.adresse.secteur),e.xp6(1),e.Q6J("ngIf",null==l.user||null==l.user.adresse?null:l.user.adresse.chefferie),e.xp6(9),e.Oqu(null==l.user?null:l.user.type),e.xp6(5),e.Oqu(null==l.user?null:l.user.accessPlatform),e.xp6(5),e.Q6J("ngForOf",null==l.user?null:l.user.roles),e.xp6(5),e.Oqu(null==l.user?null:l.user.username),e.xp6(5),e.Oqu(null==l.user?null:l.user.email),e.xp6(9),e.Oqu(null==l.user||null==l.user.regie?null:l.user.regie.denomination),e.xp6(5),e.Oqu(null==l.user||null==l.user.centre?null:l.user.centre.nom))},directives:[g.O5,g.sg],styles:[""]}),s})();var _=i(1602);const C=function(s,r){return{"text-primary":s,"text-danger":r}},y=function(s){return["/profile",s]},P=function(s){return["/profile/:id/logs",s]},O=function(s){return["/profile/:id/taxations",s]},w=function(){return["/settings/regional"]};let h=(()=>{class s{constructor(n,l,u,a,t){this.route=n,this.router=l,this.userServ=u,this.agentMan=a,this.dialogService=t,this.user=new m.n,this.currentPath="",this.currentType=""}ngAfterViewInit(){this.route.url.subscribe(()=>{var n;this.currentPath=null===(n=this.route.snapshot.firstChild)||void 0===n?void 0:n.params.id,this.route.queryParams.subscribe(l=>{var u,a;this.currentType=l.type,l.type&&"AGENT"==l.type?this.agentMan.getAgent(null===(u=this.route.snapshot.firstChild)||void 0===u?void 0:u.params.id).subscribe(t=>{var d;(null===(d=this.profile)||void 0===d?void 0:d.user)&&(this.profile.user=t),this.user=t}):this.userServ.getUser(null===(a=this.route.snapshot.firstChild)||void 0===a?void 0:a.params.id).subscribe(t=>{var d;this.user=t,(null===(d=this.profile)||void 0===d?void 0:d.user)&&(this.profile.user=t)})})})}ngOnInit(){}refresh(n){this.dialogConfig=new Z.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"20px"},this.dialogConfig.data={form:"ACTE",title:"Confirmation",message:"Voulez vous r\xe9initialiser ce compte? <br/>L'utilisateur ne pourra se connecter jusqu'\xe0 ce qu'il d\xe9finisse le nouveau mot de passe",action:"VIEW"},this.dialogService.open(this.dialogConfig).confirm().subscribe(l=>{l.resulte&&this.userServ.refresh(n.id).subscribe(u=>{window.location.reload()})})}disableOrEnable(n){this.dialogConfig=new Z.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.data={form:"ACTE",title:"Confirmation",message:"Voulez vous changer le statut de cet utilisateur?",action:"VIEW"},this.dialogService.open(this.dialogConfig).confirm().subscribe(l=>{l.resulte&&(n.isAllowed?this.userServ.disableUser(n.id).subscribe(u=>{window.location.reload()}):this.userServ.enableUser(n.id).subscribe(u=>{window.location.reload()}))})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(o.gz),e.Y36(o.F0),e.Y36(p.K),e.Y36(v.t),e.Y36(_.x))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-detail"]],viewQuery:function(n,l){if(1&n&&e.Gf(f,5),2&n){let u;e.iGM(u=e.CRH())&&(l.profile=u.first)}},decls:42,vars:18,consts:[[1,"row"],[1,"col-md-3","p-4","position-fixe","az-content-left-components"],[1,"component-item"],[1,"wrap-img-profile"],["src","http://localhost:8080/dtax/img/avatar.jpg",1,"avatar"],[1,"text-center"],[1,"flex-column","justify-content-center","d-flex"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-icon"],[1,"fa","fa-edit"],["type","button",1,"btn","btn-sm","btn-icon",3,"click"],[1,"fa","fa-refresh"],[1,"fa","fa-envelope"],["type","button",1,"btn","btn-sm","btn-icon",3,"ngClass","click"],[1,"fa","fa-power-off"],[1,"col-md-9","offset-"],[1,"az-content-breadcrumb"],[1,"content"],[1,"az-dashboard-nav"],[1,"nav"],["routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"routerLink"],[1,"ht-40"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div"),e.TgZ(6,"h3",5),e._uU(7),e.qZA(),e.TgZ(8,"p",5),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e._UZ(13,"i",9),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return l.refresh(l.user)}),e._UZ(15,"i",11),e.qZA(),e.TgZ(16,"button",8),e._UZ(17,"i",12),e.qZA(),e.TgZ(18,"button",13),e.NdJ("click",function(){return l.disableOrEnable(l.user)}),e._UZ(19,"i",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",15),e.TgZ(21,"div",16),e.TgZ(22,"span"),e._uU(23,"Gestion des utilisateurs"),e.qZA(),e.TgZ(24,"span"),e._uU(25,"12"),e.qZA(),e.TgZ(26,"span"),e._uU(27,"D\xe9tail"),e.qZA(),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"div",18),e.TgZ(30,"nav",19),e.TgZ(31,"a",20),e._uU(32,"Info Generale "),e.qZA(),e.TgZ(33,"a",20),e._uU(34,"Activit\xe9s"),e.qZA(),e.TgZ(35,"a",20),e._uU(36,"Taxations"),e.qZA(),e.TgZ(37,"a",20),e._uU(38,"R\xe9gionale"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div"),e._UZ(40,"router-outlet"),e.qZA(),e.qZA(),e._UZ(41,"div",21),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.AsE("",l.user.nom," ",l.user.prenom,""),e.xp6(2),e.Oqu(l.user.username),e.xp6(9),e.Q6J("ngClass",e.WLB(8,C,1==l.user.isAllowed,0==l.user.isAllowed)),e.xp6(13),e.Q6J("routerLink",e.VKq(11,y,l.currentPath)),e.xp6(2),e.Q6J("routerLink",e.VKq(13,P,l.currentPath)),e.xp6(2),e.Q6J("routerLink",e.VKq(15,O,l.currentPath)),e.xp6(2),e.Q6J("routerLink",e.DdM(17,w)))},directives:[g.mk,o.yS,o.Od,o.lC],styles:[""]}),s})();var A=i(907);const E=[{path:"",component:h,data:{breadcrumb:"Utilisateurs"},children:[{path:":id",component:f,data:{breadcrumb:"D\xe9tail"}},{path:":id/logs",component:A.x,data:{breadcrumb:"D\xe9tail"}},{path:":id/taxations",component:A.x,data:{breadcrumb:"D\xe9tail"}}]}];let Q=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[g.ez,o.Bz.forChild(E)]]}),s})()}}]);