"use strict";(self.webpackChunkdtax=self.webpackChunkdtax||[]).push([[199],{5972:(J,f,d)=>{d.d(f,{w:()=>I});var u=d(7655);class I{constructor(){this.num="",this.quartier="",this.avenue="",this.idcom=0,this.lat=0,this.lon=0,this.apl=0,this.province=new u.a}}},5647:(J,f,d)=>{d.d(f,{P:()=>u});var u=(()=>{return(e=u||(u={})).WEB_ONLY="WEB_ONLY",e.MOBILE_ONLY="MOBILE_ONLY",e.API="API",e.ALL="ALL",u;var e})()},473:(J,f,d)=>{d.d(f,{e:()=>u});var u=(()=>{return(e=u||(u={})).READ="READ",e.WRITE="WRITE",e.EDIT="EDIT",e.PRINT="PRINT",e.DELETE="DELETE",e.ALL="ALL",u;var e})()},877:(J,f,d)=>{d.d(f,{a:()=>u});var u=(()=>{return(e=u||(u={}))[e.COMUNE=0]="COMUNE",e[e.SECTEUR=1]="SECTEUR",e[e.TERRITOIRE=2]="TERRITOIRE",e[e.CHEFFERIE=3]="CHEFFERIE",e[e.PROVINCE=4]="PROVINCE",u;var e})()},7655:(J,f,d)=>{d.d(f,{a:()=>u});class u{constructor(I,F,q,M,c){this.id=I,this.libelle=F,this.pays=q,this.createdBy=M,this.createdAt=c}}},4199:(J,f,d)=>{d.r(f),d.d(f,{UserModule:()=>_o});var u=d(264),e=d(7716);const I=function(){return["/users/home"]},F=function(){return["/users/roles"]},q=function(){return["/users/logs"]},M=function(){return["/detail"]},c=function(){return["/users/activities"]};let Q=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user"]],decls:36,vars:10,consts:[[1,"row"],[1,"col-md-3","p-4","position-fixe","az-content-left-components"],[1,"component-item"],[1,"nav","flex-column"],["href","elem-buttons.html",1,"nav-link"],["href","elem-dropdown.html",1,"nav-link"],["href","elem-icons.html",1,"nav-link"],[1,"col-md-9","offset-"],[1,"az-content-breadcrumb"],[1,"content"],[1,"az-dashboard-nav"],[1,"nav"],["data-toggle","tab",1,"nav-link","active",3,"routerLink"],["data-toggle","tab",1,"nav-link",3,"routerLink"],[1,"ht-40"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label"),e._uU(4,"Content "),e.qZA(),e.TgZ(5,"nav",3),e.TgZ(6,"a",4),e._uU(7,"Utilisateurs"),e.qZA(),e.TgZ(8,"a",5),e._uU(9,"Roles"),e.qZA(),e.TgZ(10,"a",6),e._uU(11,"Privileges"),e.qZA(),e.TgZ(12,"a",6),e._uU(13,"Banque"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e.TgZ(16,"span"),e._uU(17,"Gestion des utilisateurs"),e.qZA(),e.TgZ(18,"span"),e._uU(19,"Home"),e.qZA(),e.qZA(),e.TgZ(20,"div",9),e.TgZ(21,"div",10),e.TgZ(22,"nav",11),e.TgZ(23,"a",12),e._uU(24,"Utilisateurs"),e.qZA(),e.TgZ(25,"a",13),e._uU(26,"Roles"),e.qZA(),e.TgZ(27,"a",13),e._uU(28,"Activit\xe9"),e.qZA(),e.TgZ(29,"a",13),e._uU(30,"D\xe9tail"),e.qZA(),e.TgZ(31,"a",13),e._uU(32,"Activit\xe9"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div"),e._UZ(34,"router-outlet"),e.qZA(),e.qZA(),e._UZ(35,"div",14),e.qZA(),e.qZA()),2&t&&(e.xp6(23),e.Q6J("routerLink",e.DdM(5,I)),e.xp6(2),e.Q6J("routerLink",e.DdM(6,F)),e.xp6(2),e.Q6J("routerLink",e.DdM(7,q)),e.xp6(2),e.Q6J("routerLink",e.DdM(8,M)),e.xp6(2),e.Q6J("routerLink",e.DdM(9,c)))},directives:[u.yS,u.lC],styles:[""]}),i})();var m=d(2238),a=d(3679);class Te{}var D=d(1704),T=d(473);class Ae{}var k=d(3071),R=d(2522),P=d(6627),A=d(8583),_=d(8295),O=d(9983),qe=d(2179);function Ce(i,s){if(1&i&&(e.TgZ(0,"div",17),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",18),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.error?null:t.error.error),e.xp6(3),e.hij(" ",null==t.error?null:t.error.description," ")}}function Ue(i,s){1&i&&(e.ynx(0),e._UZ(1,"i",30),e.BQk())}function be(i,s){1&i&&(e.ynx(0),e._uU(1," \xa0\xa0\xa0 "),e.BQk())}const Ee=function(i,s){return{s_module:i,"parent-module":s}};function xe(i,s){if(1&i&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e.YNc(2,Ue,2,0,"ng-container",14),e.YNc(3,be,2,0,"ng-container",14),e._uU(4),e.qZA(),e.TgZ(5,"div",22),e.TgZ(6,"div",12),e.TgZ(7,"div",23),e._UZ(8,"mat-checkbox",24),e.qZA(),e.TgZ(9,"div",23),e._UZ(10,"mat-checkbox",25),e.qZA(),e.TgZ(11,"div",23),e._UZ(12,"mat-checkbox",26),e.qZA(),e.TgZ(13,"div",23),e._UZ(14,"mat-checkbox",27),e.qZA(),e.TgZ(15,"div",23),e._UZ(16,"mat-checkbox",28),e.qZA(),e.TgZ(17,"div",23),e._UZ(18,"mat-checkbox",29),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.index,o=e.oxw(2);e.Q6J("ngClass",e.WLB(5,Ee,null!=o.modules[t].parent,null==o.modules[t].parent))("formGroupName",t),e.xp6(2),e.Q6J("ngIf",null==o.modules[t].parent),e.xp6(1),e.Q6J("ngIf",null!=o.modules[t].parent),e.xp6(1),e.hij(" ",o.modules[t].libelle," ")}}function Ne(i,s){if(1&i&&(e.ynx(0),e.YNc(1,xe,19,8,"div",19),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.roleFields.controls)}}let me=(()=>{class i{constructor(t,o,n,r){this.userServ=t,this.data=o,this.fb=n,this.dialog=r,this.hasError=!1,this.modules=[],this.selectedModules=[]}ngOnInit(){let t=this.data.data;this.formRoles=this.fb.group(null!=t?{roles:this.fb.array([]),role:new a.NI(t.libelle,a.kI.required)}:{roles:this.fb.array([]),role:new a.NI("",a.kI.required)}),this.userServ.getModules().subscribe(o=>{this.modules=o,this.modules.forEach(n=>{this.addModule(n,t)})})}ngAfterViewInit(){D("body").on("click",".parent-module .module-label",t=>{t.preventDefault(),D(t.currentTarget).parent().nextUntil(".parent-module").hasClass("show-module")?D(t.currentTarget).parent().nextUntil(".parent-module").removeClass("show-module"):D(t.currentTarget).parent().nextUntil(".parent-module").addClass("show-module")})}addModule(t,o){var n;let r;console.log(o),this.roleFields=null===(n=this.formRoles)||void 0===n?void 0:n.get("roles"),o&&(null==o?void 0:o.modules)&&o.modules.length>0&&o.modules.forEach(l=>{var h,g,v;(null===(h=t.libelle)||void 0===h?void 0:h.toLowerCase())!=(null===(v=null===(g=l.module)||void 0===g?void 0:g.libelle)||void 0===v?void 0:v.toLowerCase())||(r=l.privileges)}),this.roleFields.push(this.fb.group({module:new a.NI(t.id,[a.kI.required]),all:new a.NI(!!(null==r?void 0:r.includes(T.e.ALL))),read:new a.NI(!!(null==r?void 0:r.includes(T.e.READ))),write:new a.NI(!!(null==r?void 0:r.includes(T.e.WRITE))),edit:new a.NI(!!(null==r?void 0:r.includes(T.e.EDIT))),delete:new a.NI(!!(null==r?void 0:r.includes(T.e.DELETE))),print:new a.NI(!!(null==r?void 0:r.includes(T.e.PRINT)))}))}onSubmit(){this.formRoles.valid&&this.formRoles.get("roles").controls.filter(r=>r.value.all||r.value.read||r.value.delete||r.value.print||r.value.write||r.value.edit).forEach(r=>{var l,h,g,v,b;let Z=new Te;Z.id=r.value.module,Z.privileges=[],r.value.all?Z.privileges=[T.e.ALL]:(r.value.edit&&(null===(l=Z.privileges)||void 0===l||l.push(T.e.EDIT)),r.value.read&&(null===(h=Z.privileges)||void 0===h||h.push(T.e.READ)),r.value.write&&(null===(g=Z.privileges)||void 0===g||g.push(T.e.WRITE)),r.value.delete&&(null===(v=Z.privileges)||void 0===v||v.push(T.e.DELETE)),r.value.print&&(null===(b=Z.privileges)||void 0===b||b.push(T.e.PRINT))),this.selectedModules.push(Z)});let t=new Ae;t.modules=this.selectedModules,t.libelle=this.formRoles.value.role;let o=this.data.data;null!=o?(t.id=o.id,this.userServ.editRole(o.id,t).subscribe(n=>{this.dialog.close()})):this.userServ.addRole(t).subscribe(n=>{this.dialog.close()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.K),e.Y36(m.WI),e.Y36(a.qu),e.Y36(m.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-role-form-dialog"]],decls:40,vars:4,consts:[[3,"formGroup","ngSubmit"],["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon","matDialogClose","",1,"close-btn"],["class","alert alert-danger ",4,"ngIf"],[1,"col-md-12"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","formControlName","role","placeholder","Ex : Admin"],["matSuffix",""],["formArrayName","roles",1,"col-md-12","border","m-2"],[1,"row","border-bottom","bg-primary"],[1,"col-md-4","p-3"],[1,"col-md-8"],[1,"row"],[1,"col","p-2","justify-content-center","d-flex","flex-column","text-center"],[4,"ngIf"],["type","submit",1,"btn","btn-indigo","btn-with-icon"],[1,"typcn","typcn-folder-add"],[1,"alert","alert-danger"],[1,"p-2"],["class","row border-bottom",3,"ngClass","formGroupName",4,"ngFor","ngForOf"],[1,"row","border-bottom",3,"ngClass","formGroupName"],[1,"col-md-4","p-3","module-label"],[1,"col-md-8","p-3"],[1,"col","justify-content-center","d-flex","flex-column","text-center"],["color","primary","formControlName","all"],["color","primary","formControlName","read"],["color","primary","formControlName","write"],["color","primary","formControlName","edit"],["color","primary","formControlName","delete"],["color","primary","formControlName","print"],[1,"fa","fa-angle-right"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"h1",1),e.TgZ(2,"mat-toolbar-row"),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",2),e._uU(6,"close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-content"),e.YNc(8,Ce,6,2,"div",3),e.TgZ(9,"div",4),e.TgZ(10,"mat-form-field",5),e.TgZ(11,"mat-label"),e._uU(12,"Role"),e.qZA(),e._UZ(13,"input",6),e.TgZ(14,"mat-icon",7),e._uU(15,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"div",9),e.TgZ(18,"div",10),e._uU(19," Modules "),e.qZA(),e.TgZ(20,"div",11),e.TgZ(21,"div",12),e.TgZ(22,"div",13),e._uU(23,"All"),e.qZA(),e.TgZ(24,"div",13),e._uU(25,"Read"),e.qZA(),e.TgZ(26,"div",13),e._uU(27,"Write"),e.qZA(),e.TgZ(28,"div",13),e._uU(29,"Edit"),e.qZA(),e.TgZ(30,"div",13),e._uU(31,"Delete"),e.qZA(),e.TgZ(32,"div",13),e._uU(33,"Print"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(34,Ne,2,1,"ng-container",14),e.qZA(),e._UZ(35,"div"),e.qZA(),e.TgZ(36,"mat-dialog-actions"),e.TgZ(37,"button",15),e._UZ(38,"i",16),e._uU(39," Enregistrer "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.formRoles),e.xp6(4),e.hij(" ",o.data.title," "),e.xp6(4),e.Q6J("ngIf",1==o.hasError),e.xp6(26),e.Q6J("ngIf",o.roleFields))},directives:[a._Y,a.JL,a.sg,m.uh,R.rD,P.Hw,m.ZT,m.xY,A.O5,_.KE,_.hX,O.Nt,a.Fj,a.JJ,a.u,_.R9,a.CE,m.H8,A.sg,A.mk,a.x0,qe.oG],styles:[""]}),i})();function Ie(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",15),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6,"\xa0"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"div",16),e.TgZ(13,"button",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().delItem(r)}),e._UZ(14,"i",18),e.qZA(),e.TgZ(15,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().openRoleFormDialog("EDIT",r)}),e._UZ(16,"i",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,o=s.index;e.xp6(2),e.hij(" ",o+1,""),e.xp6(2),e.Oqu(t.libelle),e.xp6(4),e.Oqu(null==t.createdBy?null:t.createdBy.nom),e.xp6(2),e.Oqu(t.createdAt)}}let Fe=(()=>{class i{constructor(t,o,n){this.userServ=t,this.dialog=o,this.fb=n,this.hasError=!1}ngOnInit(){this.userServ.getRoles().subscribe(t=>{this.roles=t})}openRoleFormDialog(t,o){switch(t){case"EDIT":console.log(o),this.dialogConfig=new m.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Modifier le role ",message:"",action:"EDIT",data:o},this.dialog.open(me,this.dialogConfig);break;default:this.dialogConfig=new m.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Nouveau role ",message:"",action:"NEW",data:null},this.dialog.open(me,this.dialogConfig)}}delItem(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.K),e.Y36(m.uw),e.Y36(a.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-roles"]],decls:36,vars:1,consts:[[1,"az-content-label","mg-b-5","config-title"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-indigo","btn-sm","btn-icon",3,"click"],[1,"typcn","typcn-plus-outline"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-b-20","tx-gray-600"],[1,"mg-y-30"],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],[1,"p-2","m-2"],[1,"col-sm-6","col-md-3","mg-t-10","mg-md-t-0"],[1,"btn","btn-outline-primary","btn-rounded","btn-block"],["scope","row"],[1,"btn-group"],["type","button",1,"btn-danger",3,"click"],[1,"typcn","typcn-delete"],["type","button",1,"btn-success",3,"click"],[1,"typcn","typcn-edit"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"span"),e._uU(3,"Liste des roles "),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"button",3),e.NdJ("click",function(){return o.openRoleFormDialog("NEW",null)}),e._UZ(7,"i",4),e.qZA(),e.TgZ(8,"button",5),e._UZ(9,"i",6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"p",7),e._uU(11,"Veuillez ajouter, editer, voir la liste des roles."),e.qZA(),e._UZ(12,"hr",8),e.TgZ(13,"div",9),e.TgZ(14,"table",10),e.TgZ(15,"thead"),e.TgZ(16,"tr"),e.TgZ(17,"th"),e._uU(18,"#"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Role"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Modules"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Utilisateur"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Date"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"\xa0"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"tbody"),e.YNc(30,Ie,17,4,"tr",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",12),e.TgZ(32,"div",13),e.TgZ(33,"button",14),e._uU(34,"Voir tout"),e.qZA(),e.qZA(),e.qZA(),e._UZ(35,"hr",8),e.qZA()),2&t&&(e.xp6(30),e.Q6J("ngForOf",o.roles))},directives:[A.sg],styles:[""]}),i})(),we=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-module"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"module works!"),e.qZA())},styles:[""]}),i})();var ge=d(2298),pe=d(7546),p=d(9949),x=d(5783),_e=d(8380),Y=d(6461),N=d(5647),j=d(5972),C=d(877),he=d(2596),Ze=d(1533),fe=d(9630),w=d(7832),S=d(5396),L=d(7441),y=d(1554),U=d(8341),B=d(2458);const ye=["stepper"],Je=["canvas"],ke=["inputRole"];function Me(i,s){if(1&i&&(e.TgZ(0,"div",54),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",55),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.error?null:t.error.error),e.xp6(3),e.hij(" ",null==t.error?null:t.error.description," ")}}function Re(i,s){1&i&&e._uU(0,"Renseignement de la r\xe9gie")}function Oe(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"img",56,57),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.logoUrl,e.LSH)}}function Se(i,s){1&i&&(e.ynx(0),e._UZ(1,"img",58),e.BQk())}function Qe(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.libelle,"")}}function De(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Pe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",60),e.NdJ("removed",function(){const r=e.CHM(t).$implicit;return e.oxw().removeRole(r)}),e._uU(1),e.TgZ(2,"mat-icon",61),e._uU(3,"cancel"),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,o=e.oxw();e.Q6J("selectable",o.selectable)("removable",o.removable),e.xp6(1),e.hij(" ",t.libelle," ")}}function Ye(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.libelle," ")}}function Le(i,s){1&i&&e._uU(0,"Adresse")}function Be(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function je(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function $e(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"span",10),e._uU(2," Chefferie "),e.qZA(),e.TgZ(3,"mat-slide-toggle",11),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onChangeSecteur(n)}),e.qZA(),e.TgZ(4,"span",10),e._uU(5,"Secteur"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.Q6J("checked",!0))}function Ve(i,s){1&i&&e._UZ(0,"mat-error")}function He(i,s){1&i&&e._UZ(0,"mat-error")}function ze(i,s){1&i&&e._UZ(0,"mat-error")}function Ge(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.libelle," ")}}function Xe(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Ke(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",45),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Ville"),e.qZA(),e.TgZ(4,"mat-select",62),e.NdJ("selectionChange",function(n){return e.CHM(t),e.oxw().onVilleChnge(n)}),e.YNc(5,Xe,2,2,"mat-option",29),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.towns)}}function We(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function et(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",45),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Territoire"),e.qZA(),e.TgZ(4,"mat-select",63),e.NdJ("selectionChange",function(n){return e.CHM(t),e.oxw().onTerritoireChange(n)}),e.YNc(5,We,2,2,"mat-option",29),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.territoires)}}function tt(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function ot(i,s){if(1&i&&(e.TgZ(0,"div",45),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Commune"),e.qZA(),e.TgZ(4,"mat-select",64),e.YNc(5,tt,2,2,"mat-option",29),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.communes)}}function it(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function nt(i,s){if(1&i&&(e.TgZ(0,"div",45),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Secteur"),e.qZA(),e.TgZ(4,"mat-select",65),e.YNc(5,it,2,2,"mat-option",29),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.secteurs)}}function rt(i,s){if(1&i&&(e.TgZ(0,"mat-option",59),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function st(i,s){if(1&i&&(e.TgZ(0,"div",45),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Chefferie"),e.qZA(),e.TgZ(4,"mat-select",66),e.YNc(5,rt,2,2,"mat-option",29),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.chefferies)}}function at(i,s){1&i&&e._uU(0,"Finalisation")}function lt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",67),e.TgZ(2,"mat-icon",68),e._uU(3,"check_circle_outline"),e.qZA(),e.TgZ(4,"div",67),e.TgZ(5,"h1"),e._uU(6,"Success"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Operation reussie avec success"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Le compte a \xe9t\xe9 cr\xe9\xe9 avec succes. Un mail/sms de confirmation est envoy\xe9 \xe0/au adresse/phone mail utilis\xe9. Veuillez utiliser le code recu pour achever la creation"),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"div",69),e.NdJ("click",function(){return e.CHM(t),e.oxw().onView()}),e.TgZ(13,"a",70),e._uU(14,"Voir d\xe9tail"),e.qZA(),e.qZA(),e.TgZ(15,"div",69),e.NdJ("click",function(){return e.CHM(t),e.oxw().init()}),e.TgZ(16,"a",71),e._uU(17,"Nouvel utilisateur"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}function dt(i,s){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",67),e.TgZ(2,"mat-icon",72),e._uU(3,"block"),e.qZA(),e.TgZ(4,"div",67),e.TgZ(5,"h1"),e._uU(6,"Erreur"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Operation \xe9chou\xe9e "),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(10),e.hij(" ",null==t.error?null:t.error.description," ")}}function ct(i,s){1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",67),e._UZ(2,"img",73),e.TgZ(3,"div",67),e.TgZ(4,"h1"),e._uU(5,"Patientez"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Operation en cours "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}function ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){return e.CHM(t),e.oxw().prev()}),e._UZ(1,"i",75),e._uU(2," Prev "),e.qZA()}}function mt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){return e.CHM(t),e.oxw().next()}),e._UZ(1,"i",76),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.btnNextLabel," ")}}let gt=(()=>{class i{constructor(t,o,n,r,l){this.data=t,this.regionalService=o,this.userServ=n,this.assietteConf=r,this.agentMan=l,this.currentPage=0,this.separatorKeysCodes=[Y.K5,Y.OC],this.hasError=!1,this.logoUrl="",this.couldSelectMultiRoles=!0,this.categories=[],this.dataf=new x.H,this.userOrAgent=!1,this.isEnded=0,this.isShown=!1,this.couldSave=!0,this.couldBack=!1,this.btnNextLabel="Suivant",this.townOrTerritory=!0,this.secteurOrChefferie=!0,this.regies=[],this.centers=[],this.provinces=[],this.towns=[],this.communes=[],this.secteurs=[],this.territoires=[],this.chefferies=[],this.roles=[],this.access=[N.P.WEB_ONLY,N.P.MOBILE_ONLY,N.P.API,N.P.ALL],this.selectedRoles=[],this.selectable=!0,this.removable=!0}ngOnInit(){this.form=new a.cw({nom:new a.NI("",[a.kI.required]),prenom:new a.NI("",[a.kI.required]),email:new a.NI("",[a.kI.required,a.kI.email]),phone:new a.NI("",[a.kI.required]),category:new a.NI("",[a.kI.required]),role:new a.NI,access:new a.NI("",[a.kI.required])}),this.adressForm=new a.cw({centre:new a.NI("",[]),regie:new a.NI("",[a.kI.required]),province:new a.NI("",[a.kI.required]),town:new a.NI,territoire:new a.NI,num:new a.NI,avenue:new a.NI,quartier:new a.NI,commune:new a.NI,secteur:new a.NI,chefferie:new a.NI}),this.userServ.getRoles().subscribe(t=>{this.roles=t,this.userServ.getCategory().subscribe(o=>{this.categories=o,this.assietteConf.fetchRegies().subscribe(n=>{this.regies=n,this.regionalService.getProvinces().subscribe(r=>{this.provinces=r})})})})}valid(){}fileImageEvent(t){this.hasError=!1,t.target.files.length>0&&this.convertFile(t.target.files[0])}convertFile(t){const o=new ge.t(1),n=new FileReader;return n.readAsDataURL(t),n.onload=r=>{try{const l=new Image;l.src=r.target.result,l.onload=h=>{var g;null===(g=this.ctx)||void 0===g||g.drawImage(l,0,0,120,120),console.log(this.canvas.nativeElement.toDataURL());let E=_e.b$.Base64Compile(this.canvas.nativeElement.toDataURL());this.selectedImage=new pe.$(E[0],E[1]),this.logoUrl=r.target.result}}catch(l){this.error=new p.D,this.error.error=l.message,this.error.description="Veuillez s\xe9lectionner l'image qui reste le format",this.hasError=!0}},o}onTypeUserChange(t){this.userOrAgent=t.checked}init(){}onView(){}next(){var t;if(-1===this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.error=new p.D("Enregistrement en cours","Veuillez patienter, votre op\xe9ration est en cours"));this.hasError=!1;let o=null===(t=this.stepper)||void 0===t?void 0:t.selectedIndex;switch(this.btnNextLabel=1==o?"Enregistrer":"Suivant",o){case 0:if(this.form.valid){if(this.dataf.profile=this.selectedImage,this.isShown=!0,this.dataf.roles=this.selectedRoles,this.couldBack=!0,this.btnNextLabel="Enregistrer",0==this.selectedRoles.length)return this.hasError=!0,this.isShown=!1,void(this.error=new p.D("Erreur de saisie","Veuillez s\xe9lectionner au moins un role"));this.dataf.profile=this.selectedImage,this.currentPage++}else this.hasError=!0,this.isShown=!1,this.error=new p.D("Erreur de saisie","Veuillez corriger certains champs");break;case 1:{let n=new j.w;console.log(this.dataf),this.userOrAgent?this.adressForm.valid?(this.isEnded=-1,n.avenue=this.adressForm.value.avenue,n.num=this.adressForm.value.num,n.quartier=this.adressForm.value.quartier,this.townOrTerritory?(n.typeEmplacement=C.a.COMUNE,n.province=this.adressForm.value.province,n.idcom=this.adressForm.value.commune):this.secteurOrChefferie?(n.typeEmplacement=C.a.SECTEUR,n.province=this.adressForm.value.province,n.idcom=this.adressForm.value.secteur):(n.typeEmplacement=C.a.CHEFFERIE,n.province=this.adressForm.value.province,n.idcom=this.adressForm.value.chefferie),this.dataf.adress=n,this.isEnded=-1,this.currentPage=2,this.couldSave=!1,this.userOrAgent&&this.agentMan.addAgent(this.dataf).subscribe(r=>{this.isEnded=1,this.couldBack=!0,this.dataf=new x.H},r=>{this.isEnded=0,this.couldBack=!0,this.hasError=!0,this.error=new p.D("Erreur d'enregistrement","Veuillez corriger certains champs")}),this.couldSave=!1):(this.isEnded=-1,this.currentPage=2,this.couldSave=!1,this.userServ.addUser(this.dataf).subscribe(r=>{this.isEnded=1,this.couldBack=!0,this.dataf=new x.H},r=>{this.isEnded=0,this.couldBack=!0,this.hasError=!0,this.error=new p.D("Erreur d'enregistrement","Veuillez corriger certains champs")})):(this.isEnded=-1,this.currentPage=2,this.couldSave=!1,this.userServ.addUser(this.dataf).subscribe(r=>{this.isEnded=1,this.couldSave=!1,this.couldBack=!0,this.dataf=new x.H},r=>{this.isEnded=0,this.couldBack=!0,this.hasError=!0,this.error=new p.D("Erreur d'enregistrement","Veuillez corriger certains champs")}))}}this.stepper.selectedIndex=this.currentPage}prev(){var t,o,n,r;if(2==(null===(t=this.stepper)||void 0===t?void 0:t.selectedIndex)&&-1==this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.error=new p.D("Enregistrement en cours","Veuillez patienter votre op\xe9ration est en cours"));if(this.hasError=!1,2==(null===(o=this.stepper)||void 0===o?void 0:o.selectedIndex)&&1==this.isEnded)return this.hasError=!0,this.isShown=!1,this.error=new p.D("Enregistrement du nouvel acte","Veuillez enregistrer un nouvel acte si il y en a autres"),this.stepper.selectedIndex=0,this.currentPage=0,this.couldSave=!0,this.couldBack=!1,void(this.btnNextLabel="Suivant");this.hasError=!1,2==(null===(n=this.stepper)||void 0===n?void 0:n.selectedIndex)&&0==this.isEnded&&(this.couldBack=!0,this.couldSave=!0);let l=null===(r=this.stepper)||void 0===r?void 0:r.selectedIndex;this.btnNextLabel=1==l?"Enregistrer":"Suivant",this.currentPage=l,this.currentPage--,this.stepper.selectedIndex=this.currentPage}onChangeTown(t){this.townOrTerritory=t.checked}onChangeSecteur(t){this.secteurOrChefferie=t.checked}onProvinceChange(t){this.townOrTerritory?this.regionalService.getProvinceTowns(t.value).subscribe(o=>{this.towns=o}):this.regionalService.getProvinceTerriroires(t.value).subscribe(o=>{this.territoires=o})}onVilleChnge(t){this.regionalService.getCommunesByVille(t.value).subscribe(o=>{this.communes=o})}onTerritoireChange(t){this.secteurOrChefferie?this.regionalService.getSecteurByTerritoire(t.value).subscribe(o=>{this.secteurs=o}):this.regionalService.getChefferieByTerritoire(t.value).subscribe(o=>{this.chefferies=o})}onRoleSelected(t){this.selectedRoles.length>=0&&0==this.couldSelectMultiRoles||this.roles.forEach((o,n)=>{if(o.id==t.option.value){if(this.selectedRoles.includes(o))return;return this.selectedRoles.push(o),this.inputRole.nativeElement.value="",void this.form.controls.role.setValue(null)}})}removeRole(t){this.selectedRoles.forEach((o,n)=>{o.id!=t.id||this.selectedRoles.splice(n,1)})}addRole(t){console.log(t)}onRegieChanged(t){this.adressForm.controls.centre.setValue(""),this.assietteConf.fetchCenters(t.value).subscribe(o=>{this.centers=o})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.WI),e.Y36(he.N),e.Y36(k.K),e.Y36(Ze.f),e.Y36(fe.t))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-user-form-dialog"]],viewQuery:function(t,o){if(1&t&&(e.Gf(ye,5),e.Gf(Je,7),e.Gf(ke,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.stepper=n.first),e.iGM(n=e.CRH())&&(o.canvas=n.first),e.iGM(n=e.CRH())&&(o.inputRole=n.first)}},inputs:{dataf:"dataf",townOrTerritory:"townOrTerritory",secteurOrChefferie:"secteurOrChefferie"},decls:179,vars:41,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon","matDialogClose","",1,"close-btn"],["class","alert alert-danger ",4,"ngIf"],["stepper",""],["label","Step 1"],["matStepLabel",""],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row"],[1,"col","m-2"],[1,"m-3"],["color","primary",3,"checked","change"],[1,"col-md-6","justify-content-center","d-flex","text-center"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],[1,"warp-avatar","justify-content-center"],[4,"ngIf"],["width","120","height","120",2,"display","none"],["canvas",""],["type","file","accept","image/*",1,"",3,"change"],[1,"p-1","m-3"],[1,"alert","alert-info"],[1,"col-md-6"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","formControlName","nom","placeholder","Ex : Ekoto",3,"ngModel","ngModelChange"],["matSuffix",""],["type","text","matInput","","formControlName","prenom","placeholder","Ex : Brandon",3,"ngModel","ngModelChange"],["type","email","matInput","","formControlName","email","type","email","placeholder","Ex exemple@exemple.com",3,"ngModel","ngModelChange"],["type","tel","matInput","","formControlName","phone","type","tel","placeholder","Ex 08XXXXXXXX",3,"ngModel","ngModelChange"],["type","text","matInput","","formControlName","category","placeholder","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Alias","formControlName","access",3,"ngModel","matAutocomplete","ngModelChange"],["autoAccess","matAutocomplete"],["aria-label","Roles"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Ajouter un autre role","formControlName","role",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["inputRole",""],[3,"optionSelected"],["auto","matAutocomplete"],["label","Step 2"],[3,"formGroup"],[1,"row","m-2"],["type","text","matInput","","formControlName","regie","placeholder","",3,"ngModel","selectionChange","ngModelChange"],["type","text","matInput","","formControlName","centre","placeholder","",3,"ngModel","ngModelChange"],["class","col m-2",4,"ngIf"],[1,"col-md-4"],["type","text","matInput","","formControlName","num","placeholder","Ex : Centre Luna "],["type","text","matInput","","formControlName","avenue","placeholder","Ex : exemple "],["type","text","matInput","","formControlName","quartier","placeholder",""],["type","text","matInput","","formControlName","province","placeholder","Ex : Nord kivu",3,"selectionChange"],["class","col-md-4",4,"ngIf"],["label","Step 3"],["class","col-md-12 ",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","submit",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove",""],["type","text","matInput","","formControlName","town","placeholder","",3,"selectionChange"],["type","text","matInput","","formControlName","territoire","placeholder","",3,"selectionChange"],["type","text","matInput","","formControlName","commune","placeholder","Ex : FINANCE"],["type","text","matInput","","formControlName","secteur","placeholder","Ex : FINANCE"],["type","text","matInput","","formControlName","chefferie","placeholder","Ex : FINANCE"],[1,"d-flex","align-items-center","justify-content-center","flex-column"],[1,"successIcon"],[1,"mg-t-10","mg-md-t-0",3,"click"],[1,"btn","btn-primary","btn-rounded","btn-block"],[1,"btn","btn-outline-primary","btn-rounded","btn-block"],[1,"successIcon",2,"color","crimson"],["src","assets/img/loading.gif",1,"successIcon",2,"color","rgb(248, 232, 9)"],["type","submit",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"typcn","typcn-arrow-left"],[1,"typcn","typcn-arrow-right"]],template:function(t,o){if(1&t&&(e.TgZ(0,"h1",0),e.TgZ(1,"mat-toolbar-row"),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",1),e._uU(5,"close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-content"),e.YNc(7,Me,6,2,"div",2),e.TgZ(8,"div"),e.TgZ(9,"mat-stepper",null,3),e.TgZ(11,"mat-step",4),e.YNc(12,Re,1,0,"ng-template",5),e.TgZ(13,"form",6),e.NdJ("ngSubmit",function(){return o.valid()}),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e.TgZ(16,"div",9),e.TgZ(17,"span",10),e._uU(18," Type d'utilisateur : Ordinaire "),e.qZA(),e.TgZ(19,"mat-slide-toggle",11),e.NdJ("change",function(r){return o.onTypeUserChange(r)}),e.qZA(),e.TgZ(20,"span",10),e._uU(21,"Agent"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"div",8),e.TgZ(24,"div",12),e.TgZ(25,"div",13),e.TgZ(26,"div",14),e.YNc(27,Oe,3,1,"ng-container",15),e.YNc(28,Se,2,0,"ng-container",15),e._UZ(29,"canvas",16,17),e.TgZ(31,"input",18),e.NdJ("change",function(r){return o.fileImageEvent(r)}),e.qZA(),e.qZA(),e.TgZ(32,"p",19),e._uU(33,"Photo"),e.qZA(),e.TgZ(34,"p",20),e._uU(35," Veuillez cliquer sur l'icone photo pour charger l'image "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"div",8),e.TgZ(38,"div",21),e.TgZ(39,"mat-form-field",22),e.TgZ(40,"mat-label"),e._uU(41,"Nom"),e.qZA(),e.TgZ(42,"input",23),e.NdJ("ngModelChange",function(r){return o.dataf.nom=r}),e.qZA(),e.TgZ(43,"mat-icon",24),e._uU(44,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",21),e.TgZ(46,"mat-form-field",22),e.TgZ(47,"mat-label"),e._uU(48,"Pr\xe9nom"),e.qZA(),e.TgZ(49,"input",25),e.NdJ("ngModelChange",function(r){return o.dataf.prenom=r}),e.qZA(),e.TgZ(50,"mat-icon",24),e._uU(51,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",7),e.TgZ(53,"mat-form-field",22),e.TgZ(54,"mat-label"),e._uU(55,"Email"),e.qZA(),e.TgZ(56,"input",26),e.NdJ("ngModelChange",function(r){return o.dataf.email=r}),e.qZA(),e.TgZ(57,"mat-icon",24),e._uU(58,"email"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",7),e.TgZ(60,"mat-form-field",22),e.TgZ(61,"mat-label"),e._uU(62,"Phone"),e.qZA(),e.TgZ(63,"input",27),e.NdJ("ngModelChange",function(r){return o.dataf.phone=r}),e.qZA(),e.TgZ(64,"mat-icon",24),e._uU(65,"phone"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",21),e.TgZ(67,"mat-form-field",22),e.TgZ(68,"mat-label"),e._uU(69,"Cat\xe9gorie"),e.qZA(),e.TgZ(70,"mat-select",28),e.NdJ("ngModelChange",function(r){return o.dataf.category=r}),e.YNc(71,Qe,2,2,"mat-option",29),e.qZA(),e.TgZ(72,"mat-icon",24),e._uU(73,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"div",21),e.TgZ(75,"mat-form-field",22),e.TgZ(76,"mat-label"),e._uU(77,"Access Platform"),e.qZA(),e.TgZ(78,"input",30),e.NdJ("ngModelChange",function(r){return o.dataf.accessPlatform=r}),e.qZA(),e.TgZ(79,"mat-icon",24),e._uU(80,"filter_b_and_w"),e.qZA(),e.TgZ(81,"mat-autocomplete",null,31),e.YNc(83,De,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(84,"div",7),e.TgZ(85,"mat-form-field",22),e.TgZ(86,"mat-label"),e._uU(87,"Role(s)"),e.qZA(),e.TgZ(88,"mat-chip-list",32,33),e.YNc(90,Pe,4,3,"mat-chip",34),e.TgZ(91,"input",35,36),e.NdJ("matChipInputTokenEnd",function(r){return o.addRole(r)}),e.qZA(),e.qZA(),e.TgZ(93,"mat-autocomplete",37,38),e.NdJ("optionSelected",function(r){return o.onRoleSelected(r)}),e.YNc(95,Ye,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(96,"mat-step",39),e.YNc(97,Le,1,0,"ng-template",5),e.TgZ(98,"form",40),e.TgZ(99,"fieldset"),e.TgZ(100,"legend"),e._uU(101,"R\xe9gie & Centre"),e.qZA(),e.TgZ(102,"div",41),e.TgZ(103,"div",21),e.TgZ(104,"mat-form-field",22),e.TgZ(105,"mat-label"),e._uU(106,"R\xe9gie"),e.qZA(),e.TgZ(107,"mat-select",42),e.NdJ("selectionChange",function(r){return o.onRegieChanged(r)})("ngModelChange",function(r){return o.dataf.regie=r}),e.YNc(108,Be,2,2,"mat-option",29),e.qZA(),e.TgZ(109,"mat-icon",24),e._uU(110,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(111,"div",21),e.TgZ(112,"mat-form-field",22),e.TgZ(113,"mat-label"),e._uU(114,"Centre"),e.qZA(),e.TgZ(115,"mat-select",43),e.NdJ("ngModelChange",function(r){return o.dataf.centre=r}),e.YNc(116,je,2,2,"mat-option",29),e.qZA(),e.TgZ(117,"mat-icon",24),e._uU(118,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(119,"fieldset"),e.TgZ(120,"legend"),e._uU(121,"Adresse"),e.qZA(),e.TgZ(122,"div",41),e.TgZ(123,"div",7),e.TgZ(124,"div",8),e.TgZ(125,"div",9),e.TgZ(126,"span",10),e._uU(127," Territoire "),e.qZA(),e.TgZ(128,"mat-slide-toggle",11),e.NdJ("change",function(r){return o.onChangeTown(r)}),e.qZA(),e.TgZ(129,"span",10),e._uU(130,"Ville"),e.qZA(),e.qZA(),e.YNc(131,$e,6,1,"div",44),e.qZA(),e.qZA(),e.TgZ(132,"div",45),e.TgZ(133,"mat-form-field",22),e.TgZ(134,"mat-label"),e._uU(135,"Num\xe9ro"),e.qZA(),e._UZ(136,"input",46),e.TgZ(137,"mat-icon",24),e._uU(138,"mode_edit"),e.qZA(),e.YNc(139,Ve,1,0,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(140,"div",45),e.TgZ(141,"mat-form-field",22),e.TgZ(142,"mat-label"),e._uU(143,"Avenue"),e.qZA(),e._UZ(144,"input",47),e.TgZ(145,"mat-icon",24),e._uU(146,"mode_edit"),e.qZA(),e.YNc(147,He,1,0,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(148,"div",45),e.TgZ(149,"mat-form-field",22),e.TgZ(150,"mat-label"),e._uU(151,"Quartier"),e.qZA(),e._UZ(152,"input",48),e.TgZ(153,"mat-icon",24),e._uU(154,"mode_edit"),e.qZA(),e.YNc(155,ze,1,0,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(156,"div",45),e.TgZ(157,"mat-form-field",22),e.TgZ(158,"mat-label"),e._uU(159,"Provinces"),e.qZA(),e.TgZ(160,"mat-select",49),e.NdJ("selectionChange",function(r){return o.onProvinceChange(r)}),e.YNc(161,Ge,2,2,"mat-option",29),e.qZA(),e.TgZ(162,"mat-icon",24),e._uU(163,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.YNc(164,Ke,8,1,"div",50),e.YNc(165,et,8,1,"div",50),e.YNc(166,ot,8,1,"div",50),e.YNc(167,nt,8,1,"div",50),e.YNc(168,st,8,1,"div",50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(169,"mat-step",51),e.YNc(170,at,1,0,"ng-template",5),e.TgZ(171,"div",8),e.YNc(172,lt,18,0,"div",52),e.YNc(173,dt,11,1,"div",52),e.YNc(174,ct,8,0,"div",52),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(175,"mat-dialog-actions"),e.YNc(176,ut,3,0,"button",53),e._uU(177,"\xa0\xa0 "),e.YNc(178,mt,3,1,"button",53),e.qZA()),2&t){const n=e.MAs(82),r=e.MAs(89),l=e.MAs(94);e.xp6(3),e.hij(" ",o.data.title," "),e.xp6(4),e.Q6J("ngIf",1==o.hasError),e.xp6(6),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("checked",!1),e.xp6(8),e.Q6J("ngIf",null!=o.selectedImage&&null!=o.selectedImage.data),e.xp6(1),e.Q6J("ngIf",!(null!=o.selectedImage&&null!=o.selectedImage.data)),e.xp6(14),e.Q6J("ngModel",o.dataf.nom),e.xp6(7),e.Q6J("ngModel",o.dataf.prenom),e.xp6(7),e.Q6J("ngModel",o.dataf.email),e.xp6(7),e.Q6J("ngModel",o.dataf.phone),e.xp6(7),e.Q6J("ngModel",o.dataf.category),e.xp6(1),e.Q6J("ngForOf",o.categories),e.xp6(7),e.Q6J("ngModel",o.dataf.accessPlatform)("matAutocomplete",n),e.xp6(5),e.Q6J("ngForOf",o.access),e.xp6(7),e.Q6J("ngForOf",o.selectedRoles),e.xp6(1),e.Q6J("matAutocomplete",l)("matChipInputFor",r)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),e.xp6(4),e.Q6J("ngForOf",o.roles),e.xp6(3),e.Q6J("formGroup",o.adressForm),e.xp6(9),e.Q6J("ngModel",o.dataf.regie),e.xp6(1),e.Q6J("ngForOf",o.regies),e.xp6(7),e.Q6J("ngModel",o.dataf.centre),e.xp6(1),e.Q6J("ngForOf",o.centers),e.xp6(12),e.Q6J("checked",!0),e.xp6(3),e.Q6J("ngIf",0==o.townOrTerritory),e.xp6(8),e.Q6J("ngIf",o.form.hasError("num")&&!o.form.hasError("required")),e.xp6(8),e.Q6J("ngIf",o.form.hasError("avenue")&&!o.form.hasError("required")),e.xp6(8),e.Q6J("ngIf",o.form.hasError("quartier")&&!o.form.hasError("required")),e.xp6(6),e.Q6J("ngForOf",o.provinces),e.xp6(3),e.Q6J("ngIf",1==o.townOrTerritory),e.xp6(1),e.Q6J("ngIf",0==o.townOrTerritory),e.xp6(1),e.Q6J("ngIf",1==o.townOrTerritory),e.xp6(1),e.Q6J("ngIf",0==o.townOrTerritory&&1==o.secteurOrChefferie),e.xp6(1),e.Q6J("ngIf",0==o.townOrTerritory&&0==o.secteurOrChefferie),e.xp6(4),e.Q6J("ngIf",1===o.isEnded),e.xp6(1),e.Q6J("ngIf",0===o.isEnded),e.xp6(1),e.Q6J("ngIf",-1===o.isEnded),e.xp6(2),e.Q6J("ngIf",1==o.isShown&&1==o.couldBack),e.xp6(2),e.Q6J("ngIf",o.couldSave)}},directives:[m.uh,R.rD,P.Hw,m.ZT,m.xY,A.O5,w.Vq,w.C0,w.VY,a._Y,a.JL,a.sg,S.Rr,_.KE,_.hX,O.Nt,a.Fj,a.JJ,a.u,_.R9,L.gD,A.sg,y.ZL,y.XC,U.qn,U.oH,m.H8,B.ey,U.HS,U.qH,_.TO],styles:[""]}),i})();const pt=["stepper"],_t=["category"],ht=["canvas"],Zt=["inputRole"];function ft(i,s){if(1&i&&(e.TgZ(0,"div",56),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",57),e._uU(5),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.error?null:t.error.error),e.xp6(3),e.hij(" ",null==t.error?null:t.error.description," ")}}function vt(i,s){1&i&&e._uU(0,"Renseignement de la r\xe9gie")}function Tt(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"img",58,59),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.logoUrl,e.LSH)}}function At(i,s){1&i&&(e.ynx(0),e._UZ(1,"img",60),e.BQk())}function qt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.libelle,"")}}function Ct(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",62),e.NdJ("removed",function(){const r=e.CHM(t).$implicit;return e.oxw().removeRole(r)}),e._uU(1),e.TgZ(2,"mat-icon",63),e._uU(3,"cancel"),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,o=e.oxw();e.Q6J("selectable",o.selectable)("removable",o.removable),e.xp6(1),e.hij(" ",t.libelle," ")}}function bt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.libelle," ")}}function Et(i,s){1&i&&e._uU(0,"Adresse")}function xt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Nt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function It(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"span",10),e._uU(2," Chefferie "),e.qZA(),e.TgZ(3,"mat-slide-toggle",45),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onChangeSecteur(n)}),e.qZA(),e.TgZ(4,"span",10),e._uU(5,"Secteur"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.Q6J("checked",!0))}function Ft(i,s){1&i&&e._UZ(0,"mat-error")}function wt(i,s){1&i&&e._UZ(0,"mat-error")}function yt(i,s){1&i&&e._UZ(0,"mat-error")}function Jt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.libelle," ")}}function kt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Mt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Ville"),e.qZA(),e.TgZ(4,"mat-select",64),e.NdJ("selectionChange",function(n){return e.CHM(t),e.oxw().onVilleChnge(n)}),e.YNc(5,kt,2,2,"mat-option",30),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.towns)}}function Rt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Ot(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Territoire"),e.qZA(),e.TgZ(4,"mat-select",65),e.NdJ("selectionChange",function(n){return e.CHM(t),e.oxw().onTerritoireChange(n)}),e.YNc(5,Rt,2,2,"mat-option",30),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.territoires)}}function St(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Qt(i,s){if(1&i&&(e.TgZ(0,"div",47),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Commune"),e.qZA(),e.TgZ(4,"mat-select",66),e.YNc(5,St,2,2,"mat-option",30),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.communes)}}function Dt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Pt(i,s){if(1&i&&(e.TgZ(0,"div",47),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Secteur"),e.qZA(),e.TgZ(4,"mat-select",67),e.YNc(5,Dt,2,2,"mat-option",30),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.secteurs)}}function Yt(i,s){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nom,"")}}function Lt(i,s){if(1&i&&(e.TgZ(0,"div",47),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Chefferie"),e.qZA(),e.TgZ(4,"mat-select",68),e.YNc(5,Yt,2,2,"mat-option",30),e.qZA(),e.TgZ(6,"mat-icon",24),e._uU(7,"bookmark"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.chefferies)}}function Bt(i,s){1&i&&e._uU(0,"Finalisation")}function jt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",69),e.TgZ(2,"mat-icon",70),e._uU(3,"check_circle_outline"),e.qZA(),e.TgZ(4,"div",69),e.TgZ(5,"h1"),e._uU(6,"Success"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Operation reussie avec success"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Le compte a \xe9t\xe9 cr\xe9\xe9 avec succes. Un mail/sms de confirmation est envoy\xe9 \xe0/au adresse/phone mail utilis\xe9. Veuillez utiliser le code recu pour achever la creation"),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"div",71),e.NdJ("click",function(){return e.CHM(t),e.oxw().onView()}),e.TgZ(13,"a",72),e._uU(14,"Voir d\xe9tail"),e.qZA(),e.qZA(),e.TgZ(15,"div",71),e.NdJ("click",function(){return e.CHM(t),e.oxw().init()}),e.TgZ(16,"a",73),e._uU(17,"Nouvel utilisateur"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}function $t(i,s){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",69),e.TgZ(2,"mat-icon",74),e._uU(3,"block"),e.qZA(),e.TgZ(4,"div",69),e.TgZ(5,"h1"),e._uU(6,"Erreur"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Operation \xe9chou\xe9e "),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(10),e.hij(" ",null==t.error?null:t.error.description," ")}}function Vt(i,s){1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",69),e._UZ(2,"img",75),e.TgZ(3,"div",69),e.TgZ(4,"h1"),e._uU(5,"Patientez"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Operation en cours "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}function Ht(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){return e.CHM(t),e.oxw().prev()}),e._UZ(1,"i",77),e._uU(2," Prev "),e.qZA()}}function zt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){return e.CHM(t),e.oxw().next()}),e._UZ(1,"i",78),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.btnNextLabel," ")}}let Gt=(()=>{class i{constructor(t,o,n,r,l){this.data=t,this.regionalService=o,this.userServ=n,this.assietteConf=r,this.agentMan=l,this.currentPage=0,this.separatorKeysCodes=[Y.K5,Y.OC],this.hasError=!1,this.logoUrl="",this.couldSelectMultiRoles=!0,this.categories=[],this.dataf=new x.H,this.userOrAgent=!1,this.isEnded=0,this.isShown=!1,this.couldSave=!0,this.couldBack=!1,this.btnNextLabel="Suivant",this.townOrTerritory=!0,this.secteurOrChefferie=!0,this.regies=[],this.centers=[],this.provinces=[],this.towns=[],this.communes=[],this.secteurs=[],this.territoires=[],this.chefferies=[],this.roles=[],this.access=[N.P.WEB_ONLY,N.P.MOBILE_ONLY,N.P.API,N.P.ALL],this.selectedRoles=[],this.selectable=!0,this.removable=!0}ngOnInit(){this.form=new a.cw({nom:new a.NI("",[a.kI.required]),prenom:new a.NI(""),email:new a.NI("",[a.kI.required,a.kI.email]),phone:new a.NI("",[a.kI.required]),category:new a.NI("",[a.kI.required]),role:new a.NI,access:new a.NI("",[a.kI.required])}),this.adressForm=new a.cw({centre:new a.NI("",[]),regie:new a.NI("",[a.kI.required]),province:new a.NI("",[a.kI.required]),town:new a.NI,territoire:new a.NI,num:new a.NI,avenue:new a.NI,quartier:new a.NI,commune:new a.NI,secteur:new a.NI,chefferie:new a.NI}),this.userServ.getRoles().subscribe(t=>{this.roles=t,this.userServ.getCategory().subscribe(o=>{this.categories=o,this.dataf.accessPlatform=this.dataf.accessPlatform,this.assietteConf.fetchRegies().subscribe(n=>{this.regies=n,this.regionalService.getProvinces().subscribe(r=>{this.provinces=r,this.dataf=this.data.data,"AGENT"==this.data.data.type?this.agentMan.getAgent(this.data.data.id).subscribe(l=>{var h,g,v,b,Z,E,V,H,z,G,X,K,W,ee,te,oe,ie,ne,re,se,ae,le,de,ce,ue;this.dataf.roles=l.roles,this.dataf.regie=null===(h=l.regie)||void 0===h?void 0:h.id,this.userOrAgent=!0,this.dataf.centre=null===(g=l.centre)||void 0===g?void 0:g.id,this.dataf.adress=new j.w,this.dataf.adress.avenue=null===(v=l.adresse)||void 0===v?void 0:v.avenue,this.dataf.adress.num=null===(b=l.adresse)||void 0===b?void 0:b.num,this.dataf.adress.quartier=null===(Z=l.adresse)||void 0===Z?void 0:Z.quartier,null===(E=this.adressForm.get("avenue"))||void 0===E||E.setValue(null===(V=l.adresse)||void 0===V?void 0:V.avenue),null===(H=this.adressForm.get("num"))||void 0===H||H.setValue(null===(z=l.adresse)||void 0===z?void 0:z.num),null===(G=this.adressForm.get("quartier"))||void 0===G||G.setValue(null===(X=l.adresse)||void 0===X?void 0:X.quartier),null===(K=this.adressForm.get("province"))||void 0===K||K.setValue(null===(ee=null===(W=l.adresse)||void 0===W?void 0:W.province)||void 0===ee?void 0:ee.id),(null===(te=l.adresse)||void 0===te?void 0:te.commune)&&(this.dataf.adress.typeEmplacement=C.a.COMUNE,this.dataf.adress.idcom=l.adresse.commune.id),(null===(oe=l.adresse)||void 0===oe?void 0:oe.secteur)&&(this.dataf.adress.typeEmplacement=C.a.SECTEUR,this.dataf.adress.idcom=l.adresse.secteur.id,null===(ie=this.adressForm.get("secteur"))||void 0===ie||ie.setValue(null===(ne=l.adresse.secteur)||void 0===ne?void 0:ne.id),null===(re=this.adressForm.get("territoire"))||void 0===re||re.setValue(null===(se=l.adresse.secteur.territire)||void 0===se?void 0:se.id)),(null===(ae=l.adresse)||void 0===ae?void 0:ae.chefferie)&&(this.dataf.adress.typeEmplacement=C.a.CHEFFERIE,this.dataf.adress.idcom=l.adresse.chefferie.id,null===(le=this.adressForm.get("secteur"))||void 0===le||le.setValue(null===(de=l.adresse.chefferie)||void 0===de?void 0:de.id),null===(ce=this.adressForm.get("territoire"))||void 0===ce||ce.setValue(null===(ue=l.adresse.chefferie.territoire)||void 0===ue?void 0:ue.id)),this.usr=l,this.fillRoles(l.roles)}):this.userServ.getUser(this.data.data.id).subscribe(l=>{this.dataf.roles=l.roles,this.userOrAgent=!1,this.fillRoles(l.roles),this.usr=l})})})})})}fileImageEvent(t){this.hasError=!1,t.target.files.length>0&&this.convertFile(t.target.files[0])}convertFile(t){const o=new ge.t(1),n=new FileReader;return n.readAsDataURL(t),n.onload=r=>{try{const l=new Image;l.src=r.target.result,l.onload=h=>{var g;null===(g=this.ctx)||void 0===g||g.drawImage(l,0,0,120,120);let E=_e.b$.Base64Compile(this.canvas.nativeElement.toDataURL());this.selectedImage=new pe.$(E[0],E[1]),this.logoUrl=r.target.result}}catch(l){this.error=new p.D,this.error.error=l.message,this.error.description="Veuillez s\xe9lectionner l'image qui reste le format",this.hasError=!0}},o}onTypeUserChange(t){this.userOrAgent=t.checked}init(){}onView(){}next(){var t;if(-1===this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.error=new p.D("Enregistrement en cours","Veuillez patienter, votre op\xe9ration est en cours"));this.hasError=!1;let o=null===(t=this.stepper)||void 0===t?void 0:t.selectedIndex;switch(this.btnNextLabel=1==o?"Enregistrer":"Suivant",o){case 0:this.form.valid?(this.dataf.profile=this.selectedImage,this.currentPage++,this.isShown=!0,this.dataf.roles=this.selectedRoles,this.couldBack=!0,this.btnNextLabel="Enregistrer",0==this.selectedRoles.length&&(this.hasError=!0,this.isShown=!1,this.error=new p.D("Erreur de saisie","Veuillez s\xe9lectionner au moins un role"))):(this.hasError=!0,this.isShown=!1,this.error=new p.D("Erreur de saisie","Veuillez corriger certains champs"));break;case 1:{let n=new j.w;this.userOrAgent?this.adressForm.valid?(this.isEnded=-1,n.avenue=this.adressForm.value.avenue,n.num=this.adressForm.value.num,n.quartier=this.adressForm.value.quartier,this.townOrTerritory?(n.typeEmplacement=C.a.COMUNE,n.province=this.adressForm.value.province,n.idcom=this.adressForm.value.commune):this.secteurOrChefferie?(n.typeEmplacement=C.a.SECTEUR,n.province=this.adressForm.value.province,n.idcom=this.adressForm.value.secteur):(n.typeEmplacement=C.a.CHEFFERIE,n.province=this.adressForm.value.province,n.idcom=this.adressForm.value.chefferie),this.dataf.adress=n,this.isEnded=-1,this.currentPage=2,this.couldSave=!1,this.userOrAgent&&this.agentMan.editAgent(this.dataf.id,this.dataf).subscribe(r=>{this.isEnded=1,this.couldBack=!0,this.dataf=new x.H},r=>{this.isEnded=0,this.couldBack=!0,this.hasError=!0,this.error=new p.D("Erreur d'enregistrement","Veuillez corriger certains champs")}),this.couldSave=!1):(this.isEnded=-1,this.currentPage=2,this.couldSave=!1,this.userServ.editUser(this.dataf.id,this.dataf).subscribe(r=>{this.isEnded=1,this.couldBack=!0,this.dataf=new x.H},r=>{this.isEnded=0,this.couldBack=!0,this.hasError=!0,this.error=new p.D("Erreur d'enregistrement","Veuillez corriger certains champs")})):(this.isEnded=-1,this.currentPage=2,this.couldSave=!1,this.userServ.editUser(this.dataf.id,this.dataf).subscribe(r=>{this.isEnded=1,this.couldSave=!1,this.couldBack=!0,this.dataf=new x.H},r=>{this.isEnded=0,this.couldBack=!0,this.hasError=!0,this.error=new p.D("Erreur d'enregistrement","Veuillez corriger certains champs")}))}}this.stepper.selectedIndex=this.currentPage}prev(){var t,o,n,r;if(2==(null===(t=this.stepper)||void 0===t?void 0:t.selectedIndex)&&-1==this.isEnded)return this.hasError=!0,this.isShown=!1,void(this.error=new p.D("Enregistrement en cours","Veuillez patienter votre op\xe9ration est en cours"));if(this.hasError=!1,2==(null===(o=this.stepper)||void 0===o?void 0:o.selectedIndex)&&1==this.isEnded)return this.hasError=!0,this.isShown=!1,this.error=new p.D("Enregistrement du nouvel acte","Veuillez enregistrer un nouvel acte si il y en a autres"),this.stepper.selectedIndex=0,this.currentPage=0,this.couldSave=!0,this.couldBack=!1,void(this.btnNextLabel="Suivant");this.hasError=!1,2==(null===(n=this.stepper)||void 0===n?void 0:n.selectedIndex)&&0==this.isEnded&&(this.couldBack=!0,this.couldSave=!0);let l=null===(r=this.stepper)||void 0===r?void 0:r.selectedIndex;this.btnNextLabel=1==l?"Enregistrer":"Suivant",this.currentPage=l,this.currentPage--,this.stepper.selectedIndex=this.currentPage}onChangeTown(t){this.townOrTerritory=t.checked}onChangeSecteur(t){this.secteurOrChefferie=t.checked}onProvinceChange(t){this.townOrTerritory?this.regionalService.getProvinceTowns(t.value).subscribe(o=>{this.towns=o}):this.regionalService.getProvinceTerriroires(t.value).subscribe(o=>{this.territoires=o})}onVilleChnge(t){this.regionalService.getCommunesByVille(t.value).subscribe(o=>{this.communes=o})}onTerritoireChange(t){this.secteurOrChefferie?this.regionalService.getSecteurByTerritoire(t.value).subscribe(o=>{this.secteurs=o}):this.regionalService.getChefferieByTerritoire(t.value).subscribe(o=>{this.chefferies=o})}onRoleSelected(t){this.selectedRoles.length>=0&&0==this.couldSelectMultiRoles||this.roles.forEach((o,n)=>{if(o.id==t.option.value){if(this.selectedRoles.includes(o))return;return this.selectedRoles.push(o),this.inputRole.nativeElement.value="",void this.form.controls.role.setValue(null)}})}fillRoles(t){t&&t.length>0&&(this.selectedRoles=t)}removeRole(t){console.log(t),this.selectedRoles.forEach((o,n)=>{o.id!=t.id||this.selectedRoles.splice(n,1)})}addRole(t){}onRegieChanged(t){this.adressForm.controls.centre.setValue(""),this.assietteConf.fetchCenters(t.value).subscribe(o=>{var n,r;this.centers=o,this.dataf.centre=null===(r=null===(n=this.usr)||void 0===n?void 0:n.centre)||void 0===r?void 0:r.id})}valid(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.WI),e.Y36(he.N),e.Y36(k.K),e.Y36(Ze.f),e.Y36(fe.t))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-user-form"]],viewQuery:function(t,o){if(1&t&&(e.Gf(pt,5),e.Gf(_t,5),e.Gf(ht,7),e.Gf(Zt,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.stepper=n.first),e.iGM(n=e.CRH())&&(o.matCat=n.first),e.iGM(n=e.CRH())&&(o.canvas=n.first),e.iGM(n=e.CRH())&&(o.inputRole=n.first)}},inputs:{dataf:"dataf",townOrTerritory:"townOrTerritory",secteurOrChefferie:"secteurOrChefferie"},decls:180,vars:42,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon","matDialogClose","",1,"close-btn"],["class","alert alert-danger ",4,"ngIf"],["stepper",""],["label","Step 1"],["matStepLabel",""],[1,"row",3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row"],[1,"col","m-2"],[1,"m-3"],["color","primary",3,"checked","ngModel","change","ngModelChange"],[1,"col-md-6","justify-content-center","d-flex","text-center"],[1,"d-flex","justify-content-center","flex-column","align-items-center"],[1,"warp-avatar","justify-content-center"],[4,"ngIf"],["width","120","height","120",2,"display","none"],["canvas",""],["type","file","accept","image/*",1,"",3,"change"],[1,"p-1","m-3"],[1,"alert","alert-info"],[1,"col-md-6"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","formControlName","nom","placeholder","Ex : Ekoto",3,"ngModel","ngModelChange"],["matSuffix",""],["type","text","matInput","","formControlName","prenom","placeholder","Ex : Brandon",3,"ngModel","ngModelChange"],["type","email","matInput","","formControlName","email","type","email","placeholder","Ex exemple@exemple.com",3,"ngModel","ngModelChange"],["type","tel","matInput","","formControlName","phone","type","tel","placeholder","Ex 08XXXXXXXX",3,"ngModel","ngModelChange"],["type","text","matInput","","formControlName","category","placeholder","",3,"ngModel","ngModelChange"],["category",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Alias","formControlName","access",3,"ngModel","matAutocomplete","ngModelChange"],["autoAccess","matAutocomplete"],["aria-label","Roles"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Ajouter un autre role","formControlName","role",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["inputRole",""],[3,"optionSelected"],["auto","matAutocomplete"],["label","Step 2"],[3,"formGroup"],[1,"row","m-2"],["type","text","matInput","","formControlName","regie","placeholder","",3,"ngModel","selectionChange","ngModelChange"],["type","text","matInput","","formControlName","centre","placeholder","",3,"ngModel","ngModelChange"],["color","primary",3,"checked","change"],["class","col m-2",4,"ngIf"],[1,"col-md-4"],["type","text","matInput","","formControlName","num","placeholder","Ex : Centre Luna "],["type","text","matInput","","formControlName","avenue","placeholder","Ex : exemple "],["type","text","matInput","","formControlName","quartier","placeholder",""],["type","text","matInput","","formControlName","province","placeholder","Ex : Nord kivu",3,"selectionChange"],["class","col-md-4",4,"ngIf"],["label","Step 3"],["class","col-md-12 ",4,"ngIf"],["class","btn btn-indigo btn-with-icon ","type","submit",3,"click",4,"ngIf"],[1,"alert","alert-danger"],[1,"p-2"],[1,"avatar",3,"src"],["imgLogo",""],["src","/assets/img/avatar.jpg",1,"avatar"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove",""],["type","text","matInput","","formControlName","town","placeholder","",3,"selectionChange"],["type","text","matInput","","formControlName","territoire","placeholder","",3,"selectionChange"],["type","text","matInput","","formControlName","commune","placeholder","Ex : FINANCE"],["type","text","matInput","","formControlName","secteur","placeholder","Ex : FINANCE"],["type","text","matInput","","formControlName","chefferie","placeholder","Ex : FINANCE"],[1,"d-flex","align-items-center","justify-content-center","flex-column"],[1,"successIcon"],[1,"mg-t-10","mg-md-t-0",3,"click"],[1,"btn","btn-primary","btn-rounded","btn-block"],[1,"btn","btn-outline-primary","btn-rounded","btn-block"],[1,"successIcon",2,"color","crimson"],["src","assets/img/loading.gif",1,"successIcon",2,"color","rgb(248, 232, 9)"],["type","submit",1,"btn","btn-indigo","btn-with-icon",3,"click"],[1,"typcn","typcn-arrow-left"],[1,"typcn","typcn-arrow-right"]],template:function(t,o){if(1&t&&(e.TgZ(0,"h1",0),e.TgZ(1,"mat-toolbar-row"),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",1),e._uU(5,"close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-content"),e.YNc(7,ft,6,2,"div",2),e.TgZ(8,"div"),e.TgZ(9,"mat-stepper",null,3),e.TgZ(11,"mat-step",4),e.YNc(12,vt,1,0,"ng-template",5),e.TgZ(13,"form",6),e.NdJ("ngSubmit",function(){return o.valid()}),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e.TgZ(16,"div",9),e.TgZ(17,"span",10),e._uU(18," Type d'utilisateur : Ordinaire "),e.qZA(),e.TgZ(19,"mat-slide-toggle",11),e.NdJ("change",function(r){return o.onTypeUserChange(r)})("ngModelChange",function(r){return o.userOrAgent=r}),e.qZA(),e.TgZ(20,"span",10),e._uU(21,"Agent"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"div",8),e.TgZ(24,"div",12),e.TgZ(25,"div",13),e.TgZ(26,"div",14),e.YNc(27,Tt,3,1,"ng-container",15),e.YNc(28,At,2,0,"ng-container",15),e._UZ(29,"canvas",16,17),e.TgZ(31,"input",18),e.NdJ("change",function(r){return o.fileImageEvent(r)}),e.qZA(),e.qZA(),e.TgZ(32,"p",19),e._uU(33,"Photo"),e.qZA(),e.TgZ(34,"p",20),e._uU(35," Veuillez cliquer sur l'icone photo pour charger l'image "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"div",8),e.TgZ(38,"div",21),e.TgZ(39,"mat-form-field",22),e.TgZ(40,"mat-label"),e._uU(41,"Nom"),e.qZA(),e.TgZ(42,"input",23),e.NdJ("ngModelChange",function(r){return o.dataf.nom=r}),e.qZA(),e.TgZ(43,"mat-icon",24),e._uU(44,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",21),e.TgZ(46,"mat-form-field",22),e.TgZ(47,"mat-label"),e._uU(48,"Pr\xe9nom"),e.qZA(),e.TgZ(49,"input",25),e.NdJ("ngModelChange",function(r){return o.dataf.prenom=r}),e.qZA(),e.TgZ(50,"mat-icon",24),e._uU(51,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",7),e.TgZ(53,"mat-form-field",22),e.TgZ(54,"mat-label"),e._uU(55,"Email"),e.qZA(),e.TgZ(56,"input",26),e.NdJ("ngModelChange",function(r){return o.dataf.email=r}),e.qZA(),e.TgZ(57,"mat-icon",24),e._uU(58,"email"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",7),e.TgZ(60,"mat-form-field",22),e.TgZ(61,"mat-label"),e._uU(62,"Phone"),e.qZA(),e.TgZ(63,"input",27),e.NdJ("ngModelChange",function(r){return o.dataf.phone=r}),e.qZA(),e.TgZ(64,"mat-icon",24),e._uU(65,"phone"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",21),e.TgZ(67,"mat-form-field",22),e.TgZ(68,"mat-label"),e._uU(69,"Cat\xe9gorie"),e.qZA(),e.TgZ(70,"mat-select",28,29),e.NdJ("ngModelChange",function(r){return o.dataf.category=r}),e.YNc(72,qt,2,2,"mat-option",30),e.qZA(),e.TgZ(73,"mat-icon",24),e._uU(74,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",21),e.TgZ(76,"mat-form-field",22),e.TgZ(77,"mat-label"),e._uU(78,"Access Platform"),e.qZA(),e.TgZ(79,"input",31),e.NdJ("ngModelChange",function(r){return o.dataf.accessPlatform=r}),e.qZA(),e.TgZ(80,"mat-icon",24),e._uU(81,"filter_b_and_w"),e.qZA(),e.TgZ(82,"mat-autocomplete",null,32),e.YNc(84,Ct,2,2,"mat-option",30),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"div",7),e.TgZ(86,"mat-form-field",22),e.TgZ(87,"mat-label"),e._uU(88,"Role(s)"),e.qZA(),e.TgZ(89,"mat-chip-list",33,34),e.YNc(91,Ut,4,3,"mat-chip",35),e.TgZ(92,"input",36,37),e.NdJ("matChipInputTokenEnd",function(r){return o.addRole(r)}),e.qZA(),e.qZA(),e.TgZ(94,"mat-autocomplete",38,39),e.NdJ("optionSelected",function(r){return o.onRoleSelected(r)}),e.YNc(96,bt,2,2,"mat-option",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(97,"mat-step",40),e.YNc(98,Et,1,0,"ng-template",5),e.TgZ(99,"form",41),e.TgZ(100,"fieldset"),e.TgZ(101,"legend"),e._uU(102,"R\xe9gie & Centre"),e.qZA(),e.TgZ(103,"div",42),e.TgZ(104,"div",21),e.TgZ(105,"mat-form-field",22),e.TgZ(106,"mat-label"),e._uU(107,"R\xe9gie"),e.qZA(),e.TgZ(108,"mat-select",43),e.NdJ("selectionChange",function(r){return o.onRegieChanged(r)})("ngModelChange",function(r){return o.dataf.regie=r}),e.YNc(109,xt,2,2,"mat-option",30),e.qZA(),e.TgZ(110,"mat-icon",24),e._uU(111,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(112,"div",21),e.TgZ(113,"mat-form-field",22),e.TgZ(114,"mat-label"),e._uU(115,"Centre"),e.qZA(),e.TgZ(116,"mat-select",44),e.NdJ("ngModelChange",function(r){return o.dataf.centre=r}),e.YNc(117,Nt,2,2,"mat-option",30),e.qZA(),e.TgZ(118,"mat-icon",24),e._uU(119,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(120,"fieldset"),e.TgZ(121,"legend"),e._uU(122,"Adresse"),e.qZA(),e.TgZ(123,"div",42),e.TgZ(124,"div",7),e.TgZ(125,"div",8),e.TgZ(126,"div",9),e.TgZ(127,"span",10),e._uU(128," Territoire "),e.qZA(),e.TgZ(129,"mat-slide-toggle",45),e.NdJ("change",function(r){return o.onChangeTown(r)}),e.qZA(),e.TgZ(130,"span",10),e._uU(131,"Ville"),e.qZA(),e.qZA(),e.YNc(132,It,6,1,"div",46),e.qZA(),e.qZA(),e.TgZ(133,"div",47),e.TgZ(134,"mat-form-field",22),e.TgZ(135,"mat-label"),e._uU(136,"Num\xe9ro"),e.qZA(),e._UZ(137,"input",48),e.TgZ(138,"mat-icon",24),e._uU(139,"mode_edit"),e.qZA(),e.YNc(140,Ft,1,0,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(141,"div",47),e.TgZ(142,"mat-form-field",22),e.TgZ(143,"mat-label"),e._uU(144,"Avenue"),e.qZA(),e._UZ(145,"input",49),e.TgZ(146,"mat-icon",24),e._uU(147,"mode_edit"),e.qZA(),e.YNc(148,wt,1,0,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(149,"div",47),e.TgZ(150,"mat-form-field",22),e.TgZ(151,"mat-label"),e._uU(152,"Quartier"),e.qZA(),e._UZ(153,"input",50),e.TgZ(154,"mat-icon",24),e._uU(155,"mode_edit"),e.qZA(),e.YNc(156,yt,1,0,"mat-error",15),e.qZA(),e.qZA(),e.TgZ(157,"div",47),e.TgZ(158,"mat-form-field",22),e.TgZ(159,"mat-label"),e._uU(160,"Provinces"),e.qZA(),e.TgZ(161,"mat-select",51),e.NdJ("selectionChange",function(r){return o.onProvinceChange(r)}),e.YNc(162,Jt,2,2,"mat-option",30),e.qZA(),e.TgZ(163,"mat-icon",24),e._uU(164,"bookmark"),e.qZA(),e.qZA(),e.qZA(),e.YNc(165,Mt,8,1,"div",52),e.YNc(166,Ot,8,1,"div",52),e.YNc(167,Qt,8,1,"div",52),e.YNc(168,Pt,8,1,"div",52),e.YNc(169,Lt,8,1,"div",52),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(170,"mat-step",53),e.YNc(171,Bt,1,0,"ng-template",5),e.TgZ(172,"div",8),e.YNc(173,jt,18,0,"div",54),e.YNc(174,$t,11,1,"div",54),e.YNc(175,Vt,8,0,"div",54),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(176,"mat-dialog-actions"),e.YNc(177,Ht,3,0,"button",55),e._uU(178,"\xa0\xa0 "),e.YNc(179,zt,3,1,"button",55),e.qZA()),2&t){const n=e.MAs(83),r=e.MAs(90),l=e.MAs(95);e.xp6(3),e.hij(" ",o.data.title," "),e.xp6(4),e.Q6J("ngIf",1==o.hasError),e.xp6(6),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("checked",!1)("ngModel",o.userOrAgent),e.xp6(8),e.Q6J("ngIf",null!=o.selectedImage&&null!=o.selectedImage.data),e.xp6(1),e.Q6J("ngIf",!(null!=o.selectedImage&&null!=o.selectedImage.data)),e.xp6(14),e.Q6J("ngModel",o.dataf.nom),e.xp6(7),e.Q6J("ngModel",o.dataf.prenom),e.xp6(7),e.Q6J("ngModel",o.dataf.email),e.xp6(7),e.Q6J("ngModel",o.dataf.phone),e.xp6(7),e.Q6J("ngModel",o.dataf.category),e.xp6(2),e.Q6J("ngForOf",o.categories),e.xp6(7),e.Q6J("ngModel",o.dataf.accessPlatform)("matAutocomplete",n),e.xp6(5),e.Q6J("ngForOf",o.access),e.xp6(7),e.Q6J("ngForOf",o.selectedRoles),e.xp6(1),e.Q6J("matAutocomplete",l)("matChipInputFor",r)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),e.xp6(4),e.Q6J("ngForOf",o.roles),e.xp6(3),e.Q6J("formGroup",o.adressForm),e.xp6(9),e.Q6J("ngModel",o.dataf.regie),e.xp6(1),e.Q6J("ngForOf",o.regies),e.xp6(7),e.Q6J("ngModel",o.dataf.centre),e.xp6(1),e.Q6J("ngForOf",o.centers),e.xp6(12),e.Q6J("checked",!0),e.xp6(3),e.Q6J("ngIf",0==o.townOrTerritory),e.xp6(8),e.Q6J("ngIf",o.form.hasError("num")&&!o.form.hasError("required")),e.xp6(8),e.Q6J("ngIf",o.form.hasError("avenue")&&!o.form.hasError("required")),e.xp6(8),e.Q6J("ngIf",o.form.hasError("quartier")&&!o.form.hasError("required")),e.xp6(6),e.Q6J("ngForOf",o.provinces),e.xp6(3),e.Q6J("ngIf",1==o.townOrTerritory),e.xp6(1),e.Q6J("ngIf",0==o.townOrTerritory),e.xp6(1),e.Q6J("ngIf",1==o.townOrTerritory),e.xp6(1),e.Q6J("ngIf",0==o.townOrTerritory&&1==o.secteurOrChefferie),e.xp6(1),e.Q6J("ngIf",0==o.townOrTerritory&&0==o.secteurOrChefferie),e.xp6(4),e.Q6J("ngIf",1===o.isEnded),e.xp6(1),e.Q6J("ngIf",0===o.isEnded),e.xp6(1),e.Q6J("ngIf",-1===o.isEnded),e.xp6(2),e.Q6J("ngIf",1==o.isShown&&1==o.couldBack),e.xp6(2),e.Q6J("ngIf",o.couldSave)}},directives:[m.uh,R.rD,P.Hw,m.ZT,m.xY,A.O5,w.Vq,w.C0,w.VY,a._Y,a.JL,a.sg,S.Rr,a.JJ,a.On,_.KE,_.hX,O.Nt,a.Fj,a.u,_.R9,L.gD,A.sg,y.ZL,y.XC,U.qn,U.oH,m.H8,B.ey,U.HS,U.qH,_.TO],styles:[""]}),i})();var $=d(2340),ve=d(4457);function Xt(i,s){1&i&&(e.TgZ(0,"mat-option",20),e._uU(1," {{i.denomination} "),e.qZA()),2&i&&e.Q6J("value",s.$implicit.id)}function Kt(i,s){1&i&&(e.ynx(0),e._uU(1," Activ\xe9 "),e.BQk())}function Wt(i,s){1&i&&(e.ynx(0),e._uU(1," D\xe9sactiv\xe9 "),e.BQk())}function eo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",24),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"img",25),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e.YNc(22,Kt,2,0,"ng-container",26),e.YNc(23,Wt,2,0,"ng-container",26),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e.TgZ(29,"div",27),e.TgZ(30,"button",28),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).del(r)}),e._UZ(31,"i",29),e.qZA(),e.TgZ(32,"button",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).edit(r)}),e._UZ(33,"i",31),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,o=s.index,n=e.oxw(2);e.xp6(2),e.hij(" ",o+1+n.currentPage*n.pp,""),e.xp6(2),e.Q6J("src",n.imgPath+""+t.url+"."+t.typeImg,e.LSH),e.xp6(2),e.Oqu(t.nom),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Oqu(null==t?null:t.regi),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.Oqu(t.categorie),e.xp6(2),e.Oqu(t.accessPlatform),e.xp6(2),e.Q6J("ngIf",t.isAllowed),e.xp6(1),e.Q6J("ngIf",0==t.isAllowed),e.xp6(2),e.Oqu(t.creator),e.xp6(2),e.Oqu(t.createdAt)}}function to(i,s){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"table",22),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Photo"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Noms "),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Username"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Email"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Phone"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"R\xe9gie"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Role"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Cat\xe9gorie"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Platform"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Access"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Utilisateur"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Date"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"\xa0"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"tbody"),e.YNc(33,eo,34,14,"tr",23),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(33),e.Q6J("ngForOf",null==t.usersPager?null:t.usersPager.content)}}function oo(i,s){1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"strong"),e._uU(2,"Aucune banque n'est enregistr\xe9e"),e.qZA(),e.qZA())}let io=(()=>{class i{constructor(t){this.userServ=t,this.p=0,this.pp=$.N.defautlPageSize,this.itemLength=0,this.currentPage=0,this.provinces=[],this.regies=[],this.imgPath="",this.pattern="",this.imgPath=$.N.imgPath,this.provinceFilter=new a.NI,t.fetchUsersPaging(this.currentPage,$.N.defautlPageSize).subscribe(o=>{this.usersPager=o,this.itemLength=o.totalElements})}ngOnInit(){}onChanged(t){}onPageChanged(t){this.userServ.fetchUsersPaging(t.pageIndex,5).subscribe(o=>{this.usersPager=o,this.itemLength=o.totalElements}),this.currentPage=t.pageIndex}del(t){}edit(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-users"]],decls:32,vars:8,consts:[["matDialogTitle",""],["aria-hidden","false","aria-label","Example user verified icon","matDialogClose","",1,"close-btn"],[1,"row"],[1,"col-md-3"],["appearance","standard"],["type","text","matInput","","placeholder","Recherche...","autocomplete","off",3,"keyup"],["matSuffix",""],["appearance","standard",1,"example-full-width"],["type","text","placeholder","Filtrer par province","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],["class","table-responsive",4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],[1,"mg-y-30"],[1,"col-md-6"],[1,"btn","btn-indigo","btn-with-icon"],[1,"fa","fa-file-pdf-o"],["aria-label","Select page",3,"length","pageSize","hidePageSize","page"],[3,"value"],[1,"table-responsive"],[1,"table","table-striped","mg-b-0"],[4,"ngFor","ngForOf"],["scope","row"],[1,"logo",3,"src"],[4,"ngIf"],[1,"btn-group"],["type","button",1,"btn-danger",3,"click"],[1,"typcn","typcn-delete"],["type","button",1,"btn-success",3,"click"],[1,"typcn","typcn-edit"],["role","alert",1,"alert","alert-info"]],template:function(t,o){if(1&t&&(e.TgZ(0,"h1",0),e.TgZ(1,"mat-toolbar-row"),e.TgZ(2,"span"),e._uU(3," Tous les utilisateurs "),e.qZA(),e.TgZ(4,"mat-icon",1),e._uU(5,"close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-content"),e.TgZ(7,"div",2),e.TgZ(8,"div",3),e.TgZ(9,"mat-form-field",4),e.TgZ(10,"input",5),e.NdJ("keyup",function(r){return o.onChanged(r)}),e.qZA(),e.TgZ(11,"mat-icon",6),e._uU(12,"search"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div"),e.TgZ(14,"mat-form-field",7),e.TgZ(15,"mat-label"),e._uU(16,"R\xe9gie"),e.qZA(),e._UZ(17,"input",8),e.TgZ(18,"mat-autocomplete",9,10),e.YNc(20,Xt,2,1,"mat-option",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",2),e.TgZ(22,"div",12),e.YNc(23,to,34,1,"div",13),e.YNc(24,oo,3,0,"div",14),e._UZ(25,"hr",15),e.qZA(),e.TgZ(26,"div",16),e.TgZ(27,"button",17),e._UZ(28,"i",18),e._uU(29," Export "),e.qZA(),e.qZA(),e.TgZ(30,"div",16),e.TgZ(31,"mat-paginator",19),e.NdJ("page",function(r){return o.onPageChanged(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(19);e.xp6(17),e.Q6J("formControl",o.provinceFilter)("matAutocomplete",n),e.xp6(3),e.Q6J("ngForOf",o.regies),e.xp6(3),e.Q6J("ngIf",0==(null==o.usersPager?null:o.usersPager.empty)),e.xp6(1),e.Q6J("ngIf",1==(null==o.usersPager?null:o.usersPager.empty)),e.xp6(7),e.Q6J("length",o.itemLength)("pageSize",o.pp)("hidePageSize",!0)}},directives:[m.uh,R.rD,P.Hw,m.ZT,m.xY,_.KE,O.Nt,_.R9,_.hX,a.Fj,y.ZL,a.JJ,a.oH,y.XC,A.sg,A.O5,ve.NW,B.ey],styles:[""]}),i})();var no=d(7538);const ro=function(i){return[i]};function so(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e.TgZ(3,"a",19),e._UZ(4,"i",20),e.qZA(),e.qZA(),e.TgZ(5,"div",21),e.TgZ(6,"div",22),e._UZ(7,"img",23),e.qZA(),e.TgZ(8,"h6"),e._uU(9),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA(),e.qZA(),e._UZ(12,"hr",24),e.TgZ(13,"div",25),e._UZ(14,"mat-slide-toggle",26),e.qZA(),e._UZ(15,"hr",24),e.TgZ(16,"div",27),e.TgZ(17,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).view(n)}),e._UZ(18,"i",29),e._uU(19," Voir"),e.qZA(),e.TgZ(20,"a",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).edit(n)}),e._UZ(21,"i",30),e._uU(22," Edit Profile"),e.qZA(),e.TgZ(23,"a",31),e._UZ(24,"i",32),e._uU(25," Activity Logs"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(9),e.Oqu(t.nom),e.xp6(2),e.Oqu(t.role),e.xp6(3),e.Q6J("checked",t.isAllowed),e.xp6(9),e.Q6J("routerLink",e.VKq(4,ro,"/profile/"+t.id+"/logs"))}}function ao(i,s){if(1&i&&(e.ynx(0),e.YNc(1,so,26,6,"div",15),e.BQk()),2&i){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.id!=(null==o.auth.getSession().user?null:o.auth.getSession().user.id))}}function lo(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ao,2,1,"ng-container",14),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.usersPager?null:t.usersPager.content)}}let co=(()=>{class i{constructor(t,o,n,r){this.dialog=t,this.userServ=o,this.auth=n,this.router=r}ngOnInit(){this.userServ.fetchUsersPaging(0,10).subscribe(t=>{this.usersPager=t})}openAddUserForm(){this.dialogConfig=new m.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Creation user ",message:"",action:"EDIT",data:null},this.dialog.open(gt,this.dialogConfig)}seeAll(){this.dialogConfig=new m.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"USER",title:"Liste des utilisateurs ",message:"",action:"LIST",data:null},this.dialog.open(io,this.dialogConfig)}edit(t){this.dialogConfig=new m.vA,this.dialogConfig.disableClose=!0,this.dialogConfig.autoFocus=!0,this.dialogConfig.panelClass="custom-modalbox",this.dialogConfig.position={top:"100px"},this.dialogConfig.width="80%",this.dialogConfig.data={form:"REGIE",title:"Edition user ",message:"",action:"EDIT",data:t},this.dialog.open(Gt,this.dialogConfig)}view(t){this.router.navigate(["/profile",t.id],t&&"AGENT"==t.type?{queryParams:{type:"AGENT"}}:{queryParams:{type:"USER"}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.uw),e.Y36(k.K),e.Y36(no.u),e.Y36(u.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-users"]],decls:20,vars:1,consts:[[1,"az-content-label","mg-b-5","config-title"],[1,"position-absolute","btn-group-config"],["role","group","aria-label","",1,"btn-group"],["type","button",1,"btn","btn-indigo","btn-sm","btn-icon",3,"click"],[1,"typcn","typcn-plus-outline"],["type","button",1,"btn","btn-primary","btn-sm","btn-icon"],[1,"typcn","typcn-printer"],[1,"mg-b-20","tx-gray-600"],[1,"mg-y-30"],[1,"row","p-3"],[4,"ngIf"],[1,"p-2","m-2"],[1,"col-sm-6","col-md-3","mg-t-10","mg-md-t-0"],[1,"btn","btn-outline-primary","btn-rounded","btn-block",3,"click"],[4,"ngFor","ngForOf"],["class","col-md-4 p-2",4,"ngIf"],[1,"col-md-4","p-2"],[1,"border","shadow","rounded-lg"],[1,"az-dropdown-header","d-sm-none"],["href","",1,"az-header-arrow"],[1,"icon","ion-md-arrow-back"],[1,"az-header-profile"],[1,"az-img-user","border","rounded-circle"],["src","http://localhost:8080/dtax/img/avatar.jpg","alt",""],[1,"mg-y-10"],[1,"justify-content-center","d-flex"],["color","primary",3,"checked"],[1,"justify-content-center","d-flex","align-content-center","align-items-center","flex-column"],[1,"dropdown-item","justify-content-center","d-flex","align-content-center","align-items-center",3,"click"],[1,"typcn","typcn-user-outline"],[1,"typcn","typcn-edit"],[1,"dropdown-item","justify-content-center","d-flex","align-content-center","align-items-center",3,"routerLink"],[1,"typcn","typcn-time"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"span"),e._uU(3,"\xa0 "),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"button",3),e.NdJ("click",function(){return o.openAddUserForm()}),e._UZ(7,"i",4),e.qZA(),e.TgZ(8,"button",5),e._UZ(9,"i",6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"p",7),e._uU(11,"Veuillez ajouter, editer, actiber,voir la liste des utilisateurs."),e.qZA(),e._UZ(12,"hr",8),e.TgZ(13,"div",9),e.YNc(14,lo,2,1,"ng-container",10),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"button",13),e.NdJ("click",function(){return o.seeAll()}),e._uU(18,"Voir tout"),e.qZA(),e.qZA(),e.qZA(),e._UZ(19,"hr",8),e.qZA()),2&t&&(e.xp6(14),e.Q6J("ngIf",!(null!=o.usersPager&&o.usersPager.empty)))},directives:[A.O5,A.sg,S.Rr,u.yS],styles:[""]}),i})();var uo=d(2533),mo=d(9532);const po=[{path:"",component:Q,data:{breadcrumb:"Utilisateurs"},children:[{path:"home",component:co,data:{breadcrumb:"D\xe9tail"}},{path:"logs",component:d(907).x,data:{breadcrumb:"Logs"}},{path:"roles",component:Fe,data:{breadcrumb:"Roles"}},{path:"modules",component:we,data:{breadcrumb:"Modules"}}]}];let _o=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[mo.N,u.Bz.forChild(po),S.rP,R.g0,O.c,uo.JX,y.Bb,w.T5,L.LD,L.LD,_.lN,ve.TU,S.rP,U.Hi,B.us]]}),i})()},2596:(J,f,d)=>{d.d(f,{N:()=>F});var u=d(2340),e=d(7716),I=d(1841);let F=(()=>{class q{constructor(c){this.http=c,this.path=u.N.baseApiUrl+"config/regional/countries/"}getProvinces(){return this.http.get(`${this.path}provinces`)}getCountries(){return this.http.get(u.N.baseApiUrl+"config/regional/countries")}searchProvinces(c){return this.http.get(`${this.path}provinces?pattern=${c}`)}getProvince(c){return this.http.get(`${this.path}provinces/${c}`)}removeProvince(c){return this.http.delete(`${this.path}provinces/${c}`)}addProvince(c){return this.http.post(`${this.path}provinces`,c)}editProvince(c,Q){return this.http.put(`${this.path}provinces/${c}`,Q)}getProvinceTowns(c){return this.http.get(`${this.path}provinces/${c}/towns`)}getProvinceRessort(c){return this.http.get(`${this.path}provinces/${c}/ressorts`)}searchProvinceTowns(c,Q){return this.http.get(`${this.path}provinces/${c}/towns/search`)}getProvinceTerriroires(c){return this.http.get(`${this.path}provinces/${c}/territoires`)}getCommunesByVille(c){return this.http.get(`${this.path}provinces/towns/${c}/communes`)}getSecteurByTerritoire(c){return this.http.get(`${this.path}provinces/territories/${c}/secteur`)}getChefferieByTerritoire(c){return this.http.get(`${this.path}provinces/territories/${c}/chefferie`)}}return q.\u0275fac=function(c){return new(c||q)(e.LFG(I.eN))},q.\u0275prov=e.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})()}}]);